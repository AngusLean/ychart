define("tool/util",["require"],function(e){function n(e){return parseInt(e,10)}function s(e){return!e||typeof e=="undefined"||e=="null"}function o(e,t,n,r){if(t.hasOwnProperty(n)){var i=e[n];if(typeof i=="object")u(e[n],t[n],r);else if(r||!(n in e))e[n]=t[n]}}function u(e,t,n,r){s(e)&&(e={}),s(r)||a(t,r);for(var i in t)o(e,t,i,n);return e}function a(e,t){if(t&&e)for(var n in e)t.hasOwnProperty(n)&&t[n]!=n&&(e[t[n]]=e[n],e[n]=null);return e}function l(){return document.createElement("canvas")}function c(){return f||(f=l().getContext("2d")),f}function h(e){return function(t){return!s(t)&&Object.prototype.toString.call(t)=="[object "+e+"]"}}var t=function(e,t){return!e.hasOwnProperty(t)&&t in e},r={getPosition:function(e){var t=typeof e=="string"?document.getElementById(e):e,r=document.defaultView.getComputedStyle(t),i=t.getBoundingClientRect(),s=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,o=document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft;return{width:t.clientWidth||n(r.width)||n(t.style.width)-(n(r.paddingLeft)||0)-n(r.paddingRight)||0,height:t.clientHeight||n(r.height)||n(t.style.height)-(n(r.paddingTop)||0)-n(r.paddingBottom)||0,top:i.top+s,left:i.left+o}}},i={inherit:function(e,t){function r(){}var n=e.prototype;r.prototype=t.prototype,e.prototype=new r;for(var i in n)e.prototype[i]=n[i];e.constructor=e},mixin:function(e,t,n){function r(e,t,n){for(var r in t)t.hasOwnProperty(r)&&(n?t[r]!==null:e[r]===null)&&(e[r]=t[r]);return e}t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,this._over(e,t,n)}},f=null;return{merge:u,replaceattr:a,checkNull:s,ClassUtil:i,DomUtil:r,isFunc:h("Function"),isObj:h("Object"),isArr:h("Array"),getContext:c}}),define("tool/guid",["require","exports","module"],function(e,t,n){var r=1e3,i=function(){return r++};return i}),define("base/matrix",[],function(){var e=typeof Float32Array=="undefined"?Array:Float32Array,t={create:function(){var n=new e(6);return t.identity(n),n},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},mul:function(e,t,n){var r=t[0]*n[0]+t[2]*n[1],i=t[1]*n[0]+t[3]*n[1],s=t[0]*n[2]+t[2]*n[3],o=t[1]*n[2]+t[3]*n[3],u=t[0]*n[4]+t[2]*n[5]+t[4],a=t[1]*n[4]+t[3]*n[5]+t[5];return e[0]=r,e[1]=i,e[2]=s,e[3]=o,e[4]=u,e[5]=a,e},translate:function(e,t,n){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+n[0],e[5]=t[5]+n[1],e},rotate:function(e,t,n){var r=t[0],i=t[2],s=t[4],o=t[1],u=t[3],a=t[5],f=Math.sin(n),l=Math.cos(n);return e[0]=r*l+o*f,e[1]=-r*f+o*l,e[2]=i*l+u*f,e[3]=-i*f+l*u,e[4]=l*s+f*a,e[5]=l*a-f*s,e},scale:function(e,t,n){var r=n[0],i=n[1];return e[0]=t[0]*r,e[1]=t[1]*i,e[2]=t[2]*r,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*i,e},invert:function(e,t){var n=t[0],r=t[2],i=t[4],s=t[1],o=t[3],u=t[5],a=n*o-s*r;return a?(a=1/a,e[0]=o*a,e[1]=-s*a,e[2]=-r*a,e[3]=n*a,e[4]=(r*u-o*i)*a,e[5]=(s*i-n*u)*a,e):null}};return t}),define("base/vector",[],function(){var e=typeof Float32Array=="undefined"?Array:Float32Array,t={create:function(t,n){var r=new e(2);return r[0]=t||0,r[1]=n||0,r},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e},clone:function(t){var n=new e(2);return n[0]=t[0],n[1]=t[1],n},set:function(e,t,n){return e[0]=t,e[1]=n,e},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},scaleAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},sub:function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},len:function(e){return Math.sqrt(this.lenSquare(e))},lenSquare:function(e){return e[0]*e[0]+e[1]*e[1]},mul:function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},div:function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]},scale:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},normalize:function(e,n){var r=t.len(n);return r===0?(e[0]=0,e[1]=0):(e[0]=n[0]/r,e[1]=n[1]/r),e},distance:function(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))},distanceSquare:function(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])},negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e},lerp:function(e,t,n,r){return e[0]=t[0]+r*(n[0]-t[0]),e[1]=t[1]+r*(n[1]-t[1]),e},applyTransform:function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e},min:function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e},max:function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}};return t.length=t.len,t.lengthSquare=t.lenSquare,t.dist=t.distance,t.distSquare=t.distanceSquare,t}),define("base/transform",["require","./matrix","./vector"],function(e){function s(e){return e>i||e<-i}var t=e("./matrix"),n=e("./vector"),r=t.identity,i=5e-5,o=function(e){e=e||this,e.position?this.position=e.position:this.position=[0,0],e.rotation?this.rotation=e.rotation:this.rotation=0,e.scale?this.scale=e.scale:this.scale=[1,1],this.origin=this.origin||null};o.prototype.transform=null,o.prototype.needLocalTransform=function(){return s(this.rotation)||s(this.position[0])||s(this.position[1])||s(this.scale[0]-1)||s(this.scale[1]-1)},o.prototype.updateTransform=function(){var e=this.parent,n=e&&e.transform,i=this.needLocalTransform(),s=this.transform;s=s||[];if(!i&&!n){r(s);return}s=s||t.create(),i?this.getLocalTransform(s):r(s),n&&(i?t.mul(s,e.transform,s):t.copy(s,e.transform)),this.transform=s,this.invTransform=this.invTransform||t.create(),t.invert(this.invTransform,s)},o.prototype.getLocalTransform=function(e){e=e||[],r(e);var n=this.origin,i=this.scale,s=this.rotation,o=this.position;return n&&(e[4]-=n[0],e[5]-=n[1]),i&&t.scale(e,e,i),s&&t.rotate(e,e,s),n&&(e[4]+=n[0],e[5]+=n[1]),e[4]+=o[0],e[5]+=o[1],e},o.prototype.setTransform=function(e){var t=this.transform;t&&e.transform(t[0],t[1],t[2],t[3],t[4],t[5])};var u=[];return o.prototype.decomposeTransform=function(){if(!this.transform)return;var e=this.parent,n=this.transform;e&&e.transform&&(t.mul(u,e.invTransform,n),n=u);var r=n[0]*n[0]+n[1]*n[1],i=n[2]*n[2]+n[3]*n[3],o=this.position,a=this.scale;s(r-1)&&(r=Math.sqrt(r)),s(i-1)&&(i=Math.sqrt(i)),n[0]<0&&(r=-r),n[3]<0&&(i=-i),o[0]=n[4],o[1]=n[5],a[0]=r,a[1]=i,this.rotation=Math.atan2(-n[1]/i,n[0]/r)},o.prototype.transformCoordToLocal=function(e,t){var r=[e,t],i=this.invTransform;return i&&n.applyTransform(r,r,i),r},o.prototype.transformCoordToGlobal=function(e,t){var r=[e,t],i=this.transform;return i&&n.applyTransform(r,r,i),r},o}),define("base/element",["require","../tool/util","../tool/guid","../base/transform"],function(e){var t=e("../tool/util"),n=e("../tool/guid"),r=e("../base/transform"),i=function(e){this.id=null,this.parent=null,this.init(),r.call(this,e)};return i.prototype.zLevel=0,i.prototype.ignore=!1,i.prototype.type="element",i.prototype.getId=function(){return this.id},i.prototype.getType=function(){return this.type},i.prototype.init=function(){this.id=this.type+"--"+n()},t.ClassUtil.inherit(i,r,!0),i}),define("Group",["require","./tool/util","./base/element"],function(e){var t=e("./tool/util"),n=e("./base/element"),r=function(e){this.children=[],t.merge(this,e,!1),n.call(this,e)};return r.prototype.type="group",r.prototype.addChild=function(e){if(e==this)return;return e.parent=this,this.children.push(e),this},t.ClassUtil.inherit(r,n),r}),define("Storage",["require","./tool/util","./Group"],function(e){var t=e("./tool/util"),n=function(e){this._yh=e,this._roots=[]},r=e("./Group");return n.prototype.addEle=function(e){if(!e||e.getId()===null)return;var t,n;for(t=0;t<this._roots.length;t++){n=this._roots[t];if(n.getId()==e.getId())return}this._roots.push(e)},n.prototype.getDisplayableShapeList=function(){var e=[],n=function(i){if(t.isArr(i))for(var s=0;s<i.length;s++)i[s]instanceof r?n(i[s].children):i[s].ignore===!1&&e.push(i[s]);else i instanceof r&&n(i.children)};return n(this._roots),e},n.prototype.clean=function(){this._roots=[]},n}),define("Layer",["require","./tool/util"],function(e){function n(e){return e&&e.getContext?e.getContext("2d"):null}function r(e,t,n,r,i,s){var o=document.createElement(t),u=o.style;return u.position="absolute",u.left=i,u.top=s,u.width=n+"px",u.height=r+"px",o.width=n,o.height=r,o.setAttribute("ychart-layer",e),o}var t=e("./tool/util"),i=function(e,i){this.id=e,this.dom=document.getElementById(e),t.checkNull(this.dom)&&(this.dom=r(e,"canvas",i.width,i.height,i.left||0,i.top||0)),this.ctx=n(this.dom);if(t.checkNull(this.ctx)){alert("浏览器不支持HTML5 canvas绘图,请更新浏览器 "+this.ctx);return}this.ctxWidth=this.ctx.canvas.width,this.ctxHeight=this.ctx.canvas.height,this.transform=[1,0,0,-1,0,this.ctxHeight]};return i.prototype.getContext=function(){return this.ctx},i}),define("Painter",["require","./Layer","./tool/guid","./tool/util","./Group"],function(e){var t=e("./Layer"),n=e("./tool/guid"),r=e("./tool/util"),i=function(e){this.container=document.getElementById(e.domid);var t=r.DomUtil.getPosition(this.container);this.width=t.width,this.height=t.height,this.left=t.left,this.top=t.top,t=null,this.layer={}};i.prototype.refresh=function(e){var t,n,r,i;for(t=0;t<e.length;t++)n=e[t],i=n.zLevel||0,r=this.getLayer(i),this.preProcessShapeInLayer(n,r),n.Brush(r.getContext())};var s=e("./Group");return i.prototype.preProcessShapeInLayer=function(e,t){var n=function(e){r.checkNull(e.parent)?e.parent=t:e.parent instanceof s&&i(e.parent,t)},i=function(e,t){var n=[],r=function(e){e instanceof s&&n.unshift(e),e.parent instanceof s&&r(e.parent)};r(e);var i;n.forEach(function(e,n){n===0?e.parent=t:e.parent=i,i=e,e.updateTransform()})};n(e)},i.prototype.getLayer=function(e){var r=this.layer[e];return r||(r=new t(n()+"-zlevel",{width:this.getWidth(),height:this.getHeight(),left:this.left,top:this.top}),this.layer[e]=r,this.insertLayer(r)),r},i.prototype.getWidth=function(){return this.width},i.prototype.getHeight=function(){return this.height},i.prototype.clean=function(){this.width=null,this.height=null,this.container.html(""),this.container=null},i.prototype.insertLayer=function(e){var t=e.dom;this.container.appendChild(t)},i}),define("Ycharts",["require","./tool/util","./Storage","./Painter","./Group"],function(e){function s(e){var t=document.getElementById(e);return t&&t.getContext?t.getContext("2d"):null}var t=e("./tool/util"),n=e("./Storage"),r=e("./Painter"),i=e("./Group"),o=function(e,t){this.id=null,this.domid=e,this.storage=new n(this),this.painter=new r(this)};o.prototype.clear=function(){this.painter.clean(),this.storage.clean()},o.prototype.add=function(e){return this.storage.addEle(e),this},o.prototype.BrushAll=function(){var e=this.storage.getDisplayableShapeList();return this.painter.refresh(e),this},o.prototype.setId=function(e){this.id=e};var u={},a={},f=1e3;return u.init=function(e,t){var n=new o(e,t);return n.setId("ycharts-"+f++),a[e]=n,n},u.depose=function(e){a[e]&&(a[e].clean(),a[e]=undefined)},u}),define("ycharts/tool/util",["require"],function(e){function n(e){return parseInt(e,10)}function s(e){return!e||typeof e=="undefined"||e=="null"}function o(e,t,n,r){if(t.hasOwnProperty(n)){var i=e[n];if(typeof i=="object")u(e[n],t[n],r);else if(r||!(n in e))e[n]=t[n]}}function u(e,t,n,r){s(e)&&(e={}),s(r)||a(t,r);for(var i in t)o(e,t,i,n);return e}function a(e,t){if(t&&e)for(var n in e)t.hasOwnProperty(n)&&t[n]!=n&&(e[t[n]]=e[n],e[n]=null);return e}function l(){return document.createElement("canvas")}function c(){return f||(f=l().getContext("2d")),f}function h(e){return function(t){return!s(t)&&Object.prototype.toString.call(t)=="[object "+e+"]"}}var t=function(e,t){return!e.hasOwnProperty(t)&&t in e},r={getPosition:function(e){var t=typeof e=="string"?document.getElementById(e):e,r=document.defaultView.getComputedStyle(t),i=t.getBoundingClientRect(),s=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,o=document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft;return{width:t.clientWidth||n(r.width)||n(t.style.width)-(n(r.paddingLeft)||0)-n(r.paddingRight)||0,height:t.clientHeight||n(r.height)||n(t.style.height)-(n(r.paddingTop)||0)-n(r.paddingBottom)||0,top:i.top+s,left:i.left+o}}},i={inherit:function(e,t){function r(){}var n=e.prototype;r.prototype=t.prototype,e.prototype=new r;for(var i in n)e.prototype[i]=n[i];e.constructor=e},mixin:function(e,t,n){function r(e,t,n){for(var r in t)t.hasOwnProperty(r)&&(n?t[r]!==null:e[r]===null)&&(e[r]=t[r]);return e}t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,this._over(e,t,n)}},f=null;return{merge:u,replaceattr:a,checkNull:s,ClassUtil:i,DomUtil:r,isFunc:h("Function"),isObj:h("Object"),isArr:h("Array"),getContext:c}}),define("ycharts/tool/debug",["require","./util"],function(e){var t=e("./util"),n="DamJs Debug Info :    ",r="DamJs warn Info :    ",i=function(){var e=0,t="      ";for(e=0;e<n.length;e++)t+=" ";return t}(),s=function(e){console.log(n+e)},o=function(e){console.log(r+e)},u=!1,a=function(e){function n(e){var n;if(t.isObj(e))for(n in e)t.isObj(e[n])?(s(n+" : "),u=!0,a(e[n]),u=!1):u?console.log(i+n+" : "+e[n]):s(n+" : "+e[n]);else if(t.isArr(e)){var r=e.length;for(var o=0;o<r;o++)a(e[o])}}n(e),u=!1};return{printobj:a,debug:s,warn:o}}),define("ycharts/shape/dep/style",["require","../../tool/util"],function(e){var t={fillStyle:"fillStyle",fillColor:"fillStyle",color:"fillStyle",strokeStyle:"strokeStyle",lineColor:"strokeStyle",lineWidth:"lineWidth",lineCap:"lineCap",lineJoin:"lineJoin",font:"font",textAlign:"textAlign",textBaseline:"textBaseline",shadowColor:"shadowColor",shadowOffsetX:"shadowOffsetX",shadowOffsetY:"shadowOffsetY",shadowBlur:"shadowBlur",shadowx:"shadowOffsetX",shadowy:"shadowOffsetY",globalAlpha:"globalAlpha",alpha:"globalAlpha",globalCompositionOperation:"globalCompositionOperation",overlaystyle:"globalCompositionOperation"},n=e("../../tool/util"),r=function(e){if(e){n.replaceattr(e,t);for(var r in e)e[r]&&(this[r]=e[r])}};return r.prototype={strokeStyle:"blue",fillStyle:"#dcd5d9",lineWidth:1,lineCap:"butt",lineJoin:"round",font:"bold 14px Arial, Helvetica, sans-serif, Times, serif",textColor:"black",textAlign:"start",textBaseline:"bottom",shadowColor:"#EA9090",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,globalAlpha:1,globalCompositionOperation:"source-over"},r}),define("ycharts/tool/text",["require","../shape/dep/style","./util"],function(e){function a(e,t,n,r,i,s,o){i&&(e.font=i),e.textAlign=s,e.textBaseline=o;var a=u.getTextRect(t,n,r,i,s,o);t=(t+"").split("\n");var f=u.getTextHeight("国",i);switch(o){case"top":r=a.y;break;case"bottom":r=a.y+f;break;default:r=a.y+f/2}for(var l=0,c=t.length;l<c;l++)e.fillText(t[l],n,r),r+=f}var t=e("../shape/dep/style"),n=new t,r=n.font,i=n.textAlign,s=n.textBaseline,o=e("./util").getContext(),u={TEXT_CACHE_MAX:5e3,_textHeightCache:[],_textHeightCacheCounter:0,getTextHeight:function(e,t){t=t||r;var n=e+":"+t;if(u._textHeightCache[n])return u._textHeightCache[n];o.save(),t&&(o.font=t),e=(e+"").split("\n");var i=(o.measureText("国").width+2)*e.length;return o.restore(),u._textHeightCache[n]=i,++u._textHeightCacheCounter>u.TEXT_CACHE_MAX&&(u._textHeightCacheCounter=0,u._textHeightCache={}),i},_textWidthCache:[],_textWidthCacheCounter:0,getTextWidth:function(e,t){t=t||r;var n=e+":"+t;if(u._textWidthCache[n])return u._textWidthCache[n];o.save(),t&&(o.font=t),e=(e+"").split("\n");var i=0;for(var s=0,a=e.length;s<a;s++)i=Math.max(o.measureText(e[s]).width,i);return o.restore(),u._textWidthCache[n]=i,++u._textWidthCacheCounter>u.TEXT_CACHE_MAX&&(u._textWidthCacheCounter=0,u._textWidthCache={}),i},getTextRect:function(e,t,n,o,a,f){o=o||r,a=a||i,f=f||s;var l=u.getTextWidth(e,o),c=u.getTextHeight("国",o);e=(e+"").split("\n");switch(a){case"end":case"right":t-=l;break;case"center":t-=l/2}switch(f){case"top":break;case"bottom":n-=c*e.length;break;default:n-=c*e.length/2}return{x:t,y:n,width:l,height:c*e.length}}};return{fillText:a,getTextRect:u.getTextRect,getTextWidth:u.getTextWidth,getTextHeight:u.getTextHeight}}),define("ycharts/tool/guid",["require","exports","module"],function(e,t,n){var r=1e3,i=function(){return r++};return i}),define("ycharts/base/matrix",[],function(){var e=typeof Float32Array=="undefined"?Array:Float32Array,t={create:function(){var n=new e(6);return t.identity(n),n},identity:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},mul:function(e,t,n){var r=t[0]*n[0]+t[2]*n[1],i=t[1]*n[0]+t[3]*n[1],s=t[0]*n[2]+t[2]*n[3],o=t[1]*n[2]+t[3]*n[3],u=t[0]*n[4]+t[2]*n[5]+t[4],a=t[1]*n[4]+t[3]*n[5]+t[5];return e[0]=r,e[1]=i,e[2]=s,e[3]=o,e[4]=u,e[5]=a,e},translate:function(e,t,n){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+n[0],e[5]=t[5]+n[1],e},rotate:function(e,t,n){var r=t[0],i=t[2],s=t[4],o=t[1],u=t[3],a=t[5],f=Math.sin(n),l=Math.cos(n);return e[0]=r*l+o*f,e[1]=-r*f+o*l,e[2]=i*l+u*f,e[3]=-i*f+l*u,e[4]=l*s+f*a,e[5]=l*a-f*s,e},scale:function(e,t,n){var r=n[0],i=n[1];return e[0]=t[0]*r,e[1]=t[1]*i,e[2]=t[2]*r,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*i,e},invert:function(e,t){var n=t[0],r=t[2],i=t[4],s=t[1],o=t[3],u=t[5],a=n*o-s*r;return a?(a=1/a,e[0]=o*a,e[1]=-s*a,e[2]=-r*a,e[3]=n*a,e[4]=(r*u-o*i)*a,e[5]=(s*i-n*u)*a,e):null}};return t}),define("ycharts/base/vector",[],function(){var e=typeof Float32Array=="undefined"?Array:Float32Array,t={create:function(t,n){var r=new e(2);return r[0]=t||0,r[1]=n||0,r},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e},clone:function(t){var n=new e(2);return n[0]=t[0],n[1]=t[1],n},set:function(e,t,n){return e[0]=t,e[1]=n,e},add:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},scaleAndAdd:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},sub:function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},len:function(e){return Math.sqrt(this.lenSquare(e))},lenSquare:function(e){return e[0]*e[0]+e[1]*e[1]},mul:function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},div:function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]},scale:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},normalize:function(e,n){var r=t.len(n);return r===0?(e[0]=0,e[1]=0):(e[0]=n[0]/r,e[1]=n[1]/r),e},distance:function(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))},distanceSquare:function(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])},negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e},lerp:function(e,t,n,r){return e[0]=t[0]+r*(n[0]-t[0]),e[1]=t[1]+r*(n[1]-t[1]),e},applyTransform:function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e},min:function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e},max:function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}};return t.length=t.len,t.lengthSquare=t.lenSquare,t.dist=t.distance,t.distSquare=t.distanceSquare,t}),define("ycharts/base/transform",["require","./matrix","./vector"],function(e){function s(e){return e>i||e<-i}var t=e("./matrix"),n=e("./vector"),r=t.identity,i=5e-5,o=function(e){e=e||this,e.position?this.position=e.position:this.position=[0,0],e.rotation?this.rotation=e.rotation:this.rotation=0,e.scale?this.scale=e.scale:this.scale=[1,1],this.origin=this.origin||null};o.prototype.transform=null,o.prototype.needLocalTransform=function(){return s(this.rotation)||s(this.position[0])||s(this.position[1])||s(this.scale[0]-1)||s(this.scale[1]-1)},o.prototype.updateTransform=function(){var e=this.parent,n=e&&e.transform,i=this.needLocalTransform(),s=this.transform;s=s||[];if(!i&&!n){r(s);return}s=s||t.create(),i?this.getLocalTransform(s):r(s),n&&(i?t.mul(s,e.transform,s):t.copy(s,e.transform)),this.transform=s,this.invTransform=this.invTransform||t.create(),t.invert(this.invTransform,s)},o.prototype.getLocalTransform=function(e){e=e||[],r(e);var n=this.origin,i=this.scale,s=this.rotation,o=this.position;return n&&(e[4]-=n[0],e[5]-=n[1]),i&&t.scale(e,e,i),s&&t.rotate(e,e,s),n&&(e[4]+=n[0],e[5]+=n[1]),e[4]+=o[0],e[5]+=o[1],e},o.prototype.setTransform=function(e){var t=this.transform;t&&e.transform(t[0],t[1],t[2],t[3],t[4],t[5])};var u=[];return o.prototype.decomposeTransform=function(){if(!this.transform)return;var e=this.parent,n=this.transform;e&&e.transform&&(t.mul(u,e.invTransform,n),n=u);var r=n[0]*n[0]+n[1]*n[1],i=n[2]*n[2]+n[3]*n[3],o=this.position,a=this.scale;s(r-1)&&(r=Math.sqrt(r)),s(i-1)&&(i=Math.sqrt(i)),n[0]<0&&(r=-r),n[3]<0&&(i=-i),o[0]=n[4],o[1]=n[5],a[0]=r,a[1]=i,this.rotation=Math.atan2(-n[1]/i,n[0]/r)},o.prototype.transformCoordToLocal=function(e,t){var r=[e,t],i=this.invTransform;return i&&n.applyTransform(r,r,i),r},o.prototype.transformCoordToGlobal=function(e,t){var r=[e,t],i=this.transform;return i&&n.applyTransform(r,r,i),r},o}),define("ycharts/base/element",["require","../tool/util","../tool/guid","../base/transform"],function(e){var t=e("../tool/util"),n=e("../tool/guid"),r=e("../base/transform"),i=function(e){this.id=null,this.parent=null,this.init(),r.call(this,e)};return i.prototype.zLevel=0,i.prototype.ignore=!1,i.prototype.type="element",i.prototype.getId=function(){return this.id},i.prototype.getType=function(){return this.type},i.prototype.init=function(){this.id=this.type+"--"+n()},t.ClassUtil.inherit(i,r,!0),i}),define("ycharts/shape/dep/styleProxy",["require","../../tool/util","./style"],function(e){var t=e("../../tool/util"),n=e("./style"),r=function(e){e=e||{},this.style=new n(e),this.brushType=null,this.init(e)};return r.prototype.init=function(e){this.brushType=e.brushType?e.brushType:e.strokeStyle?e.fillStyle?"both":"stroke":e.fillStyle?"fill":"none"},r.prototype.bindContext=function(e){var n=this.style;for(var r in n)e[r]=n[r];if(t.isObj(n.gradient)){var i=e.createLinearGradient(n.gradient.beginpt[0],n.gradient.beginpt[1],n.gradient.endpt[0],n.gradient.endpt[1]);i.addColorStop(0,n.gradient.beginColor),i.addColorStop(1,n.gradient.endColor),e.fillStyle=i}},r.prototype.getBrushType=function(e){return this.brushType},r.prototype.getStyle=function(){return this.style},r}),define("ycharts/shape/BaseShape",["require","../tool/util","../tool/debug","../tool/text","../base/element","./dep/styleProxy"],function(e){var t=e("../tool/util"),n=e("../tool/debug"),r=e("../tool/text"),i=e("../base/element"),s=e("./dep/styleProxy"),o=n.warn,u=function(e){this.ignore=e.ignore||!1,this.styleProxy=new s(e.style),this.config=t.merge({},e,!0),i.call(this,e)};return u.prototype.type="baseshape",u.prototype.DrawText=function(e,n){if(t.checkNull(n.text))return;var i=this.GetContainRect(),s=i[0][0],o=i[0][1],u=i[2][1]-i[0][1];o+=u/2,e.save();var a=this.styleProxy.getStyle();t.checkNull(a.textColor)||(e.fillStyle=a.textColor),this.updateTransform();var f=this.transform;e.setTransform(f[0],f[1],f[2],-f[3],f[4],f[5]),r.fillText(e,n.text,s,f[5]-o,a.font,a.textAlign,a.textBaseline),e.restore()},u.prototype.BeforeBrush=function(e,t){e.save(),this.updateTransform(),this.setTransform(e),this.styleProxy.bindContext(e)},u.prototype.AfterBrush=function(e,t){var n=this.styleProxy.getBrushType();switch(n){case"both":case"all":e.fill(),e.stroke();break;case"stroke":e.stroke();break;case"fill":e.fill();break;case"none":break;default:e.fill(),o("error brush type "+t.brushType)}e.restore()},u.prototype.BuildPath=function(e,t){o(" unsurported operation -- can't build shape path")},u.prototype.Brush=function(e){this.config.ignore||(this.BeforeBrush(e,this.config),this.config.style=this.styleProxy.getStyle(),this.BuildPath(e,this.config),this.DrawText(e,this.config),this.AfterBrush(e,this.config.style))},u.prototype.GetContainRect=function(){o(" unsurported operation -- can't GetContainRect")},t.ClassUtil.inherit(u,i,!0),u}),define("ycharts/shape/Bezier",["require","exports","module","./BaseShape","../tool/util","../tool/debug"],function(e,t,n){function a(e){r.call(this,e)}var r=e("./BaseShape"),i=e("../tool/util"),s=e("../tool/debug"),o=s.warn,u=s.debug;return a.prototype.type="BezierPath",a.prototype.BuildPath=function(e,t){var n=t.beginpt,r=t.endpt,i=t.compact||5,s=t.systole,u=function(e,t,n){return e<t||e>n},a=function(e){return Math.sqrt(e)},f=function(e){return Math.abs(e)},l=function(e){return Math.atan(e)},c=function(e){return Math.sin(e)},h=function(e){return Math.cos(e)},p=function(e){return Math.floor(e)},d=function(e){return e*180/Math.PI},v=function(){if(n[0]<r[0]&&n[1]>=r[1])return 1;if(n[0]>=r[0]&&n[1]>r[1])return 2;if(n[0]>r[0]&&n[1]<=r[1])return 3;if(n[0]<=r[0]&&n[1]<r[1])return 4}(),m=function(e,t){return n[0]<=r[0]?e+t:e-t},g=function(e,t){return n[1]<=r[1]?e+t:e-t},y=function(e,t,n){var r=function(t,r){return n===0?{x:e[0]+t,y:e[1]+r}:n==1?{x:e[0]-t,y:e[1]-r}:(o("通过距离获取控制点坐标出错"),null)};switch(v){case 1:return r(-t[0],-t[1]);case 2:return r(-t[0],t[1]);case 3:return r(t[0],t[1]);case 4:return r(t[0],-t[1])}};if(u(i,1,10)||u(s,0,4)){o("绘制曲线路径中输入的参数错误");return}var b=2*i,w=a(this.getDistance(n,r)/b),E=w/2*s,S=l(f(r[0]-n[0])/f(r[1]-n[1])),x=f(r[0]-n[0])/b,T=f(r[1]-n[1])/b,N=[],C=[],k=[];k.push({x:n[0],y:n[1]},{x:m(n[0],x),y:g(n[1],T)}),C.push({x:m(n[0],x/2),y:g(n[1],T/2)},{x:m(m(n[0],x/2),x),y:g(g(n[1],T/2),T)});var L={x:h(S)*E,y:c(S)*E};N.push(y(C[0],L,0),y(C[1],L,1));var A;for(A=2;A<b;A++)C.push({x:m(C[A-1][0],x),y:g(C[A-1][1],T)}),k.push({x:m(k[A-1][0],x),y:g(k[A-1][1],T)}),N.push(y(C[A],L,A%2));k.push({x:m(k[A-1][0],x),y:g(k[A-1][1],T)}),e.beginPath(),e.moveTo(n[0],n[1]);for(A=1;A<N.length;A++)e.quadraticCurveTo(N[A-1][0],N[A-1][1],k[A][0],k[A][1]);e.quadraticCurveTo(N[A-1][0],N[A-1][1],k[A][0],k[A][1]),t.style.brushType="stroke"},i.ClassUtil.inherit(a,r),a}),define("ycharts/shape/Circle",["require","exports","module","./BaseShape","../tool/util"],function(e,t,n){function i(e){r.call(this,e)}var r=e("./BaseShape");return i.prototype.type="circle",i.prototype.BuildPath=function(e,t){e.beginPath(),e.arc(t.x,t.y,t.r,Math.PI*2,t.startangel||0,t.endangel||Math.PI*2),t.style.brushType=t.style.brushType||"stroke"},i.prototype.GetContainRect=function(){},e("../tool/util").ClassUtil.inherit(i,r),i}),define("ycharts/shape/Line",["require","exports","module","./BaseShape","../tool/util"],function(e,t,n){function i(e){r.call(this,e)}var r=e("./BaseShape");return i.prototype.type="line",i.prototype.BuildPath=function(e,t){e.beginPath();if(t.splitnum){var n=t.splitnum||1,r=(t.endpt[0]-t.beginpt[0])/n/2,i=(t.endpt[1]-t.beginpt[1])/n/2;for(var s=0;s<n;s++)e.moveTo(t.beginpt[0]+s*2*r,t.beginpt[1]+s*2*i),e.lineTo(t.beginpt[0]+s*2*r+r,t.beginpt[1]+s*2*i+i)}else e.moveTo(t.beginpt[0],t.beginpt[1]),e.lineTo(t.endpt[0],t.endpt[1])},e("../tool/util").ClassUtil.inherit(i,r),i}),define("ycharts/shape/Rect",["require","exports","module","./BaseShape","../tool/util"],function(e,t,n){function i(e){r.call(this,e)}var r=e("./BaseShape");return i.prototype.type="Rect",i.prototype.BuildPath=function(e,t){e.beginPath(),e.moveTo(t.allpt[0][0],t.allpt[0][1]);for(var n=1;n<t.allpt.length;n++)e.lineTo(t.allpt[n][0],t.allpt[n][1]);t.notClose||e.closePath()},i.prototype.GetContainRect=function(){var e=99999,t=99999,n=-99999,r=-99999,i=0,s;for(i=0;i<this.config.allpt.length;i++)s=this.config.allpt[i],s[0]<e&&(e=s[0]),s[1]<t&&(t=s[1]),s[0]>n&&(n=s[0]),s[1]>r&&(r=s[1]);return[[e,t],[e,r],[n,r],[n,t]]},e("../tool/util").ClassUtil.inherit(i,r),i}),define("ycharts/shape/Triangle",["require","exports","module","./BaseShape","../tool/util"],function(e,t,n){function i(e){r.call(this,e)}var r=e("./BaseShape");return i.prototype.type="triangle",i.prototype.BuildPath=function(e,t){e.beginPath(),e.moveTo(t.beginpt[0],t.beginpt[1]),e.lineTo(t.beginpt[0]+t.width,t.beginpt[1]);var n=[t.beginpt[0]+t.width/2,t.beginpt[1]+t.height];t.direction=="bottom"&&(n[1]=t.beginpt[1]-t.height),e.lineTo(n[0],n[1]),e.lineTo(t.beginpt[0],t.beginpt[1]),t.style.brushType=t.style.brushType||"stroke"},e("../tool/util").ClassUtil.inherit(i,r),i}),define("ycharts/shape/YText",["require","exports","module","./BaseShape","../tool/util","../tool/text","../tool/util"],function(e,t,n){function o(e){r.call(this,e)}var r=e("./BaseShape"),i=e("../tool/util"),s=e("../tool/text");return o.prototype.type="Text",o.prototype.BuildPath=function(e,t){t.style.brushType="none"},o.prototype.DrawText=function(e,t){if(i.checkNull(t.text))return;var n=t.beginpt;e.save(),i.checkNull(t.style.textColor)||(e.fillStyle=t.style.textColor),this.updateTransform();var r=this.transform;e.setTransform(r[0],r[1],r[2],-r[3],r[4],r[5]),s.fillText(e,t.text,n[0],-n[1],t.style.font,t.style.textAlign,t.style.textBaseline),e.restore()},e("../tool/util").ClassUtil.inherit(o,r),o}),define("ycharts/extend/dam/dam_md",["require","../../tool/util"],function(e){var t=e("../../tool/util"),n={name:"",DMTP:{DMTPA:"土石坝",DMTPB:"心墙坝",DMTPC:"沥青混凝土心墙"},MAXDMHG:0,DMTPWD:0,DMTPLN:0,DMTPEL:0,UPDMSL:{UPDMSL1:0,UPDMSL2:0},DWDMSL:{DWDMSL1:0,DWDMSL2:0},CDREWALL:{MT:"沥青混凝土",WIDTH:0,UPSL:{UPSL1:0,UPSL2:0},DWSL:{DWSL1:0,DWSL2:0}},HYCH:{DDWL:0,NRPLLV:0,FLSSCNWL:0,DSFLLV:0,CHFLLV:0,Z:0}},r=t.merge({DMTP:"土石坝",UPDMSL:0,DWDMSL:0,CDREWALL:null,HYCH:null},n,!1);return{basedammd:n,tsb:r}}),define("ycharts/Group",["require","./tool/util","./base/element"],function(e){var t=e("./tool/util"),n=e("./base/element"),r=function(e){this.children=[],t.merge(this,e,!1),n.call(this,e)};return r.prototype.type="group",r.prototype.addChild=function(e){if(e==this)return;return e.parent=this,this.children.push(e),this},t.ClassUtil.inherit(r,n),r}),define("ycharts/extend/dam/dam",["require","../../tool/util","../../tool/text","./dam_md","../../Group","../../shape/Rect","../../shape/Line","../../shape/YText","../../tool/debug","../../shape/Triangle"],function(e){var t=e("../../tool/util"),n=e("../../tool/text"),r=e("./dam_md"),i=e("../../Group"),s=e("../../shape/Rect"),o=e("../../shape/Line"),u=e("../../shape/YText"),a=e("../../tool/debug"),f=a.warn,l=a.debug,c=function(e){this.dam={};switch(e.type){case"土石坝":this.dam=t.merge(e,r.tsb,!1);break;default:f("不支持的大坝类型");return}this.damContainer=new i,this.beginpt=null};return c.prototype={constructor:c,setBeginPt:function(e){t.isArr(e)&&e.length==2&&(this.beginpt=e)},getData:function(e){this.damContainer.scale=[1,1];if(t.checkNull(this.beginpt)||this.beginpt.length!=2)this.beginpt=[2],this.beginpt[0]=0,this.beginpt[1]=0;this.drawWaterLevel([this.beginpt[0]-90,this.beginpt[1]],160);var n=[];n.push(this.beginpt);var r;if(t.isObj(this.dam.UPDMSL)){f("上游坝坡面多折线未实现");return}r=[],r[0]=this.beginpt[0]+this.dam.UPDMSL*this.dam.MAXDMHG,r[1]=this.beginpt[1]+this.dam.MAXDMHG,n.push(r),r=[],r[0]=this.beginpt[0]+this.dam.UPDMSL*this.dam.MAXDMHG+this.dam.DMTPWD,r[1]=this.beginpt[1]+this.dam.MAXDMHG,n.push(r);if(t.isObj(this.dam.DWDMSL)){f("下游坝坡面多折线未实现");return}r=[],r[0]=this.beginpt[0]+this.dam.UPDMSL*this.dam.MAXDMHG+this.dam.DMTPWD+this.dam.DWDMSL*this.dam.MAXDMHG,r[1]=this.beginpt[1],n.push(r),this.damContainer.addChild(new s({allpt:n,style:{lineColor:"red",textColor:"black",fillColor:"#DDBB88",brushType:"fill"},text:this.dam.name}));if(t.isObj(this.dam.CDREWALL)){var i=[],o=(this.dam.DMTPWD-this.dam.CDREWALL.WTDTH)/2,u=[];u[0]=n[1][0]+o,u[1]=n[0][1];if(!t.checkNull(this.dam.CDREWALL.UPSL)){if(t.isObj(this.dam.CDREWALL.UPSL)){f("心墙上游坡面多折线尚未实现");return}u[0]=n[1][0]+o-this.dam.MAXDMHG*this.dam.CDREWALL.UPSL}i.push(u),u=[],u[0]=n[1][0]+o,u[1]=this.beginpt[1]+this.dam.MAXDMHG,i.push(u),u=[],u[0]=n[1][0]+o+this.dam.CDREWALL.WTDTH,u[1]=this.beginpt[1]+this.dam.MAXDMHG,i.push(u),u=[],u[0]=n[1][0]+o+this.dam.CDREWALL.WTDTH,u[1]=n[0][1];if(!t.checkNull(this.dam.CDREWALL.DWSL)){if(t.isObj(this.dam.CDREWALL.DWSL)){f("心墙下游坡面多折线尚未实现");return}u[0]=n[1][0]+o+this.dam.CDREWALL.WTDTH+this.dam.MAXDMHG*this.dam.CDREWALL.DWSL}i.push(u),this.damContainer.addChild(new s({allpt:i,style:{fillStyle:"#8B7E6C",textColor:"red",brushType:"fill"}}))}return this.damContainer},drawWaterLevel:function(e,r){if(!t.checkNull(this.dam.HYCH)){var i=[],a=this.dam.HYCH;if(t.checkNull(e)||e.length!=2)e=[2],e[0]=0,e[1]=0;var f=t.checkNull(this.dam.DMTPEL)?0:this.dam.DMTPEL-this.dam.MAXDMHG,l=[],c=a.Z-f;l.push(e),l.push([e[0],e[1]+c]),l.push([e[0]+r,e[1]+c]),l.push([e[0]+r,e[1]]),this.damContainer.addChild(new s({allpt:l,style:{fillColor:"#1C6BA0",brushType:"fill",gradient:{beginpt:[e[0]+r/2,e[1]+c],endpt:[e[0]+r/2,e[1]],beginColor:"#83ADF5",endColor:"#1C6BA0"}}}));var h=this.rulersplitnm,p=this.rulerwh,d=this.dam.MAXDMHG/h,v=[];v.push(e),v.push([e[0],[e[1]+this.dam.MAXDMHG]]),v.push([e[0]+p,[e[1]+this.dam.MAXDMHG]]),v.push([e[0]+p,e[1]]),this.damContainer.addChild(new s({allpt:v,style:{fillColor:"#4B86AD",brushType:"fill"}}));var m,g;for(var y=0;y<h;y++)m=e[1]+d*y,g=f+d*(y+1),this.damContainer.addChild(new o({beginpt:[e[0],m],endpt:[e[0]+p,m],style:{lineColor:"white",brushType:"stroke"}})),this.damContainer.addChild(new u({beginpt:[e[0]-25,m+5],text:g,style:{textColor:"black"}}));var b="正常蓄水位"+a.NRPLLV,w=n.getTextRect(b,0,0);this.damContainer.addChild(this.buildWaterLevelLine({beginpt:[e[0]+this.rulerwh+2,e[1]+a.NRPLLV-f],endpt:[e[0]+this.rulerwh+120,e[1]+a.NRPLLV-f],text:b,leftMargin:10})),a.NRPLLV-a.DDWL<w.height&&console.log("死水位和正常蓄水位之间间距过小"),this.damContainer.addChild(this.buildWaterLevelLine({beginpt:[e[0]+this.rulerwh+2,e[1]+a.DDWL-f],endpt:[e[0]+this.rulerwh+120,e[1]+a.DDWL-f],text:"死水位"+a.DDWL,leftMargin:25}))}},triangleWidth:13,triangleHeight:8,scalelinewh:5,scalelinepd:2,scalelinetp:3,rulerwh:9,rulersplitnm:10,buildWaterLevelLine:function(t){var n=e("../../shape/Triangle"),r=new i,s=this;r.addChild(new o({beginpt:t.beginpt,endpt:t.endpt,splitnum:20,style:{lineColor:"#003d8f"}})),t.leftMargin=t.leftMargin||0,r.addChild(new n({beginpt:[t.beginpt[0]+t.leftMargin,t.beginpt[1]+s.triangleHeight],width:s.triangleWidth,height:s.triangleHeight,direction:"bottom",style:{lineColor:"black"}})),r.addChild(new u({beginpt:[t.beginpt[0]+t.leftMargin+s.triangleWidth+3,t.beginpt[1]],text:t.text,style:{textColor:"black",textBaseline:"bottom"}}));for(var a=0;a<3;a++)r.addChild(new o({beginpt:[t.beginpt[0]+t.leftMargin+a*s.scalelinepd,t.beginpt[1]-s.scalelinetp*(a+1)],endpt:[t.beginpt[0]+t.leftMargin+a*s.scalelinepd+(3-a)*s.scalelinewh,t.beginpt[1]-s.scalelinetp*(a+1)],style:{lineColor:"black"}}));return r}},c}),define("ycharts/main",["Ycharts","./shape/Bezier","./shape/Circle","./shape/Line","./shape/Rect","./shape/Triangle","./shape/YText","./extend/dam/dam","./Group"],function(e,t,n,r,i,s,o,u,a){function f(){}return f.prototype={constructure:f},f.ycharts=e,f.Group=a,f.shape={Bezier:t,Circle:n,Line:r,Rect:i,Triangle:s,YText:o,Dam:u},f}),define("ycharts",["ycharts/main"],function(e){return e});