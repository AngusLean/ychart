{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 06cedacc0b6b31101132","webpack:///./src/index.js","webpack:///./src/Ycharts.js","webpack:///./src/Storage.js","webpack:///./src/tool/util.js","webpack:///./src/Group.js","webpack:///./src/tool/klass.js","webpack:///./src/core/graphic/mixin/transform.js","webpack:///./src/core/graphic/mixin/helper/matrix.js","webpack:///./src/core/graphic/mixin/helper/vector.js","webpack:///./src/core/graphic/mixin/moveable.js","webpack:///./src/core/graphic/element.js","webpack:///./src/tool/guid.js","webpack:///./src/Painter.js","webpack:///./src/Layer.js","webpack:///./src/tool/dom.js","webpack:///./src/Reactor.js","webpack:///./src/tool/event.js","webpack:///./src/core/graphic/mixin/draggable.js","webpack:///./src/core/graphic/mixin/eventful.js","webpack:///./src/core/config/config.js","webpack:///./src/core/graphic/htmlView.js","webpack:///./src/core/graphic/view.js","webpack:///./src/tool/lang.js","webpack:///./src/shape/Bezier.js","webpack:///./src/tool/debug.js","webpack:///./src/core/viewBuilder.js","webpack:///./src/core/graphic/contextView.js","webpack:///./src/core/config/OptionProxy.js","webpack:///./src/core/config/StyleProxy.js","webpack:///./src/core/config/style.js","webpack:///./src/core/graphic/helper/text.js","webpack:///./src/core/graphic/helper/viewutil.js","webpack:///./src/shape/Circle.js","webpack:///./src/shape/Line.js","webpack:///./src/shape/Rect.js","webpack:///./src/shape/Triangle.js","webpack:///./src/shape/YText.js","webpack:///./src/shape/Image.js","webpack:///./src/animation/animation.js"],"names":["shape","Bezier","Circle","Line","Rect","Triangle","YText","Image","Group","version","Animation","textutil","extendView","config","isDebug","open","customView","baseContextViewExtend","YCharts","eleid","domid","__storage","__painter","__handler","prototype","clear","clean","depose","cleanPainter","add","el","addEle","BrushAll","refresh","update","resize","wh","ht","getWidth","getHeight","instances","ychart","init","id","document","getElementById","innerHTML","_charts","Storage","yh","_yh","_roots","element","index","i","length","getId","setDefaultConfig","height","push","getDisplayableShapeList","list","_getList","root","children","ignore","isType","forEach","checkNull","mergeItem","merge","replaceattr","isArr","type","ele","Object","toString","call","ctx","cb","item","it","hasOwnProperty","which","target","source","key","overwrite","targetProp","map","tg","obj","isFunc","isObj","options","child","parent","inherit","clazz","baseClazz","clazzPrototype","F","prop","constructor","mixin","overlay","_over","mIdentity","identity","EPSILON","isNotAroundZero","val","Transformable","opts","position","rotation","scale","origin","transform","needLocalTransform","updateTransform","parentHasTransform","m","create","getLocalTransform","mul","copy","invTransform","invert","rotate","setTransform","tmpTransform","decomposeTransform","sx","sy","Math","sqrt","atan2","transformCoordToLocal","x","y","v2","applyTransform","transformCoordToGlobal","ArrayCtor","Float32Array","Array","matrix","out","m1","m2","out0","out1","out2","out3","out4","out5","translate","a","v","rad","aa","ac","atx","ab","ad","aty","st","sin","ct","cos","vx","vy","det","vector","clone","set","b","v1","scaleAndAdd","sub","len","lenSquare","div","dot","s","normalize","d","distance","distanceSquare","negate","lerp","t","min","max","lengthSquare","dist","distSquare","Moveable","drift","dx","dy","__dirty","move","angle","zoom","Element","beginid","guid","Painter","storage","__yh","origindom","temp","width","left","top","container","appendChild","__layer","shapeList","updateLayerState","layer","zlevel","lastZlevel","zLevel","getLayer","preProcessShapeInLayer","Brush","getContext","afterProcessShapeInLayer","_preProcessShapeInLayer","_shape","_groupPreProcess","gp","ly","groupquene","_buildGroupQuene","_group","unshift","before","insertLayer","la","dom","getElementsByTagName","parseInt","getAttribute","parentNode","insertBefore","Layer","setAttribute","layerW","layerH","alert","clearRect","parseInt10","getPosition","defaultView","getComputedStyle","rect","getBoundingClientRect","scrollTop","documentElement","body","scrollLeft","clientWidth","style","paddingLeft","paddingRight","clientHeight","paddingTop","paddingBottom","CACHE","getRectByCtx","context","canvas","doc","createDOM","desc","pos","attr","newdom","createElement","isNaN","drawing","ALL_EVENT_NAMES","SPECIAL_EVENT_HANDLERS","_lastHovered","htmlView","mousemove","exEvent","ev","targetEle","triggerProxy","tip","clientX","tipoffsetX","clientY","tipoffsetY","info","show","hide","mouseout","COMMON_EVENT_HANDLER","name","handlers","painter","_handlers","_dragmanager","initHandlers","eventHandler","eventName","undefined","extendAndFixEventPackge","event","trigger","addHandler","clientToLocal","getHoverElement","shapes","sp","contain","ycX","ycY","removeHandler","ClientToLocal","e","box","handler","addEventListener","removeEventListener","getEvent","window","getTarget","srcElement","preventDefault","returnValue","stopPropagation","cancelBubble","stop","Draggable","on","_dragStart","_dragIng","_dragEnd","_dragDelay","_lastClickTime","Date","_x","offsetX","_y","offsetY","_dragingTarget","crt","draggable","cursor","cursor_moveable","cursor_getable","cursor_default","RebrushAll","dragging","Eventful","h","_h","_one","_ctx","once","indexOf","remove","hs","splice","arrySlice","slice","handles","args","arguments","argLen","array","apply","DEFAULT_CONFIG","useRectangularCoordinateSystem","DomContent","_root","_content","border","backgroundColor","padding","title","footer","visibility","html","HtmlView","option","_domcontent","content","View","Error","throwFunc","str","noOp","bind1Arg","arg1","onreadyCallback","callback","loadMethod","notCompleteCb","completeCb","timer","setInterval","clearInterval","onImgReady","isImageLoaded","imgElement","complete","naturalHeight","warn","insiderange","rg1","rg2","abs","atan","floor","radian2angle","radian","PI","BuildPath","beginpt","endpt","compact","systole","linequadrant","nextx","dis","nexty","nexpt_ct","pt","dispt","leftorright","getrs","disx","disy","piece","dispiece","getDistance","linevert_angleor","linectx_dis","linecty_dis","allctpt","allctinlinept","alllinectpt","moveTo","quadraticCurveTo","brushType","dbpre","wnpre","dbprespace","rs","debug","console","log","isobj","printobj","_printObj","REQUIRED_CHILD","defaults","BaseContextView","baseOption","_setDefaultTrasformToCartesian","ContextView","configProxy","defaultConfig","save","_SetShapeTransform","bindContext","BeforeBrush","beginPath","tp","getBrushType","fill","stroke","restore","AfterBrush","_BeforeBrush","_AfterBrush","DrawText","local","getable","GetContainRect","_isPtInPath","text","crect","getStyle","textw","getTextWidth","font","texth","getTextHeight","textAlign","textBaseline","textpos","textColor","fillStyle","globalTextPos","fillText","coordinate","getConfig","OptionProxy","styleProxy","_this","defineProperty","enumerable","configurable","get","configs","defaultStyle","styleMapper","styleMap","StyleProxy","strokeStyle","gradient","_gradient","createLinearGradient","addColorStop","beginColor","endColor","_style","fillColor","color","lineColor","lineWidth","lineCap","lineJoin","shadowColor","shadowOffsetX","shadowOffsetY","shadowBlur","shadowx","shadowy","globalAlpha","alpha","globalCompositionOperation","overlaystyle","defaultFont","defaultAlign","defaultBaseline","TextUtil","TEXT_CACHE_MAX","_textHeightCache","_textHeightCacheCounter","textFont","split","measureText","_textWidthCache","_textWidthCacheCounter","l","getTextRect","lineHeight","_fillText","CanvasRenderingContext2D","isPointInStroke","path","isPointInPath","createCanvas","isPtInRect","isPtInPath","Init","arc","r","startangel","endangel","dirty","splitnum","splitlen_x","x1","x0","splitlen_y","y1","y0","lineTo","minx","miny","maxx","maxy","pts","notClose","closePath","tmp","direction","textparams","containRect","textrect","image","__setOrigin","onload","src","dWidth","dHeight","buildImagePath1","numberOrZero","sWidth","sHeight","drawImage","fields","field","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","setTimeout","Nop","animate","onBegin","onChanging","onEnd","beginDelay","frame","beginResult"],"mappings":"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","file":"ychart.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ychart\"] = factory();\n\telse\n\t\troot[\"ychart\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 06cedacc0b6b31101132","/**\n * 库的入口接口。 提供所有外部接口\n * @module ychart/index\n */\nimport ychart from \"./Ycharts\";\nimport Bezier from \"./shape/Bezier\";\nimport Circle from \"./shape/Circle\";\nimport Line from \"./shape/Line\";\nimport Rect from \"./shape/Rect\";\nimport Triangle from \"./shape/Triangle\";\nimport YText from \"./shape/YText\";\nimport Image from \"./shape/Image\";\nimport Group from \"./Group\";\nimport Animation from \"./animation/animation\";\nimport ShapeBuilder from \"./core/viewBuilder\";\nimport debugs from \"./tool/debug\";\nimport textUtil from \"./core/graphic/helper/text\";\n\nychart.shape = {Bezier ,Circle ,Line ,Rect ,Triangle ,YText,Image};\n\nychart.Group = Group;\n\nychart.version = 1.0;\n\nychart.Animation = Animation;\n\nychart.textutil = textUtil;\n\nychart.extendView = function (config) {\n    //自定义视图时一定要校验是否传入全部必须的参数\n    var isDebug = debugs.open;\n    debugs.open = true;\n    var customView = ShapeBuilder.baseContextViewExtend(config);\n    debugs.open = isDebug;\n    return customView;\n};\n\n/**\n * @todo  Group在变换时如何清楚已绘制的图形？\n * layer变换时如何清楚已绘制的图形？\n * 三者与元素的绘制能否统一？\n * painter,layer代码能够优化下，变量命令不规范？\n */\n\nexport default ychart;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","/**\n * 绘图核心控制模块\n * @module ychart/Ychart\n */\nimport Storage from \"./Storage\";\nimport Painter from \"./Painter\";\nimport Handler from \"./Reactor\";\n\n\n/**\n * @classdesc ychart绘图实例的类。在页面上调用YH.init后返回的就是该类的一个实例\n * @class YCharts\n * @param eleid {string}  放置canvas的容器。 不能是canvas元素， 必须设置宽度和高度\n * @constructor\n */\nvar YCharts = function (eleid ) {\n    //当前实例绑定的页面元素ID\n    this.domid = eleid;\n\n    //存储所有绘图相关组件。\n    this.__storage = new Storage(this);\n\n    //绘图具体操作类。 与storage交互\n    this.__painter = new Painter(this, this.__storage);\n\n    //事件相关操作\n    this.__handler = new Handler(this.domid, this.__painter, this.__storage);\n};\n\n\n/**\n * 清除ychart实例所管理的所有内容。 调用该方法后所有保存的数据以及绘图情况都将被清除\n */\nYCharts.prototype.clear = function () {\n    this.__painter.clean();\n    this.__storage.clean();\n    this.__handler.depose();\n};\n\n/**\n * 清除当前的canvas内容，但是将保留其他的配置数据等等。\n * 常用于ychart实例在缩放时需要清除页面上已绘制的数据\n * 的情况下\n */\nYCharts.prototype.cleanPainter = function(){\n    this.__painter.cleanPainter();\n\n};\n\n/**\n * 添加子元素。 子元素可以是任意的shpae或者Group或者自定义的类型\n */\nYCharts.prototype.add = function (el) {\n    this.__storage.addEle(el);\n    return this;\n};\n\n/**\n * 刷新当前实例，调用该方法会导致所有变换被计算并且实际应用到canvas的\n * 上下文中，并且所有可见可绘制的图形都将被绘制\n */\nYCharts.prototype.BrushAll = function () {\n    this.__painter.refresh();\n    return this;\n};\n\n/**\n * 更新当前实例，同\n *@see {@link BrushAll}\n */\nYCharts.prototype.update = function () {\n    this.BrushAll();\n};\n\nYCharts.prototype.resize = function(wh ,ht){\n    this.__painter.resize(wh ,ht);\n};\n\n/**\n * 获取当前ychart容器的宽度\n */\nYCharts.prototype.getWidth = function(){\n    return this.__painter.getWidth();\n};\n\n/**\n * 获取当前canvas容器的高度\n */\nYCharts.prototype.getHeight = function(){\n    return this.__painter.getHeight();\n};\n\n\nvar instances = {};\n\n/**\n * ychart全局入口对象。\n * @global\n * @class\n */\nvar ychart = {\n    /**\n     * ycharts外部访问接口。 用于统一管理所有用到的ycharts实例\n     * @param id  容器ID\n     * @param config 相关配置\n     * @returns {YCharts}\n     */\n    init: function(id, config) {\n        document.getElementById(id).innerHTML = \"\";\n        var _charts = new YCharts(id, config);\n        instances[id] = _charts;\n        return _charts;\n    },\n    /**\n     * 销毁指定的ychart实例\n     * @param {number} id ychart实例ID\n     */\n    depose: function(id) {\n        if (instances[id]) {\n            instances[id].clean();\n            instances[id] = null;\n        }\n    }\n};\n\n\nexport default ychart;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Ycharts.js","/**\n * 绘图中绘制存储器模块。 负责处理不同绘图层、统一绘图层不同显示级别的关系\n * @module ychart/storage\n *\n */\nimport {isArr} from \"./tool/util\";\nimport Group from \"./Group\";\n\n\n/**\n *\n * 存储器\n * @class\n * @classdesc 存储器类。 负责存储整个ychart实例中所有信息。\n * @param yh {module:ychart/Ychart} ychart实例\n * @constructor\n */\nvar Storage = function (yh) {\n\n    //ycharts实例\n    this._yh = yh;\n\n    //保存所有的形状组件\n    this._roots = [];\n};\n\n/**\n * 添加一个子元素\n * @param element {module:ychart/core/graphic/element} 元素实例\n */\nStorage.prototype.addEle = function (element) {\n    if (!element || element.id === null) {\n        return;\n    }\n    var index, i;\n    for (index = 0; index < this._roots.length; index++) {\n        i = this._roots[index];\n        if (i.id == element.getId()) {\n            return;\n        }\n    }\n    element.setDefaultConfig({\n        yh:  this._yh,\n        height: this._yh.getHeight()\n    });\n\n    //group当成一个元素便于管理\n    this._roots.push(element);\n};\n\n/**\n * 获取所有可绘制的图形列表。 组的所有子元素被提取出来。\n * @returns {Array.<module:ychart/core/graphic/element>}\n */\nStorage.prototype.getDisplayableShapeList = function () {\n    var list = [];\n    var _getList = function (root) {\n        if (isArr(root)) {\n            for (var i = 0; i < root.length; i++) {\n                if (root[i] instanceof Group) {\n                    _getList(root[i].children);\n                } else if (root[i].ignore === false) {\n                    list.push(root[i]);\n                }\n            }\n        } else if (root instanceof Group) {\n            _getList(root.children);\n        }\n    };\n\n    _getList(this._roots);\n\n    return list;\n};\n\n\n\n/**\n * 清楚存储器\n */\nStorage.prototype.clean = function () {\n    this._roots = [];\n};\n\n\nexport default Storage;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Storage.js","/**\n *@module ychart/tool/util\n */\n\n/**\n * 确定属性是否只存在于原型中\n * @function\n * @param object\n * @param name\n * @returns {boolean}\n */\n/* var hasPrototypeProperty = function(object, name) {\n    return !object.hasOwnProperty(name) && (name in object);\n};\n\nfunction parseInt10(val) {\n    return parseInt(val, 10);\n}\n */\nexport function isType(type) {\n    return function(ele) {\n        return !checkNull(ele) && Object.prototype.toString.call(ele) == \"[object \" + type + \"]\";\n    };\n}\n\nexport function forEach(ele, ctx, cb) {\n    if (isType(\"Array\")(ele)) {\n        ele.forEach((function(item, index) {\n            cb.call(ctx, item, index);\n        }));\n    } else if (isType(\"Object\")(ele)) {\n        var it, index = 0;\n        for (it in ele) {\n            if (ele.hasOwnProperty(it)) {\n                cb.call(ctx, it, index++);\n            }\n        }\n    }\n}\n\n/**\n * 检查一个对象是否为空\n * @function\n * @param which\n * @returns {boolean}\n */\nexport function checkNull(which) {\n    return !which || typeof which == \"undefined\" || which == \"null\";\n}\n\n/**\n * 按照指定key合并两个对象\n * @param target\n * @param source\n * @param key\n * @param overwrite\n */\nexport function mergeItem(target, source, key, overwrite) {\n    if (source.hasOwnProperty(key) && !(source[key] == null)) {\n        var targetProp = target[key];\n        if (typeof targetProp == \"object\") {\n            // 如果需要递归覆盖，就递归调用merge\n            merge(\n                target[key],\n                source[key],\n                overwrite\n            );\n        } else if (overwrite || !(key in target)) {\n            // 否则只处理overwrite为true，或者在目标对象中没有此属性的情况\n            target[key] = source[key];\n        }\n    }\n}\n\n\n/**\n * 合并源对象的属性到目标对象.\n * 该方法会直接更改目标对象\n * @function\n * @param {*} target 目标对象\n * @param {*} source 源对象\n * @param {boolean} overwrite 是否覆盖\n * @param {object} map 源对象到目标对象的属性名映射.\n *      映射名是target的属性名需要映射到souece的属性名\n */\nexport function merge(target, source, overwrite, map) {\n    if (checkNull(target)) {\n        target = {};\n    }\n    if (isArr(source)) {\n        source.forEach(item =>\n            merge(target, item, overwrite, map)\n        );\n    } else {\n        map && replaceattr(source, map);\n\n        for (var i in source) {\n            mergeItem(target, source, i, overwrite);\n        }\n    }\n    return target;\n}\n\n/**\n * 用指定的map属性名映射替代目标对象的属性名. 仅仅改变属性的名称\n * 该方法会直接更改目标对象\n * @function\n * @param {object} target    要被替换的对象\n * @param {object} map   对象属性名的映射\n */\nexport function replaceattr(target, map) {\n    if (map && target) {\n        for (var tg in target) {\n            if (map.hasOwnProperty(tg) && (map[tg] != tg)) {\n                // 将target中的属性名替换为对应的映射后的名字\n                target[map[tg]] = target[tg];\n                target[tg] = null;\n            }\n        }\n    }\n    return target;\n}\n\n\nexport function isArr(obj) {\n    return isType(\"Array\")(obj);\n}\n\nexport var isFunc = isType(\"Function\"),\n    isObj = isType(\"Object\");\n\n\n\n// WEBPACK FOOTER //\n// ./src/tool/util.js","/**\n * 元素容器类\n * @module ychart/Group\n */\nimport {merge} from \"./tool/util\";\nimport {mixin} from \"./tool/klass\";\nimport Transform from \"./core/graphic/mixin/transform\";\nimport Moveable from \"./core/graphic/mixin/moveable.js\";\nimport Element from \"./core/graphic/element\";\n\n/**\n * @class\n * @classdesc 元素容器类。 该类可以包含任何继承于 {@link ./core/graphic/view} 的类\n */\nclass Group extends Element{\n\n    /**\n     * @constructor\n     * @param {Object} options  组的配置\n     */\n    constructor(options){\n        super(\"group\");\n\n        this.children = [];\n\n        merge(this, options, false, null);\n\n        Transform.call(this);\n    }\n\n    /**\n     * 添加一个子元素\n     * @param {Element} child 子元素对象， 可以是shape中的任何元素或者自定义的元素\n     * @returns {Group}\n     */\n    add(child) {\n        if (child == this)\n            return;\n        this.children.forEach(ele => {\n            if(child.id === ele.id){\n                return this;\n            }\n        });\n        //子形状或者group的父类。 继承变换以及样式\n        child.parent = this;\n\n        this.children.push(child);\n        return this;\n    }\n\n    setDefaultConfig(config){\n\n    }\n}\n\nmixin(Group ,Transform , true);\nmixin(Group ,Moveable, true);\n\n\nexport default Group;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Group.js","export var inherit = function (clazz, baseClazz) {\n    var clazzPrototype = clazz.prototype;\n\n    function F() {\n    }\n\n    F.prototype = baseClazz.prototype;\n    clazz.prototype = new F();\n\n    for (var prop in clazzPrototype) {\n        clazz.prototype[prop] = clazzPrototype[prop];\n    }\n    clazz.constructor = clazz;\n};\n\n//组合两个类。 仅组合原型的属性\n\nexport var mixin = function (target, source, overlay) {\n    source = \"prototype\" in source ? source.prototype : source;\n    target = \"prototype\" in target ? target.prototype : target;\n    _over(target, source, overlay);\n    function _over(target, source, overlay) {\n        for (var ele in source) {\n            if (ele != \"constructor\" && source.hasOwnProperty(ele) &&\n                (overlay ? (source[ele] !== null) : (target[ele] === null))) {\n                target[ele] = source[ele];\n            }\n        }\n        return target;\n    }\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/tool/klass.js","/**\n * 元素的事件分发、变换模块.\n * 所有事件都由handler.js分发下来。 自定义的事件也是在里面定义\n * @module ychart/core/graphic/mixin\n */\n\nimport matrix from './helper/matrix'\nimport vector from './helper/vector'\nvar mIdentity = matrix.identity;\n\nvar EPSILON = 5e-5;\n\nfunction isNotAroundZero(val) {\n    return val > EPSILON || val < -EPSILON;\n}\n\n/**\n * 元素变换相关功能实现。 混入类\n * @class\n * @mixin\n */\nvar Transformable = function (opts) {\n    opts = opts || this;\n    // If there are no given position, rotation, scale\n    if (!opts.position) {\n        /**\n         * 平移\n         * @type {Array.<number>}\n         * @default [0, 0]\n         */\n        this.position = [0, 0];\n    } else {\n        this.position = opts.position;\n    }\n    if (!opts.rotation) {\n        /**\n         * 旋转\n         * @type {Array.<number>}\n         * @default 0\n         */\n        this.rotation = 0;\n    } else {\n        this.rotation = opts.rotation;\n    }\n    if (!opts.scale) {\n        /**\n         * 缩放\n         * @type {Array.<number>}\n         * @default [1, 1]\n         */\n        this.scale = [1, 1];\n    } else {\n        this.scale = opts.scale;\n    }\n    /**\n     * 旋转和缩放的原点\n     * @type {Array.<number>}\n     * @default null\n     */\n    this.origin = this.origin || null;\n\n};\n\n\n/**\n * 默认的变换矩阵\n */\nTransformable.prototype.transform = null;\n\n/**\n * 判断是否需要有坐标变换\n * 如果有坐标变换, 则从position, rotation, scale以及父节点的transform计算出自身的transform矩阵\n */\nTransformable.prototype.needLocalTransform = function () {\n    return isNotAroundZero(this.rotation) || isNotAroundZero(this.position[0]) ||\n        isNotAroundZero(this.position[1]) || isNotAroundZero(this.scale[0] - 1) ||\n        isNotAroundZero(this.scale[1] - 1);\n};\n\nTransformable.prototype.updateTransform = function () {\n    var parent = this.parent;\n    var parentHasTransform = parent && parent.transform;\n    var needLocalTransform = this.needLocalTransform();\n\n    var m = this.transform;\n    m = m || [];\n    if (!(needLocalTransform || parentHasTransform)) {\n        mIdentity(m);\n        return;\n    }\n\n    m = m || matrix.create();\n\n    if (needLocalTransform) {\n        this.getLocalTransform(m);\n    } else {\n        mIdentity(m);\n    }\n\n    // 应用父节点变换\n    if (parentHasTransform) {\n        if (needLocalTransform) {\n            matrix.mul(m, parent.transform, m);\n        } else {\n            matrix.copy(m, parent.transform);\n        }\n    }\n    // 保存这个变换矩阵\n    this.transform = m;\n\n    this.invTransform = this.invTransform || matrix.create();\n    matrix.invert(this.invTransform, m);\n};\n\nTransformable.prototype.getLocalTransform = function (m) {\n    m = m || [];\n    mIdentity(m);\n\n    var origin = this.origin;\n\n    var scale = this.scale;\n    var rotation = this.rotation;\n    var position = this.position;\n    if (origin) {\n        // Translate to origin\n        m[4] -= origin[0];\n        m[5] -= origin[1];\n    }\n    if (scale) {\n        matrix.scale(m, m, scale);\n    }\n    if (rotation) {\n        matrix.rotate(m, m, rotation);\n    }\n    if (origin) {\n        // Translate back from origin\n        m[4] += origin[0];\n        m[5] += origin[1];\n    }\n\n    m[4] += position[0];\n    m[5] += position[1];\n\n    return m;\n};\n\n/**\n * 将自己的transform应用到context上\n * @param {Context2D} ctx\n */\nTransformable.prototype.setTransform = function (ctx) {\n    var m = this.transform;\n    if (m) {\n        ctx.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n    }\n};\n\nvar tmpTransform = [];\n\n/**\n * 分解`transform`矩阵到`position`, `rotation`, `scale`\n */\nTransformable.prototype.decomposeTransform = function () {\n    if (!this.transform) {\n        return;\n    }\n    var parent = this.parent;\n    var m = this.transform;\n    if (parent && parent.transform) {\n        // Get local transform and decompose them to position, scale, rotation\n        matrix.mul(tmpTransform, parent.invTransform, m);\n        m = tmpTransform;\n    }\n    var sx = m[0] * m[0] + m[1] * m[1];\n    var sy = m[2] * m[2] + m[3] * m[3];\n    var position = this.position;\n    var scale = this.scale;\n    if (isNotAroundZero(sx - 1)) {\n        sx = Math.sqrt(sx);\n    }\n    if (isNotAroundZero(sy - 1)) {\n        sy = Math.sqrt(sy);\n    }\n    if (m[0] < 0) {\n        sx = -sx;\n    }\n    if (m[3] < 0) {\n        sy = -sy;\n    }\n    position[0] = m[4];\n    position[1] = m[5];\n    scale[0] = sx;\n    scale[1] = sy;\n    this.rotation = Math.atan2(-m[1] / sy, m[0] / sx);\n};\n\n/**\n * 变换坐标位置到 shape 的局部坐标空间\n * @method\n * @param {number} x\n * @param {number} y\n * @return {Array.<number>}\n */\nTransformable.prototype.transformCoordToLocal = function (x, y) {\n    var v2 = [x, y];\n    var invTransform = this.invTransform;\n    if (invTransform) {\n        vector.applyTransform(v2, v2, invTransform);\n    }\n    return v2;\n};\n\n/**\n * 变换局部坐标位置到全局坐标空间\n * @method\n * @param {number} x\n * @param {number} y\n * @return {Array.<number>}\n */\nTransformable.prototype.transformCoordToGlobal = function (x, y) {\n    var v2 = [x, y];\n    var transform = this.transform;\n    if (transform) {\n        vector.applyTransform(v2, v2, transform);\n    }\n    return v2;\n};\n\nexport default Transformable;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/graphic/mixin/transform.js","/**\n * @module ychart/core/graphic/mixin/helper\n * @see {@link ychart/core/graphic/mixin} 工具类\n */\n\nvar ArrayCtor = typeof Float32Array === 'undefined'\n    ? Array\n    : Float32Array;\n/**\n * 3x2矩阵操作类\n */\nvar matrix = {\n    /**\n     * 创建一个单位矩阵\n     * @return {Float32Array|Array.<number>}\n     */\n    create: function () {\n        var out = new ArrayCtor(6);\n        matrix.identity(out);\n\n        return out;\n    },\n    /**\n     * 设置矩阵为单位矩阵\n     * @param {Float32Array|Array.<number>} out\n     */\n    identity: function (out) {\n        out[0] = 1;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 1;\n        out[4] = 0;\n        out[5] = 0;\n        return out;\n    },\n    /**\n     * 复制矩阵\n     * @param {Float32Array|Array.<number>} out\n     * @param {Float32Array|Array.<number>} m\n     */\n    copy: function (out, m) {\n        out[0] = m[0];\n        out[1] = m[1];\n        out[2] = m[2];\n        out[3] = m[3];\n        out[4] = m[4];\n        out[5] = m[5];\n        return out;\n    },\n    /**\n     * 矩阵相乘\n     * @param {Float32Array|Array.<number>} out\n     * @param {Float32Array|Array.<number>} m1\n     * @param {Float32Array|Array.<number>} m2\n     */\n    mul: function (out, m1, m2) {\n        // Consider matrix.mul(m, m2, m);\n        // where out is the same as m2.\n        // So use temp variable to escape error.\n        var out0 = m1[0] * m2[0] + m1[2] * m2[1];\n        var out1 = m1[1] * m2[0] + m1[3] * m2[1];\n        var out2 = m1[0] * m2[2] + m1[2] * m2[3];\n        var out3 = m1[1] * m2[2] + m1[3] * m2[3];\n        var out4 = m1[0] * m2[4] + m1[2] * m2[5] + m1[4];\n        var out5 = m1[1] * m2[4] + m1[3] * m2[5] + m1[5];\n        out[0] = out0;\n        out[1] = out1;\n        out[2] = out2;\n        out[3] = out3;\n        out[4] = out4;\n        out[5] = out5;\n        return out;\n    },\n    /**\n     * 平移变换\n     * @param {Float32Array|Array.<number>} out\n     * @param {Float32Array|Array.<number>} a\n     * @param {Float32Array|Array.<number>} v\n     */\n    translate: function (out, a, v) {\n        out[0] = a[0];\n        out[1] = a[1];\n        out[2] = a[2];\n        out[3] = a[3];\n        out[4] = a[4] + v[0];\n        out[5] = a[5] + v[1];\n        return out;\n    },\n    /**\n     * 旋转变换\n     * @param {Float32Array|Array.<number>} out\n     * @param {Float32Array|Array.<number>} a\n     * @param {number} rad\n     */\n    rotate: function (out, a, rad) {\n        var aa = a[0];\n        var ac = a[2];\n        var atx = a[4];\n        var ab = a[1];\n        var ad = a[3];\n        var aty = a[5];\n        var st = Math.sin(rad);\n        var ct = Math.cos(rad);\n\n        out[0] = aa * ct + ab * st;\n        out[1] = -aa * st + ab * ct;\n        out[2] = ac * ct + ad * st;\n        out[3] = -ac * st + ct * ad;\n        out[4] = ct * atx + st * aty;\n        out[5] = ct * aty - st * atx;\n        return out;\n    },\n    /**\n     * 缩放变换\n     * @param {Float32Array|Array.<number>} out\n     * @param {Float32Array|Array.<number>} a\n     * @param {Float32Array|Array.<number>} v\n     */\n    scale: function (out, a, v) {\n        var vx = v[0];\n        var vy = v[1];\n        out[0] = a[0] * vx;\n        out[1] = a[1] * vy;\n        out[2] = a[2] * vx;\n        out[3] = a[3] * vy;\n        out[4] = a[4] * vx;\n        out[5] = a[5] * vy;\n        return out;\n    },\n    /**\n     * 求逆矩阵\n     * @param {Float32Array|Array.<number>} out\n     * @param {Float32Array|Array.<number>} a\n     */\n    invert: function (out, a) {\n\n        var aa = a[0];\n        var ac = a[2];\n        var atx = a[4];\n        var ab = a[1];\n        var ad = a[3];\n        var aty = a[5];\n\n        var det = aa * ad - ab * ac;\n        if (!det) {\n            return null;\n        }\n        det = 1.0 / det;\n\n        out[0] = ad * det;\n        out[1] = -ab * det;\n        out[2] = -ac * det;\n        out[3] = aa * det;\n        out[4] = (ac * aty - ad * atx) * det;\n        out[5] = (ab * atx - aa * aty) * det;\n        return out;\n    }\n};\n\nexport default matrix;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/graphic/mixin/helper/matrix.js","/**\n * @module ychart/core/graphic/mixin/helper\n * @see {@link ychart/core/graphic/mixin} 工具类\n */\n\n\n\n/**\n * @typedef {Float32Array|Array.<number>} Vector2\n */\nvar ArrayCtor = typeof Float32Array === 'undefined' ? Array : Float32Array;\n\n/**\n * 二维向量类\n */\nvar vector = {\n    /**\n     * 创建一个向量\n     * @param {number} [x=0]\n     * @param {number} [y=0]\n     * @return {Vector2}\n     */\n    create: function (x, y) {\n        var out = new ArrayCtor(2);\n        out[0] = x || 0;\n        out[1] = y || 0;\n        return out;\n    },\n\n    /**\n     * 复制向量数据\n     * @param {Vector2} out\n     * @param {Vector2} v\n     * @return {Vector2}\n     */\n    copy: function (out, v) {\n        out[0] = v[0];\n        out[1] = v[1];\n        return out;\n    },\n\n    /**\n     * 克隆一个向量\n     * @param {Vector2} v\n     * @return {Vector2}\n     */\n    clone: function (v) {\n        var out = new ArrayCtor(2);\n        out[0] = v[0];\n        out[1] = v[1];\n        return out;\n    },\n\n    /**\n     * 设置向量的两个项\n     * @param {Vector2} out\n     * @param {number} a\n     * @param {number} b\n     * @return {Vector2} 结果\n     */\n    set: function (out, a, b) {\n        out[0] = a;\n        out[1] = b;\n        return out;\n    },\n\n    /**\n     * 向量相加\n     * @param {Vector2} out\n     * @param {Vector2} v1\n     * @param {Vector2} v2\n     */\n    add: function (out, v1, v2) {\n        out[0] = v1[0] + v2[0];\n        out[1] = v1[1] + v2[1];\n        return out;\n    },\n\n    /**\n     * 向量缩放后相加\n     * @param {Vector2} out\n     * @param {Vector2} v1\n     * @param {Vector2} v2\n     * @param {number} a\n     */\n    scaleAndAdd: function (out, v1, v2, a) {\n        out[0] = v1[0] + v2[0] * a;\n        out[1] = v1[1] + v2[1] * a;\n        return out;\n    },\n\n    /**\n     * 向量相减\n     * @param {Vector2} out\n     * @param {Vector2} v1\n     * @param {Vector2} v2\n     */\n    sub: function (out, v1, v2) {\n        out[0] = v1[0] - v2[0];\n        out[1] = v1[1] - v2[1];\n        return out;\n    },\n\n    /**\n     * 向量长度\n     * @param {Vector2} v\n     * @return {number}\n     */\n    len: function (v) {\n        return Math.sqrt(this.lenSquare(v));\n    },\n\n    /**\n     * 向量长度平方\n     * @param {Vector2} v\n     * @return {number}\n     */\n    lenSquare: function (v) {\n        return v[0] * v[0] + v[1] * v[1];\n    },\n\n    /**\n     * 向量乘法\n     * @param {Vector2} out\n     * @param {Vector2} v1\n     * @param {Vector2} v2\n     */\n    mul: function (out, v1, v2) {\n        out[0] = v1[0] * v2[0];\n        out[1] = v1[1] * v2[1];\n        return out;\n    },\n\n    /**\n     * 向量除法\n     * @param {Vector2} out\n     * @param {Vector2} v1\n     * @param {Vector2} v2\n     */\n    div: function (out, v1, v2) {\n        out[0] = v1[0] / v2[0];\n        out[1] = v1[1] / v2[1];\n        return out;\n    },\n\n    /**\n     * 向量点乘\n     * @param {Vector2} v1\n     * @param {Vector2} v2\n     * @return {number}\n     */\n    dot: function (v1, v2) {\n        return v1[0] * v2[0] + v1[1] * v2[1];\n    },\n\n    /**\n     * 向量缩放\n     * @param {Vector2} out\n     * @param {Vector2} v\n     * @param {number} s\n     */\n    scale: function (out, v, s) {\n        out[0] = v[0] * s;\n        out[1] = v[1] * s;\n        return out;\n    },\n\n    /**\n     * 向量归一化\n     * @param {Vector2} out\n     * @param {Vector2} v\n     */\n    normalize: function (out, v) {\n        var d = vector.len(v);\n        if (d === 0) {\n            out[0] = 0;\n            out[1] = 0;\n        }\n        else {\n            out[0] = v[0] / d;\n            out[1] = v[1] / d;\n        }\n        return out;\n    },\n\n    /**\n     * 计算向量间距离\n     * @param {Vector2} v1\n     * @param {Vector2} v2\n     * @return {number}\n     */\n    distance: function (v1, v2) {\n        return Math.sqrt(\n            (v1[0] - v2[0]) * (v1[0] - v2[0]) + (v1[1] - v2[1]) * (v1[1] - v2[1])\n        );\n    },\n\n    /**\n     * 向量距离平方\n     * @param {Vector2} v1\n     * @param {Vector2} v2\n     * @return {number}\n     */\n    distanceSquare: function (v1, v2) {\n        return (v1[0] - v2[0]) * (v1[0] - v2[0]) + (v1[1] - v2[1]) * (v1[1] - v2[1]);\n    },\n\n    /**\n     * 求负向量\n     * @param {Vector2} out\n     * @param {Vector2} v\n     */\n    negate: function (out, v) {\n        out[0] = -v[0];\n        out[1] = -v[1];\n        return  out;\n    },\n\n\n\n\n    /**\n     * 插值两个点\n     * @param {Vector2} out\n     * @param {Vector2} v1\n     * @param {Vector2} v2\n     * @param {number} t\n     */\n    lerp: function (out, v1, v2, t) {\n        out[0] = v1[0] + t * (v2[0] - v1[0]);\n        out[1] = v1[1] + t * (v2[1] - v1[1]);\n        return out;\n    },\n\n    /**\n     * 矩阵左乘向量\n     * @param {Vector2} out\n     * @param {Vector2} v\n     * @param {Vector2} m\n     */\n    applyTransform: function (out, v, m) {\n        var x = v[0];\n        var y = v[1];\n        out[0] = m[0] * x + m[2] * y + m[4];\n        out[1] = m[1] * x + m[3] * y + m[5];\n        return out;\n    },\n    /**\n     * 求两个向量最小值\n     * @param  {Vector2} out\n     * @param  {Vector2} v1\n     * @param  {Vector2} v2\n     */\n    min: function (out, v1, v2) {\n        out[0] = Math.min(v1[0], v2[0]);\n        out[1] = Math.min(v1[1], v2[1]);\n        return out;\n    },\n    /**\n     * 求两个向量最大值\n     * @param  {Vector2} out\n     * @param  {Vector2} v1\n     * @param  {Vector2} v2\n     */\n    max: function (out, v1, v2) {\n        out[0] = Math.max(v1[0], v2[0]);\n        out[1] = Math.max(v1[1], v2[1]);\n        return out;\n    }\n};\n\nvector.length = vector.len;\nvector.lengthSquare = vector.lenSquare;\nvector.dist = vector.distance;\nvector.distSquare = vector.distanceSquare;\n\nexport default vector;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/graphic/mixin/helper/vector.js","/**\n * @module ychart/core/graphic/mixin\n */\n\n\nimport {isArr} from \"../../../tool/util\"\n\n/**\n * 元素移动相关功能实现。 混入类\n * @class\n * @mixin\n */\nvar Moveable = function () {\n\n};\n\nMoveable.prototype = {\n\n    /**\n     * 拖动\n     * @param {number} dx\n     * @param {number} dy\n     */\n    drift: function (dx, dy) {\n        // if (!isArr(this.position)) {\n            // this.position = [0, 0];\n        // }\n\n        this.position[0] += dx;\n        this.position[1] -= dy;\n        this.__dirty = true;\n    },\n\n    /**\n     * 移动。 和drift方法完全一样\n     * @param {number} dx\n     * @param {number} dy\n     */\n    move: function (dx, dy) {\n        this.drift(dx, dy);\n    },\n\n    /**\n     * 旋转\n     * @param {number}  x 圆心X座标\n     * @param {number}  y 圆心y座标\n     * @param {number}  angle 旋转弧度\n     */\n    rotate: function (x, y, angle) {\n        // if (!isArr(this.origin)) {\n            // this.origin = [0, 0];\n        // }\n        if(!this.rotation){\n            this.rotation = 0;\n        }\n        this.origin[0] += x;\n        this.origin[1] += y;\n        this.rotation += angle;\n\n        this.__dirty = true;\n    },\n\n    /**\n     * 缩放\n     * 注意该缩放必须是相对于某个点的. 默认情况下是[0,0] 这个肯定不是想要的结果,\n     * 必须在shape指定origin为缩放的原点\n     *\n     * @param {number}  x X方向放大比例\n     * @param {number}  y y方向放大比例\n     */\n    zoom: function (x, y) {\n        this.scale[0] *= x;\n        this.scale[1] *= y;\n        this.__dirty = true;\n    }\n};\n\n\nexport default Moveable;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/graphic/mixin/moveable.js","/**\n * ychart库页面元素基类模块\n * @module ychart/core/graphic/element\n */\nimport guid from \"../../tool/guid\";\n\n/**\n * @classdesc 基本元素类。 整个库的所有可以独立存在并且彼此区分的单元都继承此类已获取一个独立的ID\n * @class\n */\nclass Element {\n    /**\n     * @constructor\n     * @param {String} type  元素类型. 该类型为element\n     */\n    constructor(type = \"element\") {\n        this.type = type;\n        this.id = this.type + \"_\" + guid();\n    }\n\n    /**\n     * 获取元素id\n     * @returns {string}  该元素的唯一ID\n     */\n    getId() {\n        return this.id;\n    }\n\n}\n\nexport default Element;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/graphic/element.js","var beginid = 1000;\nvar guid = function(){\n    return beginid++;\n};\n\nexport default guid;\n\n\n\n// WEBPACK FOOTER //\n// ./src/tool/guid.js","/**\n * 绘图中绘制控制器模块\n * @module ychart/painter\n */\nimport Layer from \"./Layer\";\nimport guid from \"./tool/guid\";\nimport Group from \"./Group\";\nimport {\n    getPosition,\n    createDOM\n} from \"./tool/dom\";\n\n/**\n * 绘图组件。\n * 该组件控制所有元素绘制相关的处理，包括各个元素之间的层级关系、属性继承等\n * 具体绘制的层在Layer模块中\n * @class\n * @classdesc 绘图器类\n * @param yh {module:ychart/Ychart} ychart实例\n * @param storage {module:ychart/storage}  存储器实例\n * @constructor\n */\nvar Painter = function(yh, storage) {\n    this.__storage = storage;\n    this.__yh = yh;\n    this.origindom = document.getElementById(yh.domid);\n    var temp = getPosition(this.origindom);\n    this.width = temp.width;\n    this.height = temp.height;\n    this.left = temp.left;\n    this.top = temp.top;\n\n    // this.container = createDOM(guid() , \"div\" , \"container\" ,this.width , this.height ,\"relative\");\n    this.container = createDOM(guid(), \"div\", \"container\", \"relative\", {\n        width: \"100%\",\n        height: \"100%\"\n    });\n    this.origindom.appendChild(this.container);\n    this.__layer = [];\n};\n\n/**\n *刷新ychart实例所管理的所有元素， 该方法调用过后才会实际更改某个元素的属性。\n * 默认情况下通过构造方法或者setOption都只是添加了配置但是没有实际计算及显示\n */\nPainter.prototype.refresh = function() {\n    var shapeList = this.__storage.getDisplayableShapeList();\n    this.updateLayerState(shapeList);\n    var i, shape, layer, zlevel, lastZlevel = -1;\n    for (i = 0; i < shapeList.length; i++) {\n        shape = shapeList[i];\n        zlevel = shape.zLevel || 0;\n        layer = this.getLayer(zlevel);\n        //脏元素所在的layer需要清除画布过后重新绘制\n        if (lastZlevel != zlevel && layer.__dirty) {\n            layer.clear();\n            lastZlevel = zlevel;\n            layer.__dirty = false;\n        }\n        this.preProcessShapeInLayer(shape, layer);\n        shape.Brush(layer.getContext());\n        this.afterProcessShapeInLayer(shape, layer);\n    }\n};\n\n/**\n * 更新layer状态。 计算哪些层需要清除\n * @param shapeList {Array.<module:ychart/core/graphic/element>} 需要更新状态的元素列表\n */\nPainter.prototype.updateLayerState = function(shapeList) {\n    var i, layer, zlevel, shape;\n    for (i = 0; i < shapeList.length; i++) {\n        shape = shapeList[i];\n        //对于每个形状来说要到具体绘制的时候才知道所属的ychart实例，所以在这里添加\n        !shape.__yh && (shape.__yh = this.__yh);\n\n        zlevel = shape.zLevel;\n        layer = this.getLayer(zlevel);\n        //已经设置过\n\n        //如果图像为脏，则需要清除当前画布\n        !layer.__dirty && (layer.__dirty = shape.__dirty);\n    }\n};\n\n\n/**\n * 处理当前元素的层次结构,把当前形状的父元素与绘图层Layer关联起来\n * @param shape {module:ychart/core/graphic/element} 元素实例\n * @param layer {module:ychart/layer} 绘图层\n */\nPainter.prototype.preProcessShapeInLayer = function(shape, layer) {\n    var _preProcessShapeInLayer = function(_shape) {\n        if (_shape.parent == null) {\n            _shape.parent = layer;\n        } else if (_shape.parent instanceof Group) {\n            _groupPreProcess(_shape.parent, layer);\n        }\n    };\n\n    /**\n     * 更新某个元素所属组的parent属性, 用于变换. 每个group都会继承它的parent的变换.\n     * 顶层group继承所属Layer的变换.\n     * 该方法最主要的目的是由根layer开始向上计算相应的变换矩阵\n     * @param gp 当前group\n     * @param ly 所属绘图层(Layer)\n     * @private\n     */\n    var _groupPreProcess = function(gp, ly) {\n        //第一个是最高级别的group,后面的都是它的子group\n        var groupquene = [];\n        var _buildGroupQuene = function(_group) {\n            if (_group instanceof Group) {\n                groupquene.unshift(_group);\n            }\n            if (_group.parent instanceof Group) {\n                _buildGroupQuene(_group.parent);\n            }\n        };\n        _buildGroupQuene(gp);\n        var before = groupquene[0];\n        groupquene.forEach(function(item, index) {\n            if (index === 0) {\n                item.parent = ly;\n            } else {\n                item.parent = before;\n            }\n            before = item;\n            //更新组的变换\n            item.updateTransform();\n        });\n    };\n\n\n    _preProcessShapeInLayer(shape);\n};\n\n/**\n * 处理元素层次结构后的回调\n * @param shape {module:ychart/core/graphic/element} 元素实例\n * @param layer {module:ychart/layer} 绘图层\n */\nPainter.prototype.afterProcessShapeInLayer = function(shape) {\n    shape.__dirty = false;\n};\n\n/**\n * 获取指定zLevel的yaler，如果该zLevel不存在，就创建一个新的Layer实例并添加到绘图器\n * @param zLevel {string} 绘图所在层级， 整数\n * @return {module::ychart/layer} Layer实例\n */\nPainter.prototype.getLayer = function(zLevel) {\n    var layer = this.__layer[zLevel];\n    if (!layer) {\n        layer = new Layer(guid() + \"-zlevel\", zLevel, {\n            width: this.getWidth(),\n            height: this.getHeight(),\n            left: 0,\n            top: 0\n        });\n        this.insertLayer(zLevel, layer);\n        this.__layer[zLevel] = layer;\n    }\n    return layer;\n};\n\n/**\n * 获取容器宽度\n * @returns {integer} 容器宽\n */\nPainter.prototype.getWidth = function() {\n    return this.width;\n};\n\n/**\n * 获取容器高度\n * @returns {integer} 容器高\n */\nPainter.prototype.getHeight = function() {\n    return this.height;\n};\n\n/**\n * 清楚当前绘图实例。\n * 该方法将清楚容器中所添加的canvas元素及其他任何DOM元素，如果要再次使用必须重新实例化\n */\nPainter.prototype.clean = function() {\n    this.width = null;\n    this.height = null;\n\n    //删除创建的canvas元素\n    this.origindom.innerHTML = \"\";\n    this.origindom = null;\n};\n\n/**\n * 清除画布中的内容，不会影响到其他事件或者内容\n */\nPainter.prototype.cleanPainter = function() {\n    this.__layer.forEach(la => la.clear());\n};\n\n/**\n * 改变当前容器的大小,该方法会导致整个ychart控制的容器的实际大小也对应改变\n * 实际实现是通过Layer模块实现\n * 该方法与room方法的不同的是该方法会改变容器即canvas的大小\n * @param {Number} width 目标宽度\n * @param {Number} height 目标高度\n */\nPainter.prototype.resize = function(width, height) {\n    this.__layer.forEach(la => {\n        la.resize(width, height);\n    });\n    this.width = width;\n    this.height = height;\n    this.refresh();\n};\n\n/**\n * 在文档中插入指定的layer节点\n * @param zLevel {string} 绘图所在层级， 整数\n * @param layer {module::ychart/layer} Layer实例\n */\nPainter.prototype.insertLayer = function(zLevel, layer) {\n    var dom = layer.dom;\n    if (this.__layer.length !== 0) {\n        var children = this.container.getElementsByTagName(\"canvas\");\n        var i, len, child;\n        for (i = 0, len = children.length; i < len; i++) {\n            child = children[i];\n            if (zLevel < parseInt(child.getAttribute(\"zLevel\"))) {\n                child.parentNode.insertBefore(dom, child);\n                children = null;\n                return;\n            }\n        }\n    }\n    this.container.appendChild(dom);\n};\n\nexport default Painter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Painter.js","/**\n * 代表canvas中一个绘图层。 与具体形状的关系仅仅是当前layer所处的zIndex\n * @module ychart/layer\n */\nimport {\n    checkNull\n} from \"./tool/util\";\nimport {\n    createDOM,\n    getContext\n} from \"./tool/dom\";\nimport Moveable from \"./core/graphic/mixin/moveable.js\";\nimport Transform from \"./core/graphic/mixin/transform.js\";\nimport {\n    mixin\n} from \"./tool/klass.js\";\n\n/**\n *\n * @class\n * @classdesc 一个绘图层。 对应DOM上一个canvas元素。\n *   每一个layer都有自己独立和样式。 不同layer之间的前后关系由Storage模块处理。 layer的具体绘制由Painter处理\n */\nclass Layer {\n\n    /**\n    * @param id {string} Layer的ID\n    * @param zLevel {Number}  所属的zLevel，决定了该层的显示位置\n    * @param opts {object}\n    * @constructor\n    */\n    constructor(id, zLevel, opts) {\n        //当前层的ID\n        this.id = id;\n        //当前层的实际DOM. 也就是一个canvas元素实例\n        this.dom = document.getElementById(id);\n        //当前层的前后顺序.\n        this.zLevel = zLevel;\n\n        if (checkNull(this.dom)) {\n            this.dom = createDOM(id, \"canvas\", \"layer\", \"absolute\", {left: opts.left || 0,top: opts.top || 0} ,\n                {width: opts.width ,height: opts.height});\n        }\n\n        this.dom.setAttribute(\"zLevel\", zLevel);\n\n        this.ctx = getContext(this.dom);\n\n        this.layerW = opts.width;\n        this.layerH = opts.height;\n\n        if (checkNull(this.ctx)) {\n            alert(\"浏览器不支持HTML5 canvas,初始化ychart失败 . 请更新浏览器 \" );\n            return;\n        }\n\n        //当前画布由于包含的图形有变化需要清除后重新绘制\n        this.__dirty = false;\n\n        Transform.call(this);\n    }\n\n    /**\n     * 获取当前层的zlevel\n     * @return {Number} zLevel  所在层级\n     */\n    getZlevel() {\n        return this.zLevel;\n    }\n\n    /**\n     * 获取当前绘图层的上下文\n     * @returns {CanvasRenderingContext2D}\n     */\n    getContext() {\n        return this.ctx;\n    }\n\n    /**\n     * 清除当前layer所有的绘制的内容\n     */\n    clear() {\n        this.ctx.clearRect(0, 0, this.layerW, this.layerH);\n    }\n\n    /**\n     * 改变当前layer的大小。 该操作实际上是通过计算目标大小与当前的canvas大小\n     * 然后按照对应的比例进行缩放实现的。  同时，也会改变canvas本身的大小\n     * @param {Number} width  目标宽度\n     * @param {Number} height  目标高度\n     */\n    resize(width, height) {\n        var dx = width / this.layerW,\n            dy = height / this.layerH;\n\n        this.zoom(dx, dy);\n\n        //由于layer始终会是最根部的一个元素，所以它的变换需要手动调用。\n        //而对于Group的变换，只有在确定了它所处的层级过后才能更新变换\n        this.updateTransform();\n\n        this.dom.width = width;\n        this.dom.height = height;\n        this.layerW = width, this.layerH = height;\n    }\n}\n\nmixin(Layer, Transform, true);\nmixin(Layer, Moveable, true);\n\nexport default Layer;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Layer.js","function parseInt10(val) {\n    return parseInt(val, 10);\n}\nexport var getPosition = function (id) {\n    var element = typeof id == \"string\" ? document.getElementById(id) : id;\n    var st = document.defaultView.getComputedStyle(element);\n\n    var rect = element.getBoundingClientRect();\n    var scrollTop = document.documentElement.scrollTop ?\n        document.documentElement.scrollTop : document.body.scrollTop;\n    var scrollLeft = document.documentElement.scrollLeft ?\n        document.documentElement.scrollLeft : document.body.scrollLeft;\n    return {\n        width: (element.clientWidth || parseInt10(st.width) || parseInt10(element.style.width) -\n            (parseInt10(st.paddingLeft) || 0) -\n                (parseInt10(st.paddingRight))) || 0,\n\n        height: (element.clientHeight || parseInt10(st.height) || parseInt10(element.style.height) -\n            (parseInt10(st.paddingTop) || 0) -\n                (parseInt10(st.paddingBottom))) || 0,\n        top: rect.top + scrollTop,\n        left: rect.left + scrollLeft\n    };\n};\n\nvar CACHE = {};\n\nexport var getRectByCtx = function(context){\n    let canvas = context.canvas;\n    if(CACHE[canvas]){\n        return CACHE[canvas];\n    }\n    CACHE[canvas] = [canvas.width ,canvas.height];\n    return CACHE[canvas];\n};\n\nexport var doc = function (id) {\n    return document.getElementById(id);\n};\n\n/* eslint-disable */\nexport var createDOM = function (id, type, desc, pos ,style , attr) {\n    var newdom = document.createElement(type);\n    var st = newdom.style;\n    st.position = typeof pos === \"undefined\" ? \"absolute\" : pos;\n    if(style){\n        for(let item in style){\n            if(isNaN(style[item])){\n                st[item] = style[item];\n            }else{\n                st[item] = style[item]+\"px\";\n            }\n        }\n    }\n    if(attr){\n        for(let item in attr){\n            newdom[item] = attr[item];\n        }\n    }\n    newdom.setAttribute(\"ychart-\"+desc, id);\n    return newdom;\n};\n\n\nexport var getContext = function (drawing) {\n    if (drawing && drawing.getContext) {\n        return drawing.getContext(\"2d\");\n    }\n    return null;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/tool/dom.js","/**\n * 全局事件分发程序，负责绑定事件到canvas元素上以及分发下去\n * @module ychart/Handler\n */\n\nimport eventUtil from \"./tool/event\";\nimport Draggable from \"./core/graphic/mixin/draggable\";\nimport HtmlView from \"./core/graphic/htmlView\";\nimport {DEFAULT_CONFIG} from \"./core/config/config\";\n\nimport {\n    doc\n} from \"./tool/dom\";\nimport {\n    bind1Arg\n} from \"./tool/lang\";\n\n\n//所有捕获的事件名称\nvar ALL_EVENT_NAMES = [\"click\", \"mousedown\", \"mousemove\", \"mouseup\", \"focus\"];\n\n//自定义的一些事件处理函数\nvar SPECIAL_EVENT_HANDLERS = {\n\n    //上一个获取焦点的元素\n    _lastHovered: null,\n\n    //全局消息提示组件\n    htmlView: null,\n\n    //鼠标移动事件捕获及分发\n    mousemove: function(exEvent) {\n\n        var ev = exEvent, obj = exEvent.targetEle;\n        //判断和之前获取焦点的是否是同一个形状\n        if (this._lastHovered != null && this._lastHovered != obj) {\n            this.triggerProxy(this._lastHovered, \"blur\", ev);\n        }\n        //某个形状处于焦点中\n        if (obj) {\n            //分发该元素的鼠标移动事件\n            this.triggerProxy(obj, \"mousemove\", ev);\n\n            //处理鼠标在元素上的消息提示\n            if(obj.config.tip){\n                if(!this.htmlView){\n                    this.htmlView = new HtmlView({\n                        left: exEvent.clientX+DEFAULT_CONFIG.tipoffsetX,\n                        top: exEvent.clientY+DEFAULT_CONFIG.tipoffsetY\n                    });\n                }else{\n                    this.htmlView.move(exEvent.clientX+DEFAULT_CONFIG.tipoffsetX,\n                        exEvent.clientY+DEFAULT_CONFIG.tipoffsetY);\n                }\n                if(this._lastHovered != obj )\n                    this.htmlView.info(obj.config.tip);\n                this.htmlView.show();\n            }else{\n                this.htmlView && this.htmlView.hide();\n            }\n        } else {\n            //隐藏消息提示\n            this.htmlView && this.htmlView.hide();\n        }\n        this._lastHovered = obj;\n    },\n\n    mouseout: function(exEvent) {\n        var ev = exEvent;\n        if (this._lastHovered != null) {\n            this.triggerProxy(this._lastHovered, \"globalout\", ev);\n        }\n        this._lastHovered = null;\n        this.htmlView && this.htmlView.hide();\n    }\n\n};\n\n//通用事件处理函数\nvar COMMON_EVENT_HANDLER = function(name) {\n    return function(exEvent) {\n\n        var ev = exEvent,obj = ev.targetEle;\n\n        //某个形状处于焦点中并且可以捕获事件\n        if (obj) {\n            //分发该元素的获取焦点事件\n            this.triggerProxy(obj, name, ev);\n        }\n    };\n};\n\n/**\n * @class\n * @classdesc 管理一个ychart实例的所有事件捕获及其分发\n * @param root {HTMLElement}  实际容器ID\n * @param painter {module:ychart/painter} 绘图器实例\n * @param storage {module:ychart/storage} 存储器实例\n */\nvar handlers = function(root, painter, storage) {\n    //存储器\n    this.__storage = storage;\n\n    //绘图器\n    this.__painter = painter;\n\n    //实际事件响应容器\n    this.root = doc(root);\n\n    //事件处理程序\n    this._handlers = {};\n\n    //拖动管理。 只需要调用它的事件分发函数即可\n    this._dragmanager = new Draggable();\n\n    this.initHandlers();\n};\n\n\n/**\n * 初始化事件处理程序及绑定事件。\n * this._handlers保存着所有的事件处理函数\n */\nhandlers.prototype.initHandlers = function() {\n\n    ALL_EVENT_NAMES.forEach(eventName => {\n        //具体的事件处理函数\n        var eventHandler = SPECIAL_EVENT_HANDLERS[eventName] === undefined ? COMMON_EVENT_HANDLER(eventName) :\n            SPECIAL_EVENT_HANDLERS[eventName];\n        //绑定事件处理函数的作用域为handler类.\n        this._handlers[eventName] = bind1Arg(event => {\n\n            //获取自定义事件\n            var exEvent = this.extendAndFixEventPackge(event);\n\n            //调用事件处理函数\n            eventHandler.call(this , exEvent);\n\n            //拖动管理。 元素拖动相关的事件由这里面发出去。\n            this._dragmanager.trigger(eventName ,exEvent);\n\n        } , this);\n        eventUtil.addHandler(this.root, eventName, this._handlers[eventName]);\n    });\n};\n\n/**\n * 自定义事件对象\n * @param event {Event} 原始事件对象\n * @returns {exEvent}\n */\nhandlers.prototype.extendAndFixEventPackge = function(event) {\n    //座标转换\n    event = eventUtil.clientToLocal(this.root, event, event);\n\n    //目标元素\n    event.targetEle = this.getHoverElement(event);\n\n    return event;\n};\n\n/**\n * 事件分发代理器。 该方法会把事件分发到某个元素中，然后由元素自身分发到注册的事件处理函数并且调用。\n * @param element {module:ychart/core/graphic/element}  响应事件的元素\n * @param eventName {string}  事件名称\n * @param exEvent  {exEvent} 扩充的事件对象\n */\nhandlers.prototype.triggerProxy = function(element, eventName, exEvent) {\n    element.trigger && element.trigger(eventName, exEvent, element.config);\n};\n\n/**\n * 获取当前鼠标所在位置覆盖的最上层元素\n * @param exEvent  {exEvent} 扩充的自定义事件对象\n * @return {module:ychart/core/graphic/element || null} 元素对象或者null\n */\nhandlers.prototype.getHoverElement = function(exEvent) {\n    var shapes = this.__storage.getDisplayableShapeList();\n    for (let i = shapes.length-1 ; i >=0; i--) {\n        let sp = shapes[i];\n        if (sp.contain(\n                exEvent.ycX,\n                exEvent.ycY\n            )) {\n            return sp;\n        }\n    }\n    return null;\n};\n\nhandlers.prototype.depose = function () {\n    for(let event in this._handlers){\n        eventUtil.removeHandler(this.root , event ,this._handlers[event]);\n    }\n};\n\nexport default handlers;\n\n\n\n// WEBPACK FOOTER //\n// ./src/Reactor.js","var ClientToLocal = function(el, e, out) {\n    out = out || {};\n    var box = el.getBoundingClientRect();\n    out.ycX = e.clientX - box.left;\n    out.ycY = e.clientY - box.top;\n\n    return out;\n};\n\nexport default {\n    addHandler: function(element, type, handler) {\n        element.addEventListener(type, handler, false);\n    },\n    removeHandler: function(element, type, handler) {\n        element.removeEventListener(type, handler);\n    },\n    getEvent: function(event) {\n        return event ? event : window.event;\n    },\n    getTarget: function(event) {\n        return event.target || event.srcElement;\n    },\n    preventDefault: function(event) {\n        if (event.preventDefault) {\n            event.preventDefault();\n        } else {\n            event.returnValue = false;\n        }\n    },\n    stopPropagation: function(event) {\n        if (event.stopPropagation) {\n            event.stopPropagation();\n        } else {\n            event.cancelBubble = true;\n        }\n    },\n    stop: function(event) {\n        this.preventDefault(event);\n        this.stopPropagation(event);\n    },\n    clientToLocal: ClientToLocal\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/tool/event.js","/**\n * @module ychart/core/graphic/mixin\n */\n\n\nimport Eventful from \"./eventful\";\nimport {mixin} from \"../../../tool/klass\";\nimport {DEFAULT_CONFIG} from \"../../config/config\"\n\nvar target;\n\n/**\n * 拖动的实现类。 由于该类仅需要一个实例，所以没有做成混合类\n * @class\n * @constructor\n */\nvar Draggable = function () {\n    Eventful.call(this);\n\n    this.on(\"mousedown\", this._dragStart, this);\n    this.on(\"mousemove\", this._dragIng, this);\n    this.on(\"mouseup\", this._dragEnd, this);\n    this.on(\"globalout\", this._dragEnd, this);\n};\n\n\nDraggable.prototype = {\n    constructor: Draggable,\n\n    _dragDelay: 100,\n\n    _lastClickTime: null,\n\n    /**\n     * 开始拖动\n     * @param {event} exEvent  加入了自定义项的扩展事件对象\n     * @private\n     */\n    _dragStart: function (exEvent) {\n        target = exEvent.targetEle;\n        this._lastClickTime = new Date();\n        if (target) {\n            this._x = exEvent.offsetX;\n            this._y = exEvent.offsetY;\n            this._dragingTarget = target;\n            this.trigger(target, \"dragStart\", exEvent);\n        }\n    },\n\n    /**\n     * 拖动中\n     * @param {event} exEvent  加入了自定义项的扩展事件对象\n     * @private\n     */\n    _dragIng: function (exEvent) {\n        var ele = exEvent.targetEle;\n        target = this._dragingTarget;\n        var crt = new Date();\n        crt = crt - this._lastClickTime;\n        if(ele){\n            if(ele.draggable)\n                exEvent.target.style.cursor = DEFAULT_CONFIG.cursor_moveable;\n            else\n                exEvent.target.style.cursor = DEFAULT_CONFIG.cursor_getable;\n        }else{\n            exEvent.target.style.cursor = DEFAULT_CONFIG.cursor_default;\n        }\n\n        if (target && target.draggable && crt >= this._dragDelay) {\n\n            var x = exEvent.offsetX;\n            var y = exEvent.offsetY;\n\n            var dx = x - this._x;\n            var dy = y - this._y;\n            this._x = x;\n            this._y = y;\n            target.drift(dx, -dy);\n            this.trigger(target, \"draging\", exEvent);\n            // 更新视图\n            target.RebrushAll();\n        }\n    },\n\n    /**\n     * 拖动完成\n     * @param {event} exEvent  加入了自定义项的扩展事件对象\n     * @private\n     */\n    _dragEnd: function (exEvent) {\n        exEvent.target.style.cursor =DEFAULT_CONFIG.cursor_default;\n        target = this._dragingTarget;\n        if (target) {\n            target.dragging = false;\n            this.trigger(target, \"dragend\", exEvent);\n        }\n\n        this._dragingTarget = null;\n    }\n};\n\n\nmixin(Draggable, Eventful, true);\n\nexport default Draggable;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/graphic/mixin/draggable.js","/**\n * @module ychart/core/graphic/mixin\n */\n\n\n/**\n * 事件分发Dispatch。用于页面上不同对象之间事件绑定及分发。\n * 与具体的事件无关系。 就是Reactor模式中的Dispatch\n * @class\n * @mixin\n */\nvar Eventful = function () {\n    this._handlers = {};\n};\n\n/**\n * 绑定某个处理函数到某个事件上\n * @param event  事件名称\n * @param handler 处理函数\n * @param context 处理函数调用的上下文\n * @returns {Eventful}\n */\nEventful.prototype.on = function (event, handler, context) {\n    var h = this._handlers;\n    if (!h || !event || !handler) {\n        return this;\n    }\n\n    if (!h[event]) {\n        h[event] = [];\n    }\n    h[event].push({\n        _h: handler,\n        _one: false,\n        _ctx: context || this  //调用回调的上下文\n    });\n\n    return this;\n};\n\n/**\n * 绑定某个处理函数到某个事件上.但是仅触发该事件一次。 trigger后删除。\n * @param event  事件名称\n * @param handler 处理函数\n * @param context 处理函数调用的上下文\n * @returns {Eventful}\n */\nEventful.prototype.once = function (event, handler, context) {\n    var _h = this._handlers;\n\n    if (!handler || !event) {\n        return this;\n    }\n\n    if (!_h[event]) {\n        _h[event] = [];\n    }\n\n    if (_h[event].indexOf(handler) >= 0) {\n        return this;\n    }\n\n    _h[event].push({\n        _h: handler,\n        _one: true,\n        _ctx: context || this  //调用回调的上下文\n    });\n\n    return this;\n};\n\n/**\n * 删除某个事件/某个事件的某个回调\n * @param event 事件。 未指定将删除所有事件及对应的回调\n * @param handler 回调  指定该值和事件，将删除该事件的该回调函数\n * @returns {Eventful}\n */\nEventful.prototype.remove = function (event, handler) {\n    if (!event) {\n        this._handlers = {};\n        return this;\n    }\n\n    var hs = this._handlers[event];\n    if (handler) {\n        var i = 0;\n        for (; i < hs.length; i++) {\n            if (hs[i]._h === handler) {\n                break;\n            }\n            hs.splice(i, 1);\n        }\n        if (hs && hs.length == 0) {\n            delete this._handlers[event];\n        }\n    } else {\n        delete this._handlers[event];\n    }\n\n    return this;\n};\n\nvar arrySlice = Array.prototype.slice;\n\n/**\n * 事件分发\n * @param eventName 事件名称\n * @returns {Eventful}\n */\nEventful.prototype.trigger = function (eventName) {\n    var handles = this._handlers[eventName];\n    if (handles) {\n        var args = arguments;\n        var argLen = args.length;\n\n        if (argLen > 3) {\n            args = arrySlice.call(args, 1);\n        }\n        //来自backbone的黑魔法,效率优化,看起来很厉害的样子\n        handles.forEach(function (item, index, array) {\n            switch (argLen) {\n                case 1:\n                    item._h.call(item._ctx);\n                    break;\n                case 2:\n                    item._h.call(item._ctx, args[1]);\n                    break;\n                case 3:\n                    item._h.call(item._ctx, args[1], args[2]);\n                    break;\n                default:\n                    item._h.apply(item._ctx, args);\n                    break\n            }\n            if (item._one) {\n                array.splice(index, 1);\n            }\n        });\n    }\n    return this;\n};\n\n\nexport default Eventful;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/graphic/mixin/eventful.js","/**\n * 默认全局配置\n * @global\n * @module ychart/core/config/style\n */\nexport var DEFAULT_CONFIG = {\n    //正常情况下鼠标样式\n    cursor_default: \"default\",\n    cursor_moveable: \"move\",\n    cursor_getable: \"pointer\",\n\n    //元素在获取焦点时显示信息提示框必须和鼠标当前位置有偏移不然元素本身将不能捕获事件\n    tipoffsetX: 10,\n    tipoffsetY: 0\n};\n\nexport var useRectangularCoordinateSystem = 0;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/config/config.js","/**\n * 独立的HTML元素模块，通常用于某个元素的信息展示\n * @module ychart/core/graphic/htmlVIew\n */\n\nimport View from \"./view\";\nimport {\n    createDOM\n} from \"../../tool/dom\";\n\n/**\n * @private\n */\nclass DomContent{\n    constructor(config) {\n\n        this._root = createDOM(config.id, \"div\", \"htmlView\",\"absolute\", {left: config.left , top: config.top} ,{width: config.width , height: config.height});\n        this._content = document.createElement(\"div\");\n\n        this.init(config);\n    }\n\n    init(config){\n        this._root.style.border = \"solid 1px #efefef\"; this._root.style.backgroundColor = \"white\";\n        this._root.style.padding = \"5px\";\n\n        if(config.title) this._root.appendChild(this.title);\n\n        this._root.appendChild(this._content);\n\n        if(config.footer) this._root.appendChild(this.footer);\n\n        document.body && document.body.appendChild(this._root);\n    }\n\n    get title(){\n        return document.createElement(\"div\");\n    }\n    get content(){\n        return this._content.innerHTML;\n    }\n    set content(html){\n        this._content.innerHTML = html;\n    }\n    get footer(){\n        return document.createElement(\"div\");\n    }\n    show(){\n        this._root.style.visibility = \"visible\";\n    }\n    hide(){\n        this._root.style.visibility = \"hidden\";\n    }\n    move(x,y){\n        this._root.style.left = x+\"px\";\n        this._root.style.top = y+\"px\";\n    }\n}\n\n\n/**\n * @classdesc 绘制在HTML结构上的视图类，该类与contextView互不影响，但是通常用于\n * ContextView的数据展示\n * @class\n */\nexport default class HtmlView extends View {\n    constructor( option = {}) {\n        super(\"HtmlView\",option);\n\n        /**\n         * 当前元素DOM结构引用\n         * @member {HTMLDOMElement}\n         */\n        this._domcontent = new DomContent({\n            id: this.id+\"Parent\",\n            width: option.width || 0,\n            height: option.height || 0,\n            left: option.left || 0,\n            top: option.top || 0\n        });\n    }\n\n    /**\n     * 显示当前HtmlView\n     * @method\n     */\n    show() {\n        this._domcontent.show();\n    }\n\n    /**\n     * 设置提示框的HTML内容\n     * @param info {HTMLString} HTML字符串\n     */\n    info(info){\n        this._domcontent.content = info;\n    }\n\n    /**\n     * 隐藏当前HtmlVIew\n     * @method\n     */\n    hide() {\n        this._domcontent.hide();\n    }\n\n    /**\n     * 移动当前提示框\n     * @param x {number} 目标X座标 绝对定位\n     * @param y {number}  目标Y座标 绝对定位\n     */\n    move(x , y){\n        this._domcontent.move(x , y);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/graphic/htmlView.js","/**\n * 绘图基类View模块\n * @module ychart/core/graphic/view\n */\n\nimport Element from \"./element\";\n/**\n * @class\n * @classdesc 绘图基类。 页面上所有可以显示的绘图最小单元都必须继承该类\n * @abstract\n */\nclass View extends Element {\n\n    /**\n     * 构造函数\n     * @constructor\n     * @param {String} type 该类默认为view类型\n     * @param {Object} option\n     */\n    constructor(type = \"view\", option = {}) {\n        super(type);\n\n        /**\n         * 该元素是否为脏，为脏的话在下次绘图时需要重新计算和绘制\n         * @member {boolean}  默认true\n         * @private\n         */\n        this.__dirty = true;\n\n        /**\n         * 当前元素的父元素\n         * @member {object} 默认为null\n         */\n        this.parent = null;\n\n        /**\n         * 当前元素是否被忽略。 被忽略的话将不会绘制在页面上\n         * @member {boolean}\n         */\n        this.ignore = option.ignore || false;\n    }\n\n    /**\n     * 绘图抽象方法。 子类必须实现该方法\n     * @abstract\n     * @param {Object} option 绘图参数\n     * @throws Error  如果子类没有实现该方法将抛出错误\n     */\n    /* eslint-disable */\n    Brush(option) {\n        throw new Error(\"绘图单元必须实现该方法\");\n    }\n    /* eslint-enable */\n}\n\nexport default View;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/graphic/view.js","export var throwFunc = function(str) {\n    throw str;\n};\n\nexport var noOp = function() {};\n\nexport var bind1Arg = function(handler, context) {\n    return function(arg1) {\n        return handler.call(context, arg1);\n    };\n};\n\nimport {isArr} from \"./util\";\n\n/**\n * 判断某个元素是否加载完成\n * @param {} ctx 回调函数的上下文\n * @param {HTMLElement} 待加载的元素\n * @param {Function | Array.{Function}} 成功的回调函数或者 [调用当前函数时已经加载的回调,稍后的回调]的回调函数数组\n * @param {Function} 判断这个元素是否加载的函数\n */\nvar onreadyCallback = function(ctx, element, callback ,loadMethod) {\n    var notCompleteCb = isArr(callback) ? callback[1] : noOp;\n    var completeCb = isArr(callback) ? callback[0] : noOp;\n    if (loadMethod(element)) {\n        completeCb.call(ctx);\n        return;\n    }\n    let timer = setInterval(function() {\n        if (loadMethod(element)) {\n            notCompleteCb.call(ctx);\n            clearInterval(timer);\n            return;\n        }}, 150);\n};\n\nexport var onImgReady = function(ctx , element , callback){\n    var isImageLoaded = function(imgElement){\n        return imgElement.complete && imgElement.naturalHeight !== 0;\n    };\n    onreadyCallback(ctx,element,callback,isImageLoaded);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/tool/lang.js","/**\n * 贝塞尔曲线\n * @module ychart/shape/Besier\n */\nimport debugs from \"../tool/debug\"\nimport ShapeBuilder from \"../core/viewBuilder\"\n\nvar warn = debugs.warn;\nvar insiderange = function (val, rg1, rg2) {\n    return val < rg1 || val > rg2;\n};\nvar sqrt = function (val) {\n    return Math.sqrt(val);\n};\nvar abs = function (val) {\n    return Math.abs(val);\n};\nvar atan = function (val) {\n    return Math.atan(val);\n};\nvar sin = function (val) {\n    return Math.sin(val);\n};\nvar cos = function (val) {\n    return Math.cos(val);\n};\nvar floor = function (val) {\n    return Math.floor(val);\n};\nvar radian2angle = function (radian) {\n    return radian * 180 / Math.PI;\n};\n\n/**\n *\n * @class Bezier\n * @classdesc 绘制一条曲线路径. 调用此方法后当前的context将包含一条路径.\n * @property {Array.number} beginpt x,y  开始点坐标\n * @property {Array.number} endpt    x,y 结束点坐标\n * @property {number} compact 0-10  表示该波浪线的紧凑程度,即每个弯曲的距离比例\n * @property {number} systole 0-4 波浪的起伏程度, 表现为上下波动程度. 1为标准.小于1就是缩放.1-4就是放大\n * @constructor Bezier\n */\nexport default ShapeBuilder.baseContextViewExtend({\n\n    type: \"BezierPath\",\n\n    BuildPath: function (ctx, config) {\n        var beginpt = config.beginpt, endpt = config.endpt, compact = config.compact || 5, systole = config.systole;\n\n        var linequadrant = function () {\n            if (beginpt[0] < endpt[0] && beginpt[1] >= endpt[1]) return 1;\n            if (beginpt[0] >= endpt[0] && beginpt[1] > endpt[1]) return 2;\n            if (beginpt[0] > endpt[0] && beginpt[1] <= endpt[1]) return 3;\n            if (beginpt[0] <= endpt[0] && beginpt[1] < endpt[1]) return 4;\n        }();\n        var nextx = function (x, dis) {\n            return beginpt[0] <= endpt[0] ? x + dis : x - dis;\n        };\n        var nexty = function (y, dis) {\n            return beginpt[1] <= endpt[1] ? y + dis : y - dis;\n        };\n        var nexpt_ct = function (pt, dispt, leftorright) {\n            var getrs = function (disx, disy) {\n                if (leftorright === 0) {\n                    return {\n                        x: pt[0] + disx,\n                        y: pt[1] + disy\n                    };\n                } else if (leftorright == 1) {\n                    return {\n                        x: pt[0] - disx,\n                        y: pt[1] - disy\n                    };\n                } else {\n                    warn(\"通过距离获取控制点坐标出错\");\n                    return null;\n                }\n            };\n            switch (linequadrant) {\n                case 1:\n                    return getrs(-dispt[0], -dispt[1]);\n                case 2:\n                    return getrs(-dispt[0], dispt[1]);\n                case 3:\n                    return getrs(dispt[0], dispt[1]);\n                case 4:\n                    return getrs(dispt[0], -dispt[1]);\n            }\n        };\n        if (insiderange(compact, 1, 10) || insiderange(systole, 0, 4)) {\n            warn(\"绘制曲线路径中输入的参数错误\");\n            return;\n        }\n        var piece = 2 * compact;\n        var dispiece = sqrt(this.getDistance(beginpt, endpt) / piece);\n        var h = dispiece / 2 * systole;\n        var linevert_angleor = atan(abs(endpt[0] - beginpt[0]) / abs(endpt[1] - beginpt[1]));\n\n        var linectx_dis = abs(endpt[0] - beginpt[0]) / piece;\n        var linecty_dis = abs(endpt[1] - beginpt[1]) / piece;\n\n        var allctpt = [];\n        var allctinlinept = [];\n        var alllinectpt = [];\n        alllinectpt.push({\n            x: beginpt[0],\n            y: beginpt[1]\n        }, {\n            x: nextx(beginpt[0], linectx_dis),\n            y: nexty(beginpt[1], linecty_dis)\n        });\n        allctinlinept.push({\n            x: nextx(beginpt[0], linectx_dis / 2),\n            y: nexty(beginpt[1], linecty_dis / 2)\n        }, {\n            x: nextx(nextx(beginpt[0], linectx_dis / 2), linectx_dis),\n            y: nexty(nexty(beginpt[1], linecty_dis / 2), linecty_dis)\n        });\n        var dispt = {\n            x: cos(linevert_angleor) * h,\n            y: sin(linevert_angleor) * h\n        };\n        allctpt.push(nexpt_ct(allctinlinept[0], dispt, 0), nexpt_ct(allctinlinept[1], dispt, 1));\n        var i;\n        for (i = 2; i < piece; i++) {\n            allctinlinept.push({\n                x: nextx(allctinlinept[i - 1][0], linectx_dis),\n                y: nexty(allctinlinept[i - 1][1], linecty_dis)\n            });\n            alllinectpt.push({\n                x: nextx(alllinectpt[i - 1][0], linectx_dis),\n                y: nexty(alllinectpt[i - 1][1], linecty_dis)\n            });\n            allctpt.push(nexpt_ct(allctinlinept[i], dispt, i % 2));\n        }\n        //最后一个点需要特殊处理\n        alllinectpt.push({\n            x: nextx(alllinectpt[i - 1][0], linectx_dis),\n            y: nexty(alllinectpt[i - 1][1], linecty_dis)\n        });\n\n        ctx.moveTo(beginpt[0], beginpt[1]);\n        for (i = 1; i < allctpt.length; i++) {\n            ctx.quadraticCurveTo(allctpt[i - 1][0], allctpt[i - 1][1], alllinectpt[i][0], alllinectpt[i][1]);\n        }\n        ctx.quadraticCurveTo(allctpt[i - 1][0], allctpt[i - 1][1], alllinectpt[i][0], alllinectpt[i][1]);\n\n        config.style.brushType = \"stroke\";\n\n    }\n});\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/shape/Bezier.js","import {isObj,isArr} from \"./util\";\n\nvar dbpre = \"DamJs Debug Info :    \";\nvar wnpre = \"DamJs warn Info :    \";\nvar dbprespace = function () {\n    var i = 0, rs = \"      \";\n    for (i = 0; i < dbpre.length; i++) {\n        rs += \" \";\n    }\n    return rs;\n}();\n\nvar debug = function (info) {\n    console.log(dbpre + info);\n};\n\nvar warn = function (info) {\n    console.log(wnpre + info);\n};\n\nvar isobj = false;\nvar printobj = function (obj) {\n    function _printObj(obj) {\n        var ele;\n        if (isObj(obj)) {\n            for (ele in obj) {\n                if (isObj(obj[ele])) {\n                    debug(ele + \" : \");\n                    isobj = true;\n                    printobj(obj[ele]);\n                    isobj = false;\n                } else {\n                    if (isobj) {\n                        console.log(dbprespace + ele + \" : \" + obj[ele]);\n                    }\n                    else\n                        debug(ele + \" : \" + obj[ele]);\n                }\n            }\n        } else if (isArr(obj)) {\n            var len = obj.length;\n            for (var i = 0; i < len; i++) {\n                printobj(obj[i]);\n            }\n        }\n    }\n\n    _printObj(obj);\n    isobj = false;\n};\n\nexport default {\n    printobj,\n    debug,\n    warn\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/tool/debug.js","/**\n * 绘图元素类构造器\n * @module  ychart/graphic/viewBuilder\n */\nimport ContextView from \"./graphic/contextView\";\nimport { isType ,isFunc} from \"../tool/util\";\nimport debugs from \"../tool/debug\";\n\nvar REQUIRED_CHILD = {\n    type: \"String\",\n    BuildPath: \"Function\"\n};\n\n\n/**\n * @description 基本canvas视图类创建工厂， 调用该方法并且传入如下参数即创建了一个新的视图元素\n * @param {object} defaults 视图元素构造相关方法\n * @returns {BaseContextView} 视图元素类\n */\nvar baseContextViewExtend = function (defaults) {\n    if (debugs.open) {\n        for (var item in REQUIRED_CHILD) {\n            if (!isType(REQUIRED_CHILD[item])(defaults[item])) {\n                debugs.debug(\"构造新形状出错，属性名称：\" + item + \" 属性要求的类型： \"\n                    + REQUIRED_CHILD[item] + \" 实际类型: \" + (typeof defaults[item]));\n                debugs.printobj(defaults);\n                return null;\n            }\n        }\n    }\n\n    /**\n     * @class\n     * @classdesc ychart形状的构造类.\n     */\n    class BaseContextView extends ContextView {\n        constructor(baseOption) {\n            super(defaults.type, baseOption);\n            if(isFunc(defaults[\"Init\"])){\n                defaults[\"Init\"].call(this,baseOption);\n            }\n        }\n        zoom(x, y){\n            super.zoom(x , y);\n        }\n\n        setDefaultConfig(config){\n            //设置全局ychart属性\n            this.__yh = config.yh;\n            //设置笛卡尔坐标系\n            this._setDefaultTrasformToCartesian(config.height);\n        }\n\n        /**\n         * 设置当前元素的默认坐标系为直角坐标系. 该方法应该在刷新之前调用并且仅仅调用一次.\n         * 由于变换要在元素知道被添加到某个具体的 @see{CanvasRenderingContext2D} 的时候\n         * 才可以.\n         * @private\n         * @param position  距离变换\n         * @param scale  缩放及方向变换\n         */\n        _setDefaultTrasformToCartesian(height){\n            this.position = [0 , height];\n            this.scale = [1,-1];\n        }\n\n    }\n\n    for(var prop in defaults){\n        BaseContextView.prototype[prop] = defaults[prop];\n    }\n\n    return BaseContextView;\n};\n\nexport default {\n    baseContextViewExtend\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/viewBuilder.js","/**\n * 绘制在canvas上的元素基类模块\n * @module ychart/core/graphic/contextview\n */\n\nimport View from \"./view\";\nimport Transform from \"./mixin/transform\";\nimport Eventful from \"./mixin/eventful\";\nimport Moveable from \"./mixin/moveable\";\nimport OptionProxy from \"../config/OptionProxy\";\nimport text from \"./helper/text\";\n\nimport {\n    mixin\n} from \"../../tool/klass\";\n\nimport {\n    isPtInPath,\n    isPtInRect\n} from \"./helper/viewutil\";\n\nimport {\n    getRectByCtx\n} from \"../../tool/dom.js\";\n\n/**\n * @classdesc 绘制在canvas上的CanvasRenderingContext2D图形的绘图处理类,该类提供绘图相关\n * 的方法和控制，但是具体路径的绘制则由具体图形负责。 该类可以说仅仅是一个代\n * 理\n * @class\n * @abstract\n */\nclass ContextView extends View {\n\n    /**\n     * @param {String} type  元素类型. 该类型默认为ContextView\n     * @param {Object} option  实例的具体参数\n     * @constructor\n     */\n    constructor(type = \"ContextView\", option = {}) {\n        super(type, option);\n\n        this.configProxy = new OptionProxy(this.defaultConfig, option);\n\n        /**\n         * 绘图实例，用于调用实例的刷新方法\n         * 在元素被添加到ychart实例的时候设置\n         * @member {object}\n         * @private\n         */\n        this.__yh = null;\n\n        Transform.call(this, option);\n        Eventful.call(this);\n    }\n\n    /**\n     * 每个具体元素类的默认配置。\n     * 该配置将覆盖全局系统默认配置，但是会被全局用户自定义配置以及具体元素配置所覆盖\n     * @property {Object}  config  元素默认配置\n     * @default {style:{}}\n     */\n    // static defaultConfig = {\n    // style:{\n    // }\n    // }\n\n\n    /**\n     * 是否使用直角座标系，除了图片和文字，其他字体默认都是以\n     * 左下角为原点的座标系\n     * @property {number} coordinate o为正常形状的直角座标系，1为图片或者文字的直角座标系。 其他值使用默认座标系\n     * @default 图片或文字为1，其他元素为0\n     */\n/*\n    get coordinate() {\n        return this.configProxy.getConfig().coordinate;\n    }\n*/\n\n    set coordinate(val) {\n        this.configProxy.update({\n            coordinate: val\n        });\n    }\n\n    /**\n     *\n     * @property {boolean} Draggable 当前元素是否可以拖动\n     * @default true\n     */\n    get draggable() {\n        return this.config.draggable === undefined ? true : this.config.draggable;\n    }\n\n    /**\n     * 当前元素的层级。层级决定了当前元素将被绘制在第几层canvas上\n     * @property {Number} zLevel\n     * @default 0\n     */\n    get zLevel() {\n        return this.config.zLevel || 0;\n    }\n\n    /**\n     * @property {Object} config 获取当前shapa的配置项\n     * @returns {Object}\n     */\n    get config() {\n        return this.configProxy.getConfig();\n    }\n\n    /**\n     * @property {boolean} getable 当前元素是否捕获事件。\n     * @default true\n     * @return boolean\n     */\n    get getable() {\n        return typeof this.config.getable === \"undefined\" ? true : this.config.getable;\n    }\n\n    /**\n     * 重绘整个ychart实例. 通常用于元素位置改变\\图片加载完成过后\n     */\n    RebrushAll() {\n        this.__yh && this.__yh.update();\n    }\n\n    /**\n     * 绘图元素在把内容绘制到context之前调用的函数\n     * @method\n     * @param {CanvasRenderingContext2D} ctx\n     */\n    /* eslint-disable */\n    BeforeBrush(ctx, config) {}\n\n    /**\n     * 绘图元素在把内容绘制到context之后调用的函数\n     * @method\n     * @param {CanvasRenderingContext2D} ctx\n     */\n    AfterBrush(ctx, config) {}\n\n    /**\n     * 获取当前元素的包围圈。\n     * @return {Array.<Number>} 返回rect数组\n     */\n    GetContainRect() {\n            return this.rect;\n        }\n        /*eslint-enable */\n\n    /**\n     * 绘图元素在把内容绘制到context之前调用的函数\n     * @method\n     * @private\n     * @param {CanvasRenderingContext2D} ctx\n     */\n    _BeforeBrush(ctx, config) {\n        ctx.save();\n\n        this._SetShapeTransform(ctx, config);\n\n        this.configProxy.bindContext(ctx);\n\n        this.BeforeBrush(ctx, config);\n\n        ctx.beginPath();\n    }\n\n    /**\n     * 设置绘图变换\n     * @method\n     * @private\n     * @param {CanvasRenderingContext2D} ctx\n     */\n    _SetShapeTransform(ctx) {\n\n        this.updateTransform();\n\n        this.setTransform(ctx);\n\n    }\n\n    /**\n     * 通过上下文获取绘图的canvas尺寸\n     * @param {CanvasRenderingContext2D} ctx\n     */\n    getRectByCtx(ctx) {\n        return getRectByCtx(ctx);\n    }\n\n    /**\n     * 绘图元素在把内容绘制到context之后调用的函数\n     * @method\n     * @private\n     * @param {CanvasRenderingContext2D} ctx\n     */\n    _AfterBrush(ctx, config) {\n        var tp = this.configProxy.getBrushType();\n        /* eslint-disable */\n        switch (tp) {\n            case \"both\":\n            case \"all\":\n                ctx.fill();\n                ctx.stroke();\n                break;\n            case \"stroke\":\n                ctx.stroke();\n                break;\n            case \"fill\":\n                ctx.fill();\n                break;\n            case \"none\":\n                break;\n            default:\n                ctx.fill();\n                break;\n        }\n        /* eslint-enable */\n        ctx.restore();\n\n        this.AfterBrush(ctx, config);\n    }\n\n    /**\n     * 具体绘制路径的接口函数。 具体绘图子类必须实现该方法\n     * @abstract\n     * @param {CanvasRenderingContext2D} ctx\n     * @param {object} config --配置。\n     */\n    /* eslint-disable*/\n    BuildPath(ctx, config) {\n            //设置合适的填充方法\n            throw new Error(\" unsurported operation -- can't build shape path\");\n        }\n    /* eslint-enable */\n\n    /**\n     * 绘制的接口。 绘制该元素必须调用该方法\n     * @method\n     * @param {CanvasRenderingContext2D} ctx\n     */\n    Brush(ctx) {\n        var config = this.config;\n        if (!config.ignore) {\n            //设置样式\n            this._BeforeBrush(ctx, config);\n            //具体图形自己的定制\n            this.BuildPath(ctx, config);\n            //恢复事故现场\n            this._AfterBrush(ctx, config);\n\n            this.DrawText(ctx, config);\n        }\n    }\n\n    /**\n     * 设置元素配置项。 调用该方法会导致该元素被标记为脏，下一次重新页面刷新时将清楚该元素所在层并且重新绘制\n     * @param {object} option\n     */\n    setOption(option) {\n        this.configProxy.update(option);\n        this.__dirty = true;\n    }\n\n    /**\n     * 判断点是否在当前元素内.该方法会首先通过\n     * @see {GetContainRect} 方法判断,然后调用 @see {_isPtInPath} 方法\n     * @param {Number} x   x座标\n     * @param {Number} y   y座标\n     */\n    contain(x, y) {\n        var local = this.transformCoordToLocal(x, y);\n        //当前元素的containRect作为缓存, 鼠标应该首先在该范围内才继续判断\n        return this.getable &&\n            (isPtInRect(this.GetContainRect(), local[0], local[1]) &&\n                this._isPtInPath(x, y));\n    }\n\n    /**\n     * 通过路径绘制来判断点是否在元素上\n     * @param x\n     * @param y\n     * @private\n     */\n    _isPtInPath(x,y){\n        return isPtInPath(this, this.config, x, y);\n    }\n\n    /**\n     * 绘制文字\n     * @param {CanvasRenderingContext2D} ctx\n     * @param {object} config --绘制配置\n     */\n    DrawText(ctx, config) {\n        if (!config.text) {\n            return;\n        }\n        var crect = this.GetContainRect();\n        if (!crect) {\n            return;\n        }\n        var x = crect[0] + (crect[2] - crect[0]) / 2;\n        var y = crect[1] + (crect[3] - crect[1]) / 2;\n\n        var st = this.configProxy.getStyle();\n        /* eslint-disable */\n        var textw = text.getTextWidth(config.text, st.font);\n        var texth = text.getTextHeight(config.text ,st.font);\n        var textAlign = st.textAlign , textBaseline = st.textBaseline;\n        switch (config.textpos) {\n            case \"bottom-center\":\n                y = crect[1];\n                textAlign = \"center\";\n                break;\n            case \"top-left\":\n            case \"left-top\":\n                x = crect[0];\n                y = crect[1];\n                break;\n            case \"bottom-right\":\n            case \"right-bottom\":\n                x = crect[2] - textw;\n                y = crect[1];\n                break;\n            case \"left-center\":\n                x = crect[0];\n                textAlign = \"left\";\n                textBaseline = \"middle\";\n                break;\n            case \"left-bottom\":\n            case \"bottom-left\":\n                x = crect[0];\n                y = crect[3];\n                break;\n            case \"top-center\":\n                y = crect[3];\n                textAlign = \"center\";\n                textBaseline = \"top\";\n                // x -= textw/2;\n                break;\n            case \"top-right\":\n            case \"right-top\":\n                y = crect[3];\n                x = crect[2]-textw;\n                break;\n            case \"right-center\":\n                x = crect[2]-textw;\n                y -= texth/2;\n                break;\n            default:\n                textAlign = \"center\";\n                textBaseline = \"middle\";\n                // x -= textw/2;\n                // y -= texth/2;\n                // st.textBaseline = \"top\";\n        }\n        /* eslint-disable */\n        ctx.save();\n        //文字颜色\n        if (st.textColor) {\n            ctx.fillStyle = st.textColor;\n        }\n        //文字的变换与图形不一样，默认情况下就是正向的，特别处理\n        var globalTextPos = this.transformCoordToGlobal(x,y);\n        x = globalTextPos[0] ,y=globalTextPos[1];\n\n        text.fillText(ctx, config.text, x, y, st.font, textAlign, textBaseline);\n\n        ctx.restore();\n    }\n}\n\n\nmixin(ContextView, Transform, true);\nmixin(ContextView, Eventful, true);\nmixin(ContextView, Moveable, true);\n\nexport default ContextView;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/graphic/contextView.js","/**\n * 配置代理类。 内部依赖 {@link module:ychart/core/config/styleProxy}\n * @module ychart/core/config/optionProxy\n */\n\n\nimport styleProxy from \"./StyleProxy\"\n\nimport {\n    DEFAULT_CONFIG,\n    useRectangularCoordinateSystem\n} from \"./config\"\n\nimport {\n    checkNull,\n    merge\n} from \"../../tool/util\"\n/**\n * 每个可绘制元素的配置代理类\n * 每个可绘制元素的配置项管理类。 该类将管理每个元素绘制需要的各项属性，其中，\n * 样式采用styleProxy代理管理。 应该为样式有别名及默认样式。\n *\n * @class\n * @param config\n */\nvar OptionProxy = function(...option) {\n    /**\n     * 配置代理\n     * @member {boolean}\n     * @default null\n     */\n    this.styleProxy = new styleProxy();\n\n\n    /**\n     * 实际配置\n     * 每个绘图元素的所有配置项。 其中 style 这个项表示所有样式相关。 独立处理\n     * @member {object}\n     */\n    this.config = {\n    };\n\n    var _this = this;\n    Object.defineProperty(this.config , \"style\" ,{\n        enumerable : true,\n        configurable : false,\n        get: function(){\n            return _this.styleProxy.getStyle()\n        },\n        set: function (val) {\n            _this.styleProxy.update(val);\n        }\n    });\n\n    this.init(option);\n};\n\n\n/**\n * 初始化样式管理类。 设置该元素绘制必须的样式\n * @param config\n */\nOptionProxy.prototype.init = function(configs) {\n    merge(this.config, configs, true)\n    console.log(this.config);\n   /* var config = {};\n    merge(config, configs, true)\n    for (let item in config) {\n        if (item) {\n            this.config[item] = config[item];\n        }\n    }*/\n\n    /*for (let item in config) {\n        if (item) {\n            if (item != \"style\") {\n                this.config[item] = config[item];\n            } else {\n                this.styleProxy = new styleProxy(config[item]);\n            }\n        }\n    }\n\n\n    this.config.style = this.styleProxy.getStyle();*/\n};\n\n/**\n * 获取所有配置\n * @returns {object} config\n */\nOptionProxy.prototype.getConfig = function(width, height) {\n    return this.config;\n};\n\n/**\n * 获取样式\n * @returns {OptionProxy.config.style|{}}\n */\nOptionProxy.prototype.getStyle = function() {\n    return this.config.style || {};\n};\n\n/**\n * 绑定当前样式到指定的上下文\n * @param context\n */\nOptionProxy.prototype.bindContext = function(context) {\n    this.styleProxy.bindContext(context);\n};\n\n/**\n * 获取画刷类型。 自动基于属性选择是填充还是描边\n * @param context\n */\nOptionProxy.prototype.getBrushType = function(context) {\n    return this.styleProxy.getBrushType();\n};\n\n/**\n * 更新数据\n * @param option\n */\nOptionProxy.prototype.update = function(config) {\n    for (item in config) {\n        if (item) {\n            if (item != \"style\") {\n                this.config[item] = config[item];\n            } else {\n                this.styleProxy.update(config[item]);\n            }\n        }\n    }\n    this.config.style = this.styleProxy.getStyle();\n};\n\n\nexport default OptionProxy;\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/config/OptionProxy.js","/**\n * 样式代理类。\n *\n */\nimport {isObj, merge} from \"../../tool/util\"\nimport Style from \"./style\"\n\nvar defaultStyle = Style.style;\nvar styleMapper = Style.styleMap;\n\n/**\n * 样式代理类 ，在合并样式时会出现覆盖的情况\n * @class\n */\nvar StyleProxy = function (style) {\n    style = style || {};\n    this.style = merge(new defaultStyle(), style, true, styleMapper);\n    this.brushType = null;\n    this.init(style);\n};\n\nStyleProxy.prototype.init = function (style) {\n    this.brushType = style.brushType ? style.brushType :\n        (style.strokeStyle ?\n            (style.fillStyle ? 'both' : 'stroke') :\n            (style.fillStyle ? \"fill\" : \"none\")    );\n};\n\nStyleProxy.prototype.bindContext = function (ctx) {\n    var style = this.style;\n    for (var prop in this.style) {\n        ctx[prop] = this.style[prop];\n    }\n    // 渐变效果覆盖其他的fillStyle样式\n    if (isObj(style.gradient)) {\n        var _gradient = ctx.createLinearGradient(style.gradient.beginpt[0], style.gradient.beginpt[1],\n            style.gradient.endpt[0], style.gradient.endpt[1]);\n\n        _gradient.addColorStop(0, style.gradient.beginColor);\n        _gradient.addColorStop(1, style.gradient.endColor);\n        ctx.fillStyle = _gradient;\n    }\n};\n\nStyleProxy.prototype.update = function (_style) {\n    if (_style) {\n        merge(this.style, _style, true, styleMapper);\n        this.init(_style);\n    }\n};\n\nStyleProxy.prototype.getBrushType = function (style) {\n    return this.brushType;\n};\n\nStyleProxy.prototype.getStyle = function () {\n    return this.style;\n};\n\nexport default StyleProxy;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/config/StyleProxy.js","/**\n * 样式名映射\n * @module ychart/core/config/style\n */\nvar styleMap = {\n\n    fillStyle: \"fillStyle\",\n    fillColor: \"fillStyle\",\n    color: \"fillStyle\",\n\n    strokeStyle: \"strokeStyle\",\n    lineColor: \"strokeStyle\",\n    lineWidth: \"lineWidth\",\n    lineCap: \"lineCap\",\n    lineJoin: \"lineJoin\",\n    font: \"font\",\n\n    textAlign: \"textAlign\",\n    textBaseline: \"textBaseline\",\n\n    shadowColor: \"shadowColor\",\n    shadowOffsetX: \"shadowOffsetX\",\n    shadowOffsetY: \"shadowOffsetY\",\n    shadowBlur: \"shadowBlur\",\n    shadowx: \"shadowOffsetX\",\n    shadowy: \"shadowOffsetY\",\n\n    globalAlpha: \"globalAlpha\",\n    alpha: \"globalAlpha\",\n    globalCompositionOperation: \"globalCompositionOperation\",\n    overlaystyle: \"globalCompositionOperation\"\n};\n\n\n/**\n * @classdesc 全局默认样式。 所有形状或者路劲的样式都基于这个样式。\n * 负责为所有模块提供默认样式及自定义样式名到标准样式名的转换\n * 映射配置属性名到canvas属性.\n * 应该包含默认的属性名\n * 新加一个属性在这个映射和下面CONFIG中的style中同时添加\n * @class\n */\nvar style = function () {\n};\n\n\nstyle.prototype = {\n    /**\n     * 线条颜色，用于任意路劲绘制中线条样式的控制。\n     * 值可以是任意十六进制颜色或者英文单词\n     * 别名 : lineColor\n     * @type string\n     * @default blue\n     */\n    strokeStyle: \"blue\",\n\n    /**\n     * 填充颜色，用于任意路劲中fill方法的填充样式\n     * 值可以是任意十六进制颜色或者英文单词\n     * 别名 ： fillColor  color\n     * @type string\n     * @default #dcd5d9\n     */\n    fillStyle: \"#dcd5d9\",\n\n    /**\n     * 线宽。\n     * @type number\n     * @default 1\n     */\n    lineWidth: 1,\n\n    /**\n     * 线条两端样式. butt、round、square\n     * @type string\n     * @default round\n     */\n    lineCap: \"round\",\n\n    /**\n     * bevel,miter线条相交的方式. 园交,斜交还是斜接.\n     * @type string\n     * @default round\n     */\n    lineJoin: \"round\",\n\n    /**\n     * 文字\n     * @type string\n     * @default bold 14px Arial, Helvetica, sans-serif, Times, serif\n     */\n    font: \"bold 14px Arial, Helvetica, sans-serif, Times, serif\",\n\n    /**\n     * 文字颜色。 strokeStyle\n     * 该属性不是标准的canvas样式，是ycharts为方便文字控制添加的\n     * @type string\n     * @default black\n     */\n    textColor: \"black\", //文字样式。 非标准canvas属性\n\n    /**\n     * 文本对齐方式\n     * @type string\n     * @default start\n     */\n    textAlign: \"start\",\n\n    /**\n     * 文本基线\n     * @type string\n     * @default bottom\n     */\n    textBaseline: \"bottom\",\n\n    /**\n     * 默认阴影颜色\n     * @type string\n     * @default #EA9090\n     */\n    shadowColor: \"#EA9090\",\n\n    /**\n     * 阴影X偏移\n     * @type number\n     * @default  shadowOffsetX\n     */\n    shadowOffsetX: 0,\n\n    /**\n     * 阴影Y偏移\n     * @type number\n     * @default shadowOffsetY\n     */\n    shadowOffsetY: 0,\n\n    /**\n     * 像素的模糊数\n     * @type number\n     * @default 0\n     */\n    shadowBlur: 0,\n\n    /**\n     * 透明度。  0为透明\n     * @type number\n     * @default 1\n     */\n    globalAlpha: 1,\n\n    /**\n     * 透明重叠情况\n     * @type string\n     * @default source-over\n     */\n    globalCompositionOperation: \"source-over\"\n\n};\n\n\nexport default {\n    style: style,\n    styleMap: styleMap\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/config/style.js","//使用默认样式\n\nimport Style from \"../../config/style\"\nimport {\n    getContext\n} from \"./viewutil\"\n\nvar st = new Style.style();\n\nvar defaultFont = st.font;\nvar defaultAlign = st.textAlign;\nvar defaultBaseline = st.textBaseline;\n\nvar _ctx = getContext();\n\nvar TextUtil = {\n    TEXT_CACHE_MAX: 5000,\n\n    _textHeightCache: [],\n    _textHeightCacheCounter: 0,\n\n    getTextHeight: function(text, textFont) {\n        textFont = textFont || defaultFont;\n        var key = text + ':' + textFont;\n        if (TextUtil._textHeightCache[key]) {\n            return TextUtil._textHeightCache[key];\n        }\n\n        _ctx.save();\n        if (textFont) {\n            _ctx.font = textFont;\n        }\n\n        text = (text + '').split('\\n');\n        // 比较粗暴\n        var height = (_ctx.measureText('国').width + 2) * text.length;\n\n        _ctx.restore();\n\n        TextUtil._textHeightCache[key] = height;\n        if (++TextUtil._textHeightCacheCounter > TextUtil.TEXT_CACHE_MAX) {\n            // 内存释放\n            TextUtil._textHeightCacheCounter = 0;\n            TextUtil._textHeightCache = {};\n        }\n        return height;\n    },\n    _textWidthCache: [],\n    _textWidthCacheCounter: 0,\n\n    getTextWidth: function(text, textFont) {\n\n        textFont = textFont || defaultFont;\n        var key = text + ':' + textFont;\n        if (TextUtil._textWidthCache[key]) {\n            return TextUtil._textWidthCache[key];\n        }\n        _ctx.save();\n\n        if (textFont) {\n            _ctx.font = textFont;\n        }\n\n        text = (text + '').split('\\n');\n        var width = 0;\n        for (var i = 0, l = text.length; i < l; i++) {\n            width = Math.max(\n                _ctx.measureText(text[i]).width,\n                width\n            );\n        }\n        _ctx.restore();\n\n        TextUtil._textWidthCache[key] = width;\n        if (++TextUtil._textWidthCacheCounter > TextUtil.TEXT_CACHE_MAX) {\n            // 内存释放\n            TextUtil._textWidthCacheCounter = 0;\n            TextUtil._textWidthCache = {};\n        }\n\n        return width;\n    },\n    /*\n     * @param {Canvas} ctx 绘图上下文\n     * @param {string} text 要获取矩形范围的文字\n     * @param {number} x 绘制文字起始X座标\n     * @param {number} y 绘制文字起始Y座标\n     * @param {string} textFont 字体\n     */\n    getTextRect: function(text, x, y, textFont, textAlign, textBaseline) {\n\n        textFont = textFont || defaultFont;\n        textAlign = textAlign || defaultAlign;\n        textBaseline = textBaseline || defaultBaseline;\n\n        var width = TextUtil.getTextWidth(text, textFont);\n        var lineHeight = TextUtil.getTextHeight('国', textFont);\n\n        text = (text + '').split('\\n');\n\n        switch (textAlign) {\n            case 'end':\n            case 'right':\n                x -= width;\n                break;\n            case 'center':\n                x -= (width / 2);\n                break;\n        }\n\n        switch (textBaseline) {\n            case 'top':\n                break;\n            case 'bottom':\n                y -= lineHeight * text.length;\n                break;\n            default:\n                y -= lineHeight * text.length / 2;\n        }\n\n        return {\n            x: x,\n            y: y,\n            width: width,\n            height: lineHeight * text.length\n        };\n    }\n};\n\n\nfunction _fillText(ctx, text, x, y, textFont, textAlign, textBaseline) {\n    if (textFont) {\n        ctx.font = textFont;\n    }\n    ctx.textAlign = textAlign;\n    ctx.textBaseline = textBaseline;\n\n    var rect = TextUtil.getTextRect(\n        text, x, y, textFont, textAlign, textBaseline\n    );\n\n    text = (text + \"\").split(\"\\n\");\n\n    var lineHeight = TextUtil.getTextHeight(\"国\", textFont);\n\n    switch (textBaseline) {\n        case \"top\":\n            y = rect.y;\n            break;\n        case \"bottom\":\n            y = rect.y + lineHeight;\n            break;\n        default:\n            y = rect.y + lineHeight / 2;\n    }\n\n    for (var i = 0, l = text.length; i < l; i++) {\n        ctx.fillText(text[i], x, y);\n        y += lineHeight;\n    }\n}\n\nexport default {\n    fillText: _fillText,\n    getTextRect: TextUtil.getTextRect,\n    getTextWidth: TextUtil.getTextWidth,\n    getTextHeight: TextUtil.getTextHeight\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/graphic/helper/text.js","//isPointInStroke在IE下失效，但是由于仅需修复一次，所以写在这里\nif (typeof CanvasRenderingContext2D.prototype.isPointInStroke == \"undefined\") {\n    CanvasRenderingContext2D.prototype.isPointInStroke = function(path, x, y) {\n        return this.isPointInPath(x, y);\n    };\n}\n\nvar _ctx = null;\n\nfunction createCanvas() {\n    return document.createElement(\"canvas\");\n}\n\nexport var getContext = function() {\n    if (!_ctx) {\n        _ctx = createCanvas().getContext(\"2d\");\n    }\n    return _ctx;\n};\n\nexport var isPtInRect = function(rect, x, y) {\n    return rect && (rect[0] <= x &&\n                    rect[2] >= x &&\n                    rect[1] <= y &&\n                    rect[3] >= y);\n};\n\n//todo 这种方式判断鼠标是否在形状内效率不高。改进\nexport var isPtInPath = function(shape, config, x, y) {\n    var ctx = getContext();\n    ctx.save();\n    //设置变换\n    shape._BeforeBrush(ctx, config);\n    //建立路径\n    shape.BuildPath(ctx, config);\n    var rs;\n    var type = shape.configProxy.getBrushType();\n    //对于填充和边线+填充的图形调用isPointInPath方法\n    if (type == \"all\" || type == \"fill\") {\n        rs = ctx.isPointInPath(x, y);\n    } else {\n        rs = ctx.isPointInStroke(x, y);\n    }\n    ctx.restore();\n    return rs;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/graphic/helper/viewutil.js","/**\n * 圆形\n * @module ychart/shape/Circle\n */\n\nimport ShapeBuilder from \"../core/viewBuilder\";\n\n/**\n * 圆形\n * @class Circle\n * @property {number} x 圆心x坐标\n * @property {number} y 圆心y坐标\n * @property {number} r 半径\n * @constructor Circle\n * */\nexport default ShapeBuilder.baseContextViewExtend({\n\n    /**\n     * 构造函数 。 在构造函数中指定该图像的中心点\n     * @param {object} option  绘制形状的配置\n     * @private\n     */\n    Init: function (config) {\n        this.origin = [config.x,config.y];\n    },\n\n    type: \"circle\",\n\n    BuildPath: function (ctx, config) {\n        ctx.arc(config.x, config.y, config.r, Math.PI * 2,\n            config.startangel || 0, config.endangel || Math.PI * 2);\n    },\n\n    GetContainRect: function(){\n        var config = this.config;\n        if(this.dirty || !this.rect){\n            this.rect = [config.x - config.r,config.y-config.r ,config.x+config.r,config.y+config.r];\n        }\n        return this.rect;\n    }\n\n});\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/shape/Circle.js","/**\n * 直线\n * @module ychart/shape/Line\n */\nimport ShapeBuilder from \"../core/viewBuilder\";\n\n/**\n * 直线形状类\n * @class Line\n * @property {number} x0 , y0 开始点\n * @property {number} x1 ,y1 结束点\n * @property {number} splitnum  如果是虚线，分成多少段.\n * @constructor Line\n * @extends ContextView\n */\nexport default ShapeBuilder.baseContextViewExtend({\n\n    type: \"Line\",\n\n    BuildPath: function(ctx, config) {\n        if (config.splitnum) {\n            var splitnum = config.splitnum || 1;\n            var splitlen_x = (config.x1 - config.x0) / splitnum / 2;\n            var splitlen_y = (config.y1 - config.y0) / splitnum / 2;\n            for (var i = 0; i < splitnum; i++) {\n                ctx.moveTo(config.x0 + i * 2 * splitlen_x, config.y0 + i * 2 * splitlen_y);\n                ctx.lineTo(config.x0 + i * 2 * splitlen_x + splitlen_x, config.y0+ i * 2 * splitlen_y + splitlen_y);\n            }\n        } else {\n            ctx.moveTo(config.x0, config.y0);\n            ctx.lineTo(config.x1, config.y1);\n        }\n        this.rect = [config.x0 , config.y0 ,config.x1,config.y1];\n    }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/shape/Line.js","/**\n * 不规则多边形\n * @module ychart/shape/Rect\n */\n\nimport ShapeBuilder from \"../core/viewBuilder\";\n\nvar minx = 99999,\n    miny = 99999,\n    maxx = -99999,\n    maxy = -99999;\n\n/**\n * @class Rect\n * @classdesc 不规则多边形. 需指定所有的点坐标\n * @property  {Array.number}  allpt [[0,0],[10,10]]这样的点的数组\n * @property  {boolean} notClose 是否是不闭合的多边形.默认闭合\n * @constructor Rect\n */\nexport default ShapeBuilder.baseContextViewExtend({\n\n    type: \"Rect\",\n\n    BuildPath: function(ctx, config) {\n        ctx.moveTo(config.pts[0][0], config.pts[0][1]);\n        for (var i = 1; i < config.pts.length; i++) {\n            ctx.lineTo(config.pts[i][0], config.pts[i][1]);\n        }\n        if (!config.notClose) {\n            ctx.closePath();\n        }\n    },\n\n    GetContainRect: function() {\n        if (!this.rect) {\n\n            var i = 0,\n                tmp;\n            for (i = 0; i < this.config.pts.length; i++) {\n                tmp = this.config.pts[i];\n                if (tmp[0] < minx) {\n                    minx = tmp[0];\n                }\n                if (tmp[1] < miny) {\n                    miny = tmp[1];\n                }\n                if (tmp[0] > maxx) {\n                    maxx = tmp[0];\n                }\n                if (tmp[1] > maxy) {\n                    maxy = tmp[1];\n                }\n            }\n            this.rect = [minx , miny ,maxx ,maxy];\n        }\n        return this.rect;\n    }\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/shape/Rect.js","/**\n * 三角形\n * @module ychart/shape/Triangle\n */\nimport ShapeBuilder from \"../core/viewBuilder\";\n\n/**\n * 三角形\n * @class Triangle\n * @property {number} beginpt 开始座标\n * @property {number} width  三角形的宽\n * @property {number} height 三角形的高\n * @property {number} direction bottom 为向下。 默认向上\n * @constructor Triangle\n */\nexport default ShapeBuilder.baseContextViewExtend({\n\n    type: \"triangle\",\n\n    BuildPath: function(ctx, config) {\n        ctx.moveTo(config.beginpt[0], config.beginpt[1]);\n        ctx.lineTo(config.beginpt[0] + config.width, config.beginpt[1]);\n        var pt = [config.beginpt[0] + config.width / 2, config.beginpt[1] + config.height];\n        //向下的三角形\n        if (config.direction == \"bottom\") {\n            pt[1] = config.beginpt[1] - config.height;\n        }\n        ctx.lineTo(pt[0], pt[1]);\n        ctx.lineTo(config.beginpt[0], config.beginpt[1]);\n        config.style.brushType = config.style.brushType || \"stroke\";\n    }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/shape/Triangle.js","/**\n * 文字\n * @module ychart/shape/Text\n */\nimport {\n    checkNull\n} from \"../tool/util\";\nimport utext from \"../core/graphic/helper/text\";\nimport ShapeBuilder from \"../core/viewBuilder\";\n/**\n * 文本\n * 由于文本显示与图像刚好是竖向完全相反的两个方向，所以对文本绘制特殊处理。\n * 某区域文本是直角座标系，但是文字实际上还是默认的座标系，不过Y被改成负数了\n * @class Text\n * @property {string} text 显示的文字\n * @property {Array.number} beginpt 开始座标\n * @constructor YText\n */\nexport default ShapeBuilder.baseContextViewExtend({\n    defaultConfig: {\n        coordinate: 1\n    },\n\n    type: \"Text\",\n\n    BuildPath: function(ctx, config) {\n        config.style.brushType = \"none\";\n    },\n\n    DrawText: function(ctx, config) {\n        if (checkNull(config.text)) {\n            return;\n        }\n        ctx.save();\n\n        //文字颜色\n        if (!checkNull(config.style.textColor)) {\n            ctx.fillStyle = config.style.textColor;\n        }\n\n        var rect = this.getRectByCtx(ctx);\n\n        var y = rect[1] - config.dy;\n\n        if (this.coordinate == -1) {\n            y = config.dy;\n        }\n\n        var textparams = [config.text, config.dx, y, config.style.font, config.style.textAlign, config.style.textBaseline];\n\n        utext.fillText(ctx, textparams[0], textparams[1], textparams[2], textparams[3], textparams[4], textparams[5]);\n\n        //设置文本的包围圈\n        if (this.__dirty || !this.containRect) {\n            let textrect = utext.getTextRect(textparams[0], textparams[1], textparams[2], textparams[3], textparams[4], textparams[5]);\n            this.containRect = [textrect.x, textrect.y, textrect.x + textrect.width, textrect.y + textrect.height];\n        }\n\n        ctx.restore();\n    },\n\n    GetContainRect: function() {\n        return this.containRect;\n    }\n\n    /* IsPtInPath: function(){\n        return true;\n    } */\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/shape/YText.js","/**\n * 图片\n * @module ychart/shape/Image\n */\nimport ShapeBuilder from \"../core/viewBuilder\";\nimport {\n    isArr,\n    checkNull\n} from \"../tool/util\";\n\nimport {\n    onImgReady\n} from \"../tool/lang\";\n\n/**\n * 图形形状类\n * @class Image\n * 该元素可以如下三种构造方法:\n *  <br>(image, dx, dy);\n *  <br>(image, dx, dy, dWidth, dHeight);\n *  <br>(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);\n *  分别对应着按照图片的默认尺寸绘制\\ 指定目标位置和尺寸\\ 指定截取图片上的某一块绘制到目标对象上的某个位置\n * @property {HTMLImage} image 图形的HTMLImage对象， 注意不能是通过DOM获取的对象。 可以通过新建一个Image对象\n * @property {String} imagesrc 图形的src属性， 注意必须和Ychart同源,否则会由于浏览器的安全限制而报错. 与image属性同时存在时Image属性有效\n * @property {number} dx 绘制该图形在画布上的起点X  默认0\n * @property {number} dy 绘制该图形在画布上的起点Y  默认0\n * @property {number} dWidth 绘制该图形在画布上的宽度  默认不指定\n * @property {number} dHeight 绘制该图形在画布上的宽度  默认不指定\n * @property {number} sx 绘制该图形在图像上的起点X  默认不指定\n * @property {number} sy 绘制该图形在图像上的起点Y  默认不指定\n * @property {number} sWidth 绘制该图形在图像上的宽度  默认不指定\n * @property {number} sHeight 绘制该图形在图像上的宽度  默认不指定\n * @property {Object} style 样式.\n * @constructor Image\n * @extends ContextView\n */\nexport default ShapeBuilder.baseContextViewExtend({\n\n    /**\n     * 构造函数 。 在构造函数中指定该图像的中心点\n     * @param {object} option  绘制形状的配置\n     * @private\n     */\n    Init: function(config) {\n        this.origin = this.origin || [];\n        //由于引入了异步加载图片的机制，获取图片的大小在图片还没有实际加载的时候也就无法执行\n        if (typeof config.image != \"string\") {\n            this.image = config.image;\n            this.__setOrigin(this.image);\n        } else {\n            this.image = new Image();\n            let _this = this;\n            this.image.onload = function() {\n                this.image = null;\n                _this.__setOrigin(_this.image);\n            };\n            this.image.src = config.image;\n        }\n    },\n\n    /**\n     * 设置图片放大缩小的中心座标。 由于依赖于已经加载的图片，所以单独列出来\n     * @private\n     */\n    __setOrigin: function(image) {\n        var config = this.config;\n        var rect = [];\n        if (config.dWidth && config.dHeight) {\n            this.origin[0] = config.dx || 0 + config.dWidth / 2;\n            this.origin[1] = rect[1] - config.dy || 0 + config.dHeight / 2;\n        } else {\n            this.origin[0] = config.dx || 0 + image.width / 2;\n            this.origin[1] = rect[1] - config.dy || 0 + image.height / 2;\n        }\n    },\n\n    type: \"Image\",\n\n    /**\n     * 绘制图片。 必须注意的图片同其他形状一样默认以左下角为起点。\n     * 但是由于这是通过容器canvas大小和目标图像的高度计算得来，在\n     * 和其他形状配合使用时遇到变化可能会出现问题。 此时就需要设置\n     * coordinate属性为-1，使得绘图片还是以左上角为原点.\n     * @private\n     */\n    BuildPath: function(ctx, config) {\n        var buildImagePath1 = function() {\n            var image = this.image || config.image;\n            if (image) {\n                numberOrZero(config, [\"dx\", \"dy\", \"sx\", \"sy\"]);\n                let dy = config.dy;\n                let sWidth = config.sWidth || image.width;\n                let sHeight = config.sHeight || image.height;\n                let dWidth = config.dWidth || image.width;\n                let dHeight = config.dHeight || image.height;\n                /*if (this.coordinate == 1) {\n                    let rect = this.getRectByCtx(ctx);\n                    dy = rect[1] - dHeight - dy;\n                }*/\n                //图片的目标位置应该是图片的左下角, 在笛卡尔坐标系中就应该加上图片的目标高度\n                dy += dHeight;\n                ctx.drawImage(image, config.sx, config.sy, sWidth, sHeight, config.dx, dy, dWidth, dHeight);\n                this.rect = [config.dx, dy, config.dx + dWidth, dy + dHeight];\n            }\n        };\n        onImgReady(this, this.image, [buildImagePath1, function() {\n            this.RebrushAll();\n        }]);\n    },\n\n    _isPtInPath: function(x,y){\n        return true;\n    }\n});\n\nfunction numberOrZero(obj, fields) {\n    if (isArr(fields)) {\n        fields.forEach(field => {\n            obj[field] = (checkNull(obj[field]) || isNaN(obj[field])) ? 0 : obj[field];\n        });\n    } else {\n        obj[fields] = (checkNull(obj[fields]) || isNaN(obj[fields])) ? 0 : obj[fields];\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/shape/Image.js","/**\n *动画效果模块\n * @module ychart/animation\n */\n\nvar requestAnimFrame = (window !== undefined &&\n    (window.requestAnimationFrame\n    || window.webkitRequestAnimationFrame\n    || window.mozRequestAnimationFrame\n    || window.oRequestAnimationFrame\n    || window.msRequestAnimationFrame))\n    || function (callback) {\n        window.setTimeout(callback, 1000 / 60);\n    };\n\nvar Nop = function () {\n    return true;\n};\n\n/**\n * @function\n * @description 动画控制函数\n * @param option\n */\nvar animate = function (option) {\n    var onBegin = option.onBegin || Nop,\n        onChanging = option.onChanging || Nop,\n        onEnd = option.onEnd || Nop,\n        beginDelay = option.beginDelay || 0;\n\n    (function frame(beginResult) {\n        if (onEnd()) {\n            return;\n        }\n        onChanging(beginResult);\n\n        requestAnimFrame(frame);\n    })(function(){\n        setTimeout(onBegin,beginDelay);\n    }());\n};\n\nexport default {\n    animate: animate\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/animation/animation.js"],"sourceRoot":""}