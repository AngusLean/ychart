{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 13edad3b8a641d0ddcb5","webpack:///./src/index.js","webpack:///./src/Ycharts.js","webpack:///./src/Storage.js","webpack:///./src/tool/util.js","webpack:///./src/Group.js","webpack:///./src/tool/klass.js","webpack:///./src/core/graphic/mixin/transform.js","webpack:///./src/core/graphic/mixin/helper/matrix.js","webpack:///./src/core/graphic/mixin/helper/vector.js","webpack:///./src/core/graphic/mixin/moveable.js","webpack:///./src/core/graphic/element.js","webpack:///./src/tool/guid.js","webpack:///./src/Painter.js","webpack:///./src/Layer.js","webpack:///./src/tool/dom.js","webpack:///./src/Reactor.js","webpack:///./src/tool/event.js","webpack:///./src/core/graphic/mixin/draggable.js","webpack:///./src/core/graphic/mixin/eventful.js","webpack:///./src/core/config/config.js","webpack:///./src/core/graphic/htmlView.js","webpack:///./src/core/graphic/view.js","webpack:///./src/tool/lang.js","webpack:///./src/shape/Bezier.js","webpack:///./src/tool/debug.js","webpack:///./src/core/viewBuilder.js","webpack:///./src/core/graphic/contextView.js","webpack:///./src/core/config/OptionProxy.js","webpack:///./src/core/config/StyleProxy.js","webpack:///./src/core/config/style.js","webpack:///./src/core/graphic/helper/text.js","webpack:///./src/core/graphic/helper/viewutil.js","webpack:///./src/shape/Circle.js","webpack:///./src/shape/Line.js","webpack:///./src/shape/Rect.js","webpack:///./src/shape/Triangle.js","webpack:///./src/shape/YText.js","webpack:///./src/shape/Image.js","webpack:///./src/animation/animation.js"],"names":["shape","Bezier","Circle","Line","Rect","Triangle","YText","Image","Group","version","Animation","textutil","extendView","config","isDebug","open","customView","baseContextViewExtend","YCharts","eleid","domid","__storage","__painter","__handler","prototype","clear","clean","depose","cleanPainter","add","el","addEle","BrushAll","refresh","update","resize","wh","ht","getWidth","getHeight","instances","ychart","init","id","document","getElementById","innerHTML","_charts","Storage","yh","_yh","_roots","element","index","i","length","getId","setDefaultConfig","height","push","getDisplayableShapeList","list","_getList","root","children","ignore","forEach","checkNull","mergeItem","merge","simpleMerge","replaceattr","isType","isArr","ele","ctx","cb","item","call","it","hasOwnProperty","which","target","source","key","overwrite","targetProp","map","tg","type","Object","toString","obj","isFunc","isObj","options","child","parent","inherit","clazz","baseClazz","clazzPrototype","F","prop","constructor","mixin","overlay","_over","mIdentity","identity","EPSILON","isNotAroundZero","val","Transformable","opts","position","rotation","scale","origin","transform","needLocalTransform","updateTransform","parentHasTransform","m","create","getLocalTransform","mul","copy","invTransform","invert","rotate","setTransform","tmpTransform","decomposeTransform","sx","sy","Math","sqrt","atan2","transformCoordToLocal","x","y","v2","applyTransform","transformCoordToGlobal","ArrayCtor","Float32Array","Array","matrix","out","m1","m2","out0","out1","out2","out3","out4","out5","translate","a","v","rad","aa","ac","atx","ab","ad","aty","st","sin","ct","cos","vx","vy","det","vector","clone","set","b","v1","scaleAndAdd","sub","len","lenSquare","div","dot","s","normalize","d","distance","distanceSquare","negate","lerp","t","min","max","lengthSquare","dist","distSquare","Moveable","drift","dx","dy","__dirty","move","angle","zoom","Element","beginid","guid","Painter","storage","__yh","origindom","temp","width","left","top","container","appendChild","__layer","shapeList","updateLayerState","layer","zlevel","lastZlevel","zLevel","getLayer","preProcessShapeInLayer","Brush","getContext","afterProcessShapeInLayer","_preProcessShapeInLayer","_shape","_groupPreProcess","gp","ly","groupquene","_buildGroupQuene","_group","unshift","before","insertLayer","la","dom","getElementsByTagName","parseInt","getAttribute","parentNode","insertBefore","Layer","setAttribute","layerW","layerH","alert","clearRect","parseInt10","getPosition","defaultView","getComputedStyle","rect","getBoundingClientRect","scrollTop","documentElement","body","scrollLeft","clientWidth","style","paddingLeft","paddingRight","clientHeight","paddingTop","paddingBottom","CACHE","getRectByCtx","context","canvas","doc","createDOM","desc","pos","attr","newdom","createElement","isNaN","drawing","ALL_EVENT_NAMES","SPECIAL_EVENT_HANDLERS","_lastHovered","htmlView","mousemove","exEvent","ev","targetEle","triggerProxy","tip","clientX","tipoffsetX","clientY","tipoffsetY","info","show","hide","mouseout","COMMON_EVENT_HANDLER","name","handlers","painter","_handlers","_dragmanager","initHandlers","eventHandler","eventName","undefined","extendAndFixEventPackge","event","trigger","addHandler","clientToLocal","getHoverElement","shapes","sp","contain","ycX","ycY","removeHandler","ClientToLocal","e","box","handler","addEventListener","removeEventListener","getEvent","window","getTarget","srcElement","preventDefault","returnValue","stopPropagation","cancelBubble","stop","Draggable","on","_dragStart","_dragIng","_dragEnd","_dragDelay","_lastClickTime","Date","_x","offsetX","_y","offsetY","_dragingTarget","crt","draggable","cursor","cursor_moveable","cursor_getable","cursor_default","ReBrushAll","dragging","Eventful","h","_h","_one","_ctx","once","indexOf","remove","hs","splice","arrySlice","slice","handles","args","arguments","argLen","array","apply","DEFAULT_CONFIG","coordinateSystem","DomContent","_root","_content","border","backgroundColor","padding","title","footer","visibility","html","HtmlView","option","_domcontent","content","View","Error","throwFunc","str","noOp","bind1Arg","arg1","onreadyCallback","callback","loadMethod","notCompleteCb","completeCb","timer","setInterval","clearInterval","onImgReady","isImageLoaded","imgElement","complete","naturalHeight","warn","insiderange","rg1","rg2","abs","atan","floor","radian2angle","radian","PI","BuildPath","beginpt","endpt","compact","systole","linequadrant","nextx","dis","nexty","nexpt_ct","pt","dispt","leftorright","getrs","disx","disy","piece","dispiece","getDistance","linevert_angleor","linectx_dis","linecty_dis","allctpt","allctinlinept","alllinectpt","moveTo","quadraticCurveTo","brushType","dbpre","wnpre","dbprespace","rs","debug","console","log","isobj","printobj","_printObj","REQUIRED_CHILD","defaults","BaseContextView","baseOption","_setDefaultTrasformToCartesian","ContextView","configProxy","defaultConfig","save","_SetShapeTransform","bindContext","BeforeBrush","beginPath","tp","getBrushType","fill","stroke","restore","AfterBrush","_BeforeBrush","_AfterBrush","DrawText","local","getable","GetContainRect","_isPtInPath","text","crect","getStyle","textw","getTextWidth","font","texth","getTextHeight","textAlign","textBaseline","textpos","textColor","fillStyle","globalTextPos","fillText","getConfig","OptionProxy","styleProxy","_this","defineProperty","enumerable","configurable","get","defaultStyle","styleMapper","styleMap","StyleProxy","strokeStyle","gradient","_gradient","createLinearGradient","addColorStop","beginColor","endColor","_style","fillColor","color","lineColor","lineWidth","lineCap","lineJoin","shadowColor","shadowOffsetX","shadowOffsetY","shadowBlur","shadowx","shadowy","globalAlpha","alpha","globalCompositionOperation","overlaystyle","defaultFont","defaultAlign","defaultBaseline","TextUtil","TEXT_CACHE_MAX","_textHeightCache","_textHeightCacheCounter","textFont","split","measureText","_textWidthCache","_textWidthCacheCounter","l","getTextRect","lineHeight","_fillText","_left","_right","_top","_bottom","bottom","right","CanvasRenderingContext2D","isPointInStroke","path","isPointInPath","createCanvas","isPtInRect","isPtInPath","Init","arc","r","startangel","endangel","dirty","splitnum","splitlen_x","x1","x0","splitlen_y","y1","y0","lineTo","minx","miny","maxx","maxy","pts","notClose","closePath","tmp","direction","coordinate","image","__setOrigin","onload","src","dWidth","dHeight","buildImagePath1","numberOrZero","sWidth","sHeight","drawImage","fields","field","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","setTimeout","Nop","animate","onBegin","onChanging","onEnd","beginDelay","frame","beginResult"],"mappings":"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","file":"ychart.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ychart\"] = factory();\n\telse\n\t\troot[\"ychart\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 13edad3b8a641d0ddcb5\n **/","/**\r\n * 库的入口接口。 提供所有外部接口\r\n * @module ychart/index\r\n */\r\nimport ychart from \"./Ycharts\";\r\nimport Bezier from \"./shape/Bezier\";\r\nimport Circle from \"./shape/Circle\";\r\nimport Line from \"./shape/Line\";\r\nimport Rect from \"./shape/Rect\";\r\nimport Triangle from \"./shape/Triangle\";\r\nimport YText from \"./shape/YText\";\r\nimport Image from \"./shape/Image\";\r\nimport Group from \"./Group\";\r\nimport Animation from \"./animation/animation\";\r\nimport ShapeBuilder from \"./core/viewBuilder\";\r\nimport debugs from \"./tool/debug\";\r\nimport textUtil from \"./core/graphic/helper/text\";\r\n\r\nychart.shape = {Bezier ,Circle ,Line ,Rect ,Triangle ,YText,Image};\r\n\r\nychart.Group = Group;\r\n\r\nychart.version = 1.0;\r\n\r\nychart.Animation = Animation;\r\n\r\nychart.textutil = textUtil;\r\n\r\nychart.extendView = function (config) {\r\n    //自定义视图时一定要校验是否传入全部必须的参数\r\n    var isDebug = debugs.open;\r\n    debugs.open = true;\r\n    var customView = ShapeBuilder.baseContextViewExtend(config);\r\n    debugs.open = isDebug;\r\n    return customView;\r\n};\r\n\r\n/**\r\n * @todo  Group在变换时如何清楚已绘制的图形？\r\n * layer变换时如何清楚已绘制的图形？\r\n * 三者与元素的绘制能否统一？\r\n * painter,layer代码能够优化下，变量命令不规范？\r\n */\r\n\r\nexport default ychart;\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","/**\r\n * 绘图核心控制模块\r\n * @module ychart/Ychart\r\n */\r\nimport Storage from \"./Storage\";\r\nimport Painter from \"./Painter\";\r\nimport Handler from \"./Reactor\";\r\n\r\n\r\n/**\r\n * @classdesc ychart绘图实例的类。在页面上调用YH.init后返回的就是该类的一个实例\r\n * @class YCharts\r\n * @param eleid {string}  放置canvas的容器。 不能是canvas元素， 必须设置宽度和高度\r\n * @constructor\r\n */\r\nvar YCharts = function (eleid ) {\r\n    //当前实例绑定的页面元素ID\r\n    this.domid = eleid;\r\n\r\n    //存储所有绘图相关组件。\r\n    this.__storage = new Storage(this);\r\n\r\n    //绘图具体操作类。 与storage交互\r\n    this.__painter = new Painter(this, this.__storage);\r\n\r\n    //事件相关操作\r\n    this.__handler = new Handler(this.domid, this.__painter, this.__storage);\r\n};\r\n\r\n\r\n/**\r\n * 清除ychart实例所管理的所有内容。 调用该方法后所有保存的数据以及绘图情况都将被清除\r\n */\r\nYCharts.prototype.clear = function () {\r\n    this.__painter.clean();\r\n    this.__storage.clean();\r\n    this.__handler.depose();\r\n};\r\n\r\n/**\r\n * 清除当前的canvas内容，但是将保留其他的配置数据等等。\r\n * 常用于ychart实例在缩放时需要清除页面上已绘制的数据\r\n * 的情况下\r\n */\r\nYCharts.prototype.cleanPainter = function(){\r\n    this.__painter.cleanPainter();\r\n\r\n};\r\n\r\n/**\r\n * 添加子元素。 子元素可以是任意的shpae或者Group或者自定义的类型\r\n */\r\nYCharts.prototype.add = function (el) {\r\n    this.__storage.addEle(el);\r\n    return this;\r\n};\r\n\r\n/**\r\n * 刷新当前实例，调用该方法会导致所有变换被计算并且实际应用到canvas的\r\n * 上下文中，并且所有可见可绘制的图形都将被绘制\r\n */\r\nYCharts.prototype.BrushAll = function () {\r\n    this.__painter.refresh();\r\n    return this;\r\n};\r\n\r\n/**\r\n * 更新当前实例，同\r\n *@see {@link BrushAll}\r\n */\r\nYCharts.prototype.update = function () {\r\n    this.BrushAll();\r\n};\r\n\r\nYCharts.prototype.resize = function(wh ,ht){\r\n    this.__painter.resize(wh ,ht);\r\n};\r\n\r\n/**\r\n * 获取当前ychart容器的宽度\r\n */\r\nYCharts.prototype.getWidth = function(){\r\n    return this.__painter.getWidth();\r\n};\r\n\r\n/**\r\n * 获取当前canvas容器的高度\r\n */\r\nYCharts.prototype.getHeight = function(){\r\n    return this.__painter.getHeight();\r\n};\r\n\r\n\r\nvar instances = {};\r\n\r\n/**\r\n * ychart全局入口对象。\r\n * @global\r\n * @class\r\n */\r\nvar ychart = {\r\n    /**\r\n     * ycharts外部访问接口。 用于统一管理所有用到的ycharts实例\r\n     * @param id  容器ID\r\n     * @param config 相关配置\r\n     * @returns {YCharts}\r\n     */\r\n    init: function(id, config) {\r\n        document.getElementById(id).innerHTML = \"\";\r\n        var _charts = new YCharts(id, config);\r\n        instances[id] = _charts;\r\n        return _charts;\r\n    },\r\n    /**\r\n     * 销毁指定的ychart实例\r\n     * @param {number} id ychart实例ID\r\n     */\r\n    depose: function(id) {\r\n        if (instances[id]) {\r\n            instances[id].clean();\r\n            instances[id] = null;\r\n        }\r\n    }\r\n};\r\n\r\n\r\nexport default ychart;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Ycharts.js\n **/","/**\r\n * 绘图中绘制存储器模块。 负责处理不同绘图层、统一绘图层不同显示级别的关系\r\n * @module ychart/storage\r\n *\r\n */\r\nimport {isArr} from \"./tool/util\";\r\nimport Group from \"./Group\";\r\n\r\n\r\n/**\r\n *\r\n * 存储器\r\n * @class\r\n * @classdesc 存储器类。 负责存储整个ychart实例中所有信息。\r\n * @param yh {module:ychart/Ychart} ychart实例\r\n * @constructor\r\n */\r\nvar Storage = function (yh) {\r\n\r\n    //ycharts实例\r\n    this._yh = yh;\r\n\r\n    //保存所有的形状组件\r\n    this._roots = [];\r\n};\r\n\r\n/**\r\n * 添加一个子元素\r\n * @param element {module:ychart/core/graphic/element} 元素实例\r\n */\r\nStorage.prototype.addEle = function (element) {\r\n    if (!element || element.id === null) {\r\n        return;\r\n    }\r\n    var index, i;\r\n    for (index = 0; index < this._roots.length; index++) {\r\n        i = this._roots[index];\r\n        if (i.id == element.getId()) {\r\n            return;\r\n        }\r\n    }\r\n    element.setDefaultConfig({\r\n        yh:  this._yh,\r\n        height: this._yh.getHeight()\r\n    });\r\n\r\n    //group当成一个元素便于管理\r\n    this._roots.push(element);\r\n};\r\n\r\n/**\r\n * 获取所有可绘制的图形列表。 组的所有子元素被提取出来。\r\n * @returns {Array.<module:ychart/core/graphic/element>}\r\n */\r\nStorage.prototype.getDisplayableShapeList = function () {\r\n    var list = [];\r\n    var _getList = function (root) {\r\n        if (isArr(root)) {\r\n            for (var i = 0; i < root.length; i++) {\r\n                if (root[i] instanceof Group) {\r\n                    _getList(root[i].children);\r\n                } else if (root[i].ignore === false) {\r\n                    list.push(root[i]);\r\n                }\r\n            }\r\n        } else if (root instanceof Group) {\r\n            _getList(root.children);\r\n        }\r\n    };\r\n\r\n    _getList(this._roots);\r\n\r\n    return list;\r\n};\r\n\r\n\r\n\r\n/**\r\n * 清楚存储器\r\n */\r\nStorage.prototype.clean = function () {\r\n    this._roots = [];\r\n};\r\n\r\n\r\nexport default Storage;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Storage.js\n **/","/**\r\n *@module ychart/tool/util\r\n */\r\n\r\n/**\r\n * 确定属性是否只存在于原型中\r\n * @function\r\n * @param object\r\n * @param name\r\n * @returns {boolean}\r\n */\r\n/* var hasPrototypeProperty = function(object, name) {\r\n    return !object.hasOwnProperty(name) && (name in object);\r\n};\r\n\r\nfunction parseInt10(val) {\r\n    return parseInt(val, 10);\r\n}\r\n */\r\nexport function forEach(ele, ctx, cb) {\r\n    if (isType(\"Array\")(ele)) {\r\n        ele.forEach((function(item, index) {\r\n            cb.call(ctx, item, index);\r\n        }));\r\n    } else if (isType(\"Object\")(ele)) {\r\n        var it, index = 0;\r\n        for (it in ele) {\r\n            if (ele.hasOwnProperty(it)) {\r\n                cb.call(ctx, it, index++);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * 检查一个对象是否为空\r\n * @function\r\n * @param which\r\n * @returns {boolean}\r\n */\r\nexport function checkNull(which) {\r\n    return !which || typeof which == \"undefined\" || which == \"null\";\r\n}\r\n\r\n/**\r\n * 按照指定key合并两个对象\r\n * @param target\r\n * @param source\r\n * @param key\r\n * @param overwrite\r\n */\r\nexport function mergeItem(target, source, key, overwrite) {\r\n    if (source.hasOwnProperty(key) && !(source[key] == null)) {\r\n        var targetProp = target[key];\r\n        if (typeof targetProp == \"object\") {\r\n            // 如果需要递归覆盖，就递归调用merge\r\n            merge(\r\n                target[key],\r\n                source[key],\r\n                overwrite\r\n            );\r\n        } else if (overwrite || !(key in target)) {\r\n            // 否则只处理overwrite为true，或者在目标对象中没有此属性的情况\r\n            target[key] = source[key];\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * 合并源对象的属性到目标对象.\r\n * 该方法会直接更改目标对象\r\n * @function\r\n * @param {*} target 目标对象\r\n * @param {*} source 源对象\r\n * @param {boolean} overwrite 是否覆盖\r\n * @param {object} map 源对象到目标对象的属性名映射.\r\n *      映射名是target的属性名需要映射到souece的属性名\r\n */\r\nexport function merge(target, source, overwrite, map) {\r\n    if (checkNull(target)) {\r\n        target = {};\r\n    }\r\n    if (isArr(source)) {\r\n        source.forEach(item =>\r\n            merge(target, item, overwrite, map)\r\n        );\r\n    } else {\r\n        map && replaceattr(source, map);\r\n        for (var i in source) {\r\n            mergeItem(target, source, i, overwrite);\r\n        }\r\n    }\r\n    return target;\r\n}\r\n\r\nexport function simpleMerge(target , source){\r\n    if (isArr(source)) {\r\n        source.forEach(item =>\r\n            simpleMerge(target, item)\r\n        );\r\n    } else {\r\n        for (var item in source) {\r\n            if(item)\r\n                target[item] = source[item];\r\n        }\r\n    }\r\n    return target;\r\n}\r\n\r\n/**\r\n * 用指定的map属性名映射替代目标对象的属性名. 仅仅改变属性的名称\r\n * 该方法会直接更改目标对象\r\n * @function\r\n * @param {object} target    要被替换的对象\r\n * @param {object} map   对象属性名的映射\r\n */\r\nexport function replaceattr(target, map) {\r\n    if (map && target) {\r\n        for (var tg in target) {\r\n            if (map.hasOwnProperty(tg) && (map[tg] != tg)) {\r\n                // 将target中的属性名替换为对应的映射后的名字\r\n                target[map[tg]] = target[tg];\r\n                target[tg] = null;\r\n            }\r\n        }\r\n    }\r\n    return target;\r\n}\r\n\r\nexport function isType(type) {\r\n    return function(ele) {\r\n        return !checkNull(ele) && Object.prototype.toString.call(ele) == \"[object \" + type + \"]\";\r\n    };\r\n}\r\n\r\n\r\nexport function isArr(obj) {\r\n    return isType(\"Array\")(obj);\r\n}\r\n\r\nexport var isFunc = isType(\"Function\"),\r\n    isObj = isType(\"Object\");\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/tool/util.js\n **/","/**\r\n * 元素容器类\r\n * @module ychart/Group\r\n */\r\nimport {merge} from \"./tool/util\";\r\nimport {mixin} from \"./tool/klass\";\r\nimport Transform from \"./core/graphic/mixin/transform\";\r\nimport Moveable from \"./core/graphic/mixin/moveable.js\";\r\nimport Element from \"./core/graphic/element\";\r\n\r\n/**\r\n * @class\r\n * @classdesc 元素容器类。 该类可以包含任何继承于 {@link ./core/graphic/view} 的类\r\n */\r\nclass Group extends Element{\r\n\r\n    /**\r\n     * @constructor\r\n     * @param {Object} options  组的配置\r\n     */\r\n    constructor(options){\r\n        super(\"group\");\r\n\r\n        this.children = [];\r\n\r\n        merge(this, options, false, null);\r\n\r\n        Transform.call(this);\r\n    }\r\n\r\n    /**\r\n     * 添加一个子元素\r\n     * @param {Element} child 子元素对象， 可以是shape中的任何元素或者自定义的元素\r\n     * @returns {Group}\r\n     */\r\n    add(child) {\r\n        if (child == this)\r\n            return;\r\n        this.children.forEach(ele => {\r\n            if(child.id === ele.id){\r\n                return this;\r\n            }\r\n        });\r\n        //子形状或者group的父类。 继承变换以及样式\r\n        child.parent = this;\r\n\r\n        this.children.push(child);\r\n        return this;\r\n    }\r\n\r\n    setDefaultConfig(config){\r\n\r\n    }\r\n}\r\n\r\nmixin(Group ,Transform , true);\r\nmixin(Group ,Moveable, true);\r\n\r\n\r\nexport default Group;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Group.js\n **/","export var inherit = function (clazz, baseClazz) {\r\n    var clazzPrototype = clazz.prototype;\r\n\r\n    function F() {\r\n    }\r\n\r\n    F.prototype = baseClazz.prototype;\r\n    clazz.prototype = new F();\r\n\r\n    for (var prop in clazzPrototype) {\r\n        clazz.prototype[prop] = clazzPrototype[prop];\r\n    }\r\n    clazz.constructor = clazz;\r\n};\r\n\r\n//组合两个类。 仅组合原型的属性\r\n\r\nexport var mixin = function (target, source, overlay) {\r\n    source = \"prototype\" in source ? source.prototype : source;\r\n    target = \"prototype\" in target ? target.prototype : target;\r\n    _over(target, source, overlay);\r\n    function _over(target, source, overlay) {\r\n        for (var ele in source) {\r\n            if (ele != \"constructor\" && source.hasOwnProperty(ele) &&\r\n                (overlay ? (source[ele] !== null) : (target[ele] === null))) {\r\n                target[ele] = source[ele];\r\n            }\r\n        }\r\n        return target;\r\n    }\r\n};\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/tool/klass.js\n **/","/**\r\n * 元素的事件分发、变换模块.\r\n * 所有事件都由handler.js分发下来。 自定义的事件也是在里面定义\r\n * @module ychart/core/graphic/mixin\r\n */\r\n\r\nimport matrix from \"./helper/matrix\";\r\nimport vector from \"./helper/vector\";\r\nvar mIdentity = matrix.identity;\r\n\r\nvar EPSILON = 5e-5;\r\n\r\nfunction isNotAroundZero(val) {\r\n    return val > EPSILON || val < -EPSILON;\r\n}\r\n\r\n/**\r\n * 元素变换相关功能实现。 混入类\r\n * @class\r\n * @mixin\r\n */\r\nvar Transformable = function (opts) {\r\n    opts = opts || this;\r\n    // If there are no given position, rotation, scale\r\n    if (!opts.position) {\r\n        /**\r\n         * 平移\r\n         * @type {Array.<number>}\r\n         * @default [0, 0]\r\n         */\r\n        this.position = [0, 0];\r\n    } else {\r\n        this.position = opts.position;\r\n    }\r\n    if (!opts.rotation) {\r\n        /**\r\n         * 旋转\r\n         * @type {Array.<number>}\r\n         * @default 0\r\n         */\r\n        this.rotation = 0;\r\n    } else {\r\n        this.rotation = opts.rotation;\r\n    }\r\n    if (!opts.scale) {\r\n        /**\r\n         * 缩放\r\n         * @type {Array.<number>}\r\n         * @default [1, 1]\r\n         */\r\n        this.scale = [1, 1];\r\n    } else {\r\n        this.scale = opts.scale;\r\n    }\r\n    /**\r\n     * 旋转和缩放的原点\r\n     * @type {Array.<number>}\r\n     * @default null\r\n     */\r\n    this.origin = this.origin || null;\r\n\r\n};\r\n\r\n\r\n/**\r\n * 默认的变换矩阵\r\n */\r\nTransformable.prototype.transform = null;\r\n\r\n/**\r\n * 判断是否需要有坐标变换\r\n * 如果有坐标变换, 则从position, rotation, scale以及父节点的transform计算出自身的transform矩阵\r\n */\r\nTransformable.prototype.needLocalTransform = function () {\r\n    return isNotAroundZero(this.rotation) || isNotAroundZero(this.position[0]) ||\r\n        isNotAroundZero(this.position[1]) || isNotAroundZero(this.scale[0] - 1) ||\r\n        isNotAroundZero(this.scale[1] - 1);\r\n};\r\n\r\nTransformable.prototype.updateTransform = function () {\r\n    var parent = this.parent;\r\n    var parentHasTransform = parent && parent.transform;\r\n    var needLocalTransform = this.needLocalTransform();\r\n    var m = this.transform;\r\n    m = m || [];\r\n    if (!(needLocalTransform || parentHasTransform)) {\r\n        mIdentity(m);\r\n        return;\r\n    }\r\n\r\n    m = m || matrix.create();\r\n\r\n    if (needLocalTransform) {\r\n        this.getLocalTransform(m);\r\n    } else {\r\n        mIdentity(m);\r\n    }\r\n\r\n    // 应用父节点变换\r\n    if (parentHasTransform) {\r\n        if (needLocalTransform) {\r\n            matrix.mul(m, parent.transform, m);\r\n        } else {\r\n            matrix.copy(m, parent.transform);\r\n        }\r\n    }\r\n    // 保存这个变换矩阵\r\n    this.transform = m;\r\n\r\n    this.invTransform = this.invTransform || matrix.create();\r\n    matrix.invert(this.invTransform, m);\r\n};\r\n\r\nTransformable.prototype.getLocalTransform = function (m) {\r\n    m = m || [];\r\n    mIdentity(m);\r\n\r\n    var origin = this.origin;\r\n\r\n    var scale = this.scale;\r\n    var rotation = this.rotation;\r\n    var position = this.position;\r\n    if (origin) {\r\n        // Translate to origin\r\n        m[4] -= origin[0];\r\n        m[5] -= origin[1];\r\n    }\r\n    if (scale) {\r\n        matrix.scale(m, m, scale);\r\n    }\r\n    if (rotation) {\r\n        matrix.rotate(m, m, rotation);\r\n    }\r\n    if (origin) {\r\n        // Translate back from origin\r\n        m[4] += origin[0];\r\n        m[5] += origin[1];\r\n    }\r\n\r\n    m[4] += position[0];\r\n    m[5] += position[1];\r\n\r\n    return m;\r\n};\r\n\r\n/**\r\n * 将自己的transform应用到context上\r\n * @param {Context2D} ctx\r\n */\r\nTransformable.prototype.setTransform = function (ctx) {\r\n    var m = this.transform;\r\n    if (m) {\r\n        ctx.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\r\n    }\r\n};\r\n\r\nvar tmpTransform = [];\r\n\r\n/**\r\n * 分解`transform`矩阵到`position`, `rotation`, `scale`\r\n */\r\nTransformable.prototype.decomposeTransform = function () {\r\n    if (!this.transform) {\r\n        return;\r\n    }\r\n    var parent = this.parent;\r\n    var m = this.transform;\r\n    if (parent && parent.transform) {\r\n        // Get local transform and decompose them to position, scale, rotation\r\n        matrix.mul(tmpTransform, parent.invTransform, m);\r\n        m = tmpTransform;\r\n    }\r\n    var sx = m[0] * m[0] + m[1] * m[1];\r\n    var sy = m[2] * m[2] + m[3] * m[3];\r\n    var position = this.position;\r\n    var scale = this.scale;\r\n    if (isNotAroundZero(sx - 1)) {\r\n        sx = Math.sqrt(sx);\r\n    }\r\n    if (isNotAroundZero(sy - 1)) {\r\n        sy = Math.sqrt(sy);\r\n    }\r\n    if (m[0] < 0) {\r\n        sx = -sx;\r\n    }\r\n    if (m[3] < 0) {\r\n        sy = -sy;\r\n    }\r\n    position[0] = m[4];\r\n    position[1] = m[5];\r\n    scale[0] = sx;\r\n    scale[1] = sy;\r\n    this.rotation = Math.atan2(-m[1] / sy, m[0] / sx);\r\n};\r\n\r\n/**\r\n * 变换坐标位置到 shape 的局部坐标空间\r\n * @method\r\n * @param {number} x\r\n * @param {number} y\r\n * @return {Array.<number>}\r\n */\r\nTransformable.prototype.transformCoordToLocal = function (x, y) {\r\n    var v2 = [x, y];\r\n    var invTransform = this.invTransform;\r\n    if (invTransform) {\r\n        vector.applyTransform(v2, v2, invTransform);\r\n    }\r\n    return v2;\r\n};\r\n\r\n/**\r\n * 变换局部坐标位置到全局坐标空间\r\n * @method\r\n * @param {number} x\r\n * @param {number} y\r\n * @return {Array.<number>}\r\n */\r\nTransformable.prototype.transformCoordToGlobal = function (x, y) {\r\n    var v2 = [x, y];\r\n    var transform = this.transform;\r\n    if (transform) {\r\n        vector.applyTransform(v2, v2, transform);\r\n    }\r\n    return v2;\r\n};\r\n\r\nexport default Transformable;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/graphic/mixin/transform.js\n **/","/**\r\n * @module ychart/core/graphic/mixin/helper\r\n * @see {@link ychart/core/graphic/mixin} 工具类\r\n */\r\n\r\nvar ArrayCtor = typeof Float32Array === 'undefined'\r\n    ? Array\r\n    : Float32Array;\r\n/**\r\n * 3x2矩阵操作类\r\n */\r\nvar matrix = {\r\n    /**\r\n     * 创建一个单位矩阵\r\n     * @return {Float32Array|Array.<number>}\r\n     */\r\n    create: function () {\r\n        var out = new ArrayCtor(6);\r\n        matrix.identity(out);\r\n\r\n        return out;\r\n    },\r\n    /**\r\n     * 设置矩阵为单位矩阵\r\n     * @param {Float32Array|Array.<number>} out\r\n     */\r\n    identity: function (out) {\r\n        out[0] = 1;\r\n        out[1] = 0;\r\n        out[2] = 0;\r\n        out[3] = 1;\r\n        out[4] = 0;\r\n        out[5] = 0;\r\n        return out;\r\n    },\r\n    /**\r\n     * 复制矩阵\r\n     * @param {Float32Array|Array.<number>} out\r\n     * @param {Float32Array|Array.<number>} m\r\n     */\r\n    copy: function (out, m) {\r\n        out[0] = m[0];\r\n        out[1] = m[1];\r\n        out[2] = m[2];\r\n        out[3] = m[3];\r\n        out[4] = m[4];\r\n        out[5] = m[5];\r\n        return out;\r\n    },\r\n    /**\r\n     * 矩阵相乘\r\n     * @param {Float32Array|Array.<number>} out\r\n     * @param {Float32Array|Array.<number>} m1\r\n     * @param {Float32Array|Array.<number>} m2\r\n     */\r\n    mul: function (out, m1, m2) {\r\n        // Consider matrix.mul(m, m2, m);\r\n        // where out is the same as m2.\r\n        // So use temp variable to escape error.\r\n        var out0 = m1[0] * m2[0] + m1[2] * m2[1];\r\n        var out1 = m1[1] * m2[0] + m1[3] * m2[1];\r\n        var out2 = m1[0] * m2[2] + m1[2] * m2[3];\r\n        var out3 = m1[1] * m2[2] + m1[3] * m2[3];\r\n        var out4 = m1[0] * m2[4] + m1[2] * m2[5] + m1[4];\r\n        var out5 = m1[1] * m2[4] + m1[3] * m2[5] + m1[5];\r\n        out[0] = out0;\r\n        out[1] = out1;\r\n        out[2] = out2;\r\n        out[3] = out3;\r\n        out[4] = out4;\r\n        out[5] = out5;\r\n        return out;\r\n    },\r\n    /**\r\n     * 平移变换\r\n     * @param {Float32Array|Array.<number>} out\r\n     * @param {Float32Array|Array.<number>} a\r\n     * @param {Float32Array|Array.<number>} v\r\n     */\r\n    translate: function (out, a, v) {\r\n        out[0] = a[0];\r\n        out[1] = a[1];\r\n        out[2] = a[2];\r\n        out[3] = a[3];\r\n        out[4] = a[4] + v[0];\r\n        out[5] = a[5] + v[1];\r\n        return out;\r\n    },\r\n    /**\r\n     * 旋转变换\r\n     * @param {Float32Array|Array.<number>} out\r\n     * @param {Float32Array|Array.<number>} a\r\n     * @param {number} rad\r\n     */\r\n    rotate: function (out, a, rad) {\r\n        var aa = a[0];\r\n        var ac = a[2];\r\n        var atx = a[4];\r\n        var ab = a[1];\r\n        var ad = a[3];\r\n        var aty = a[5];\r\n        var st = Math.sin(rad);\r\n        var ct = Math.cos(rad);\r\n\r\n        out[0] = aa * ct + ab * st;\r\n        out[1] = -aa * st + ab * ct;\r\n        out[2] = ac * ct + ad * st;\r\n        out[3] = -ac * st + ct * ad;\r\n        out[4] = ct * atx + st * aty;\r\n        out[5] = ct * aty - st * atx;\r\n        return out;\r\n    },\r\n    /**\r\n     * 缩放变换\r\n     * @param {Float32Array|Array.<number>} out\r\n     * @param {Float32Array|Array.<number>} a\r\n     * @param {Float32Array|Array.<number>} v\r\n     */\r\n    scale: function (out, a, v) {\r\n        var vx = v[0];\r\n        var vy = v[1];\r\n        out[0] = a[0] * vx;\r\n        out[1] = a[1] * vy;\r\n        out[2] = a[2] * vx;\r\n        out[3] = a[3] * vy;\r\n        out[4] = a[4] * vx;\r\n        out[5] = a[5] * vy;\r\n        return out;\r\n    },\r\n    /**\r\n     * 求逆矩阵\r\n     * @param {Float32Array|Array.<number>} out\r\n     * @param {Float32Array|Array.<number>} a\r\n     */\r\n    invert: function (out, a) {\r\n\r\n        var aa = a[0];\r\n        var ac = a[2];\r\n        var atx = a[4];\r\n        var ab = a[1];\r\n        var ad = a[3];\r\n        var aty = a[5];\r\n\r\n        var det = aa * ad - ab * ac;\r\n        if (!det) {\r\n            return null;\r\n        }\r\n        det = 1.0 / det;\r\n\r\n        out[0] = ad * det;\r\n        out[1] = -ab * det;\r\n        out[2] = -ac * det;\r\n        out[3] = aa * det;\r\n        out[4] = (ac * aty - ad * atx) * det;\r\n        out[5] = (ab * atx - aa * aty) * det;\r\n        return out;\r\n    }\r\n};\r\n\r\nexport default matrix;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/graphic/mixin/helper/matrix.js\n **/","/**\r\n * @module ychart/core/graphic/mixin/helper\r\n * @see {@link ychart/core/graphic/mixin} 工具类\r\n */\r\n\r\n\r\n\r\n/**\r\n * @typedef {Float32Array|Array.<number>} Vector2\r\n */\r\nvar ArrayCtor = typeof Float32Array === 'undefined' ? Array : Float32Array;\r\n\r\n/**\r\n * 二维向量类\r\n */\r\nvar vector = {\r\n    /**\r\n     * 创建一个向量\r\n     * @param {number} [x=0]\r\n     * @param {number} [y=0]\r\n     * @return {Vector2}\r\n     */\r\n    create: function (x, y) {\r\n        var out = new ArrayCtor(2);\r\n        out[0] = x || 0;\r\n        out[1] = y || 0;\r\n        return out;\r\n    },\r\n\r\n    /**\r\n     * 复制向量数据\r\n     * @param {Vector2} out\r\n     * @param {Vector2} v\r\n     * @return {Vector2}\r\n     */\r\n    copy: function (out, v) {\r\n        out[0] = v[0];\r\n        out[1] = v[1];\r\n        return out;\r\n    },\r\n\r\n    /**\r\n     * 克隆一个向量\r\n     * @param {Vector2} v\r\n     * @return {Vector2}\r\n     */\r\n    clone: function (v) {\r\n        var out = new ArrayCtor(2);\r\n        out[0] = v[0];\r\n        out[1] = v[1];\r\n        return out;\r\n    },\r\n\r\n    /**\r\n     * 设置向量的两个项\r\n     * @param {Vector2} out\r\n     * @param {number} a\r\n     * @param {number} b\r\n     * @return {Vector2} 结果\r\n     */\r\n    set: function (out, a, b) {\r\n        out[0] = a;\r\n        out[1] = b;\r\n        return out;\r\n    },\r\n\r\n    /**\r\n     * 向量相加\r\n     * @param {Vector2} out\r\n     * @param {Vector2} v1\r\n     * @param {Vector2} v2\r\n     */\r\n    add: function (out, v1, v2) {\r\n        out[0] = v1[0] + v2[0];\r\n        out[1] = v1[1] + v2[1];\r\n        return out;\r\n    },\r\n\r\n    /**\r\n     * 向量缩放后相加\r\n     * @param {Vector2} out\r\n     * @param {Vector2} v1\r\n     * @param {Vector2} v2\r\n     * @param {number} a\r\n     */\r\n    scaleAndAdd: function (out, v1, v2, a) {\r\n        out[0] = v1[0] + v2[0] * a;\r\n        out[1] = v1[1] + v2[1] * a;\r\n        return out;\r\n    },\r\n\r\n    /**\r\n     * 向量相减\r\n     * @param {Vector2} out\r\n     * @param {Vector2} v1\r\n     * @param {Vector2} v2\r\n     */\r\n    sub: function (out, v1, v2) {\r\n        out[0] = v1[0] - v2[0];\r\n        out[1] = v1[1] - v2[1];\r\n        return out;\r\n    },\r\n\r\n    /**\r\n     * 向量长度\r\n     * @param {Vector2} v\r\n     * @return {number}\r\n     */\r\n    len: function (v) {\r\n        return Math.sqrt(this.lenSquare(v));\r\n    },\r\n\r\n    /**\r\n     * 向量长度平方\r\n     * @param {Vector2} v\r\n     * @return {number}\r\n     */\r\n    lenSquare: function (v) {\r\n        return v[0] * v[0] + v[1] * v[1];\r\n    },\r\n\r\n    /**\r\n     * 向量乘法\r\n     * @param {Vector2} out\r\n     * @param {Vector2} v1\r\n     * @param {Vector2} v2\r\n     */\r\n    mul: function (out, v1, v2) {\r\n        out[0] = v1[0] * v2[0];\r\n        out[1] = v1[1] * v2[1];\r\n        return out;\r\n    },\r\n\r\n    /**\r\n     * 向量除法\r\n     * @param {Vector2} out\r\n     * @param {Vector2} v1\r\n     * @param {Vector2} v2\r\n     */\r\n    div: function (out, v1, v2) {\r\n        out[0] = v1[0] / v2[0];\r\n        out[1] = v1[1] / v2[1];\r\n        return out;\r\n    },\r\n\r\n    /**\r\n     * 向量点乘\r\n     * @param {Vector2} v1\r\n     * @param {Vector2} v2\r\n     * @return {number}\r\n     */\r\n    dot: function (v1, v2) {\r\n        return v1[0] * v2[0] + v1[1] * v2[1];\r\n    },\r\n\r\n    /**\r\n     * 向量缩放\r\n     * @param {Vector2} out\r\n     * @param {Vector2} v\r\n     * @param {number} s\r\n     */\r\n    scale: function (out, v, s) {\r\n        out[0] = v[0] * s;\r\n        out[1] = v[1] * s;\r\n        return out;\r\n    },\r\n\r\n    /**\r\n     * 向量归一化\r\n     * @param {Vector2} out\r\n     * @param {Vector2} v\r\n     */\r\n    normalize: function (out, v) {\r\n        var d = vector.len(v);\r\n        if (d === 0) {\r\n            out[0] = 0;\r\n            out[1] = 0;\r\n        }\r\n        else {\r\n            out[0] = v[0] / d;\r\n            out[1] = v[1] / d;\r\n        }\r\n        return out;\r\n    },\r\n\r\n    /**\r\n     * 计算向量间距离\r\n     * @param {Vector2} v1\r\n     * @param {Vector2} v2\r\n     * @return {number}\r\n     */\r\n    distance: function (v1, v2) {\r\n        return Math.sqrt(\r\n            (v1[0] - v2[0]) * (v1[0] - v2[0]) + (v1[1] - v2[1]) * (v1[1] - v2[1])\r\n        );\r\n    },\r\n\r\n    /**\r\n     * 向量距离平方\r\n     * @param {Vector2} v1\r\n     * @param {Vector2} v2\r\n     * @return {number}\r\n     */\r\n    distanceSquare: function (v1, v2) {\r\n        return (v1[0] - v2[0]) * (v1[0] - v2[0]) + (v1[1] - v2[1]) * (v1[1] - v2[1]);\r\n    },\r\n\r\n    /**\r\n     * 求负向量\r\n     * @param {Vector2} out\r\n     * @param {Vector2} v\r\n     */\r\n    negate: function (out, v) {\r\n        out[0] = -v[0];\r\n        out[1] = -v[1];\r\n        return  out;\r\n    },\r\n\r\n\r\n\r\n\r\n    /**\r\n     * 插值两个点\r\n     * @param {Vector2} out\r\n     * @param {Vector2} v1\r\n     * @param {Vector2} v2\r\n     * @param {number} t\r\n     */\r\n    lerp: function (out, v1, v2, t) {\r\n        out[0] = v1[0] + t * (v2[0] - v1[0]);\r\n        out[1] = v1[1] + t * (v2[1] - v1[1]);\r\n        return out;\r\n    },\r\n\r\n    /**\r\n     * 矩阵左乘向量\r\n     * @param {Vector2} out\r\n     * @param {Vector2} v\r\n     * @param {Vector2} m\r\n     */\r\n    applyTransform: function (out, v, m) {\r\n        var x = v[0];\r\n        var y = v[1];\r\n        out[0] = m[0] * x + m[2] * y + m[4];\r\n        out[1] = m[1] * x + m[3] * y + m[5];\r\n        return out;\r\n    },\r\n    /**\r\n     * 求两个向量最小值\r\n     * @param  {Vector2} out\r\n     * @param  {Vector2} v1\r\n     * @param  {Vector2} v2\r\n     */\r\n    min: function (out, v1, v2) {\r\n        out[0] = Math.min(v1[0], v2[0]);\r\n        out[1] = Math.min(v1[1], v2[1]);\r\n        return out;\r\n    },\r\n    /**\r\n     * 求两个向量最大值\r\n     * @param  {Vector2} out\r\n     * @param  {Vector2} v1\r\n     * @param  {Vector2} v2\r\n     */\r\n    max: function (out, v1, v2) {\r\n        out[0] = Math.max(v1[0], v2[0]);\r\n        out[1] = Math.max(v1[1], v2[1]);\r\n        return out;\r\n    }\r\n};\r\n\r\nvector.length = vector.len;\r\nvector.lengthSquare = vector.lenSquare;\r\nvector.dist = vector.distance;\r\nvector.distSquare = vector.distanceSquare;\r\n\r\nexport default vector;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/graphic/mixin/helper/vector.js\n **/","/**\r\n * @module ychart/core/graphic/mixin\r\n */\r\n\r\n\r\n/**\r\n * 元素移动相关功能实现。 混入类\r\n * @class\r\n * @mixin\r\n */\r\nvar Moveable = function () {\r\n\r\n};\r\n\r\nMoveable.prototype = {\r\n\r\n    /**\r\n     * 拖动\r\n     * @param {number} dx\r\n     * @param {number} dy\r\n     */\r\n    drift: function (dx, dy) {\r\n        this.position[0] += dx;\r\n        this.position[1] -= dy;\r\n        this.__dirty = true;\r\n    },\r\n\r\n    /**\r\n     * 移动。 和drift方法完全一样\r\n     * @param {number} dx\r\n     * @param {number} dy\r\n     */\r\n    move: function (dx, dy) {\r\n        this.drift(dx, dy);\r\n    },\r\n\r\n    /**\r\n     * 旋转\r\n     * @param {number}  x 圆心X座标\r\n     * @param {number}  y 圆心y座标\r\n     * @param {number}  angle 旋转弧度\r\n     */\r\n    rotate: function (x, y, angle) {\r\n        if(!this.rotation){\r\n            this.rotation = 0;\r\n        }\r\n        this.origin[0] += x;\r\n        this.origin[1] += y;\r\n        this.rotation += angle;\r\n\r\n        this.__dirty = true;\r\n    },\r\n\r\n    /**\r\n     * 缩放\r\n     * 注意该缩放必须是相对于某个点的. 默认情况下是[0,0] 这个肯定不是想要的结果,\r\n     * 必须在shape指定origin为缩放的原点\r\n     *\r\n     * @param {number}  x X方向放大比例\r\n     * @param {number}  y y方向放大比例\r\n     */\r\n    zoom: function (x, y) {\r\n        this.scale[0] *= x;\r\n        this.scale[1] *= y;\r\n        this.__dirty = true;\r\n    }\r\n};\r\n\r\n\r\nexport default Moveable;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/graphic/mixin/moveable.js\n **/","/**\r\n * ychart库页面元素基类模块\r\n * @module ychart/core/graphic/element\r\n */\r\nimport guid from \"../../tool/guid\";\r\n\r\n/**\r\n * @classdesc 基本元素类。 整个库的所有可以独立存在并且彼此区分的单元都继承此类已获取一个独立的ID\r\n * @class\r\n */\r\nclass Element {\r\n    /**\r\n     * @constructor\r\n     * @param {String} type  元素类型. 该类型为element\r\n     */\r\n    constructor(type = \"element\") {\r\n        Element.type = type;\r\n        this.id = this.type + \"_\" + guid();\r\n    }\r\n\r\n    /**\r\n     * 获取元素id\r\n     * @returns {string}  该元素的唯一ID\r\n     */\r\n    getId() {\r\n        return this.id;\r\n    }\r\n\r\n}\r\n\r\nexport default Element;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/graphic/element.js\n **/","var beginid = 1000;\r\nvar guid = function(){\r\n    return beginid++;\r\n};\r\n\r\nexport default guid;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/tool/guid.js\n **/","/**\r\n * 绘图中绘制控制器模块\r\n * @module ychart/painter\r\n */\r\nimport Layer from \"./Layer\";\r\nimport guid from \"./tool/guid\";\r\nimport Group from \"./Group\";\r\nimport {\r\n    getPosition,\r\n    createDOM\r\n} from \"./tool/dom\";\r\n\r\n/**\r\n * 绘图组件。\r\n * 该组件控制所有元素绘制相关的处理，包括各个元素之间的层级关系、属性继承等\r\n * 具体绘制的层在Layer模块中\r\n * @class\r\n * @classdesc 绘图器类\r\n * @param yh {module:ychart/Ychart} ychart实例\r\n * @param storage {module:ychart/storage}  存储器实例\r\n * @constructor\r\n */\r\nvar Painter = function(yh, storage) {\r\n    this.__storage = storage;\r\n    this.__yh = yh;\r\n    this.origindom = document.getElementById(yh.domid);\r\n    var temp = getPosition(this.origindom);\r\n    this.width = temp.width;\r\n    this.height = temp.height;\r\n    this.left = temp.left;\r\n    this.top = temp.top;\r\n\r\n    // this.container = createDOM(guid() , \"div\" , \"container\" ,this.width , this.height ,\"relative\");\r\n    this.container = createDOM(guid(), \"div\", \"container\", \"relative\", {\r\n        width: \"100%\",\r\n        height: \"100%\"\r\n    });\r\n    this.origindom.appendChild(this.container);\r\n    this.__layer = [];\r\n};\r\n\r\n/**\r\n *刷新ychart实例所管理的所有元素， 该方法调用过后才会实际更改某个元素的属性。\r\n * 默认情况下通过构造方法或者setOption都只是添加了配置但是没有实际计算及显示\r\n */\r\nPainter.prototype.refresh = function() {\r\n    var shapeList = this.__storage.getDisplayableShapeList();\r\n    this.updateLayerState(shapeList);\r\n    var i, shape, layer, zlevel, lastZlevel = -1;\r\n    for (i = 0; i < shapeList.length; i++) {\r\n        shape = shapeList[i];\r\n        zlevel = shape.zLevel || 0;\r\n        layer = this.getLayer(zlevel);\r\n        //脏元素所在的layer需要清除画布过后重新绘制\r\n        if (lastZlevel != zlevel && layer.__dirty) {\r\n            layer.clear();\r\n            lastZlevel = zlevel;\r\n            layer.__dirty = false;\r\n        }\r\n        this.preProcessShapeInLayer(shape, layer);\r\n        shape.Brush(layer.getContext());\r\n        this.afterProcessShapeInLayer(shape, layer);\r\n    }\r\n};\r\n\r\n/**\r\n * 更新layer状态。 计算哪些层需要清除\r\n * @param shapeList {Array.<module:ychart/core/graphic/element>} 需要更新状态的元素列表\r\n */\r\nPainter.prototype.updateLayerState = function(shapeList) {\r\n    var i, layer, zlevel, shape;\r\n    for (i = 0; i < shapeList.length; i++) {\r\n        shape = shapeList[i];\r\n        //对于每个形状来说要到具体绘制的时候才知道所属的ychart实例，所以在这里添加\r\n        !shape.__yh && (shape.__yh = this.__yh);\r\n\r\n        zlevel = shape.zLevel;\r\n        layer = this.getLayer(zlevel);\r\n        //已经设置过\r\n\r\n        //如果图像为脏，则需要清除当前画布\r\n        !layer.__dirty && (layer.__dirty = shape.__dirty);\r\n    }\r\n};\r\n\r\n\r\n/**\r\n * 处理当前元素的层次结构,把当前形状的父元素与绘图层Layer关联起来\r\n * @param shape {module:ychart/core/graphic/element} 元素实例\r\n * @param layer {module:ychart/layer} 绘图层\r\n */\r\nPainter.prototype.preProcessShapeInLayer = function(shape, layer) {\r\n    var _preProcessShapeInLayer = function(_shape) {\r\n        if (_shape.parent == null) {\r\n            _shape.parent = layer;\r\n        } else if (_shape.parent instanceof Group) {\r\n            _groupPreProcess(_shape.parent, layer);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 更新某个元素所属组的parent属性, 用于变换. 每个group都会继承它的parent的变换.\r\n     * 顶层group继承所属Layer的变换.\r\n     * 该方法最主要的目的是由根layer开始向上计算相应的变换矩阵\r\n     * @param gp 当前group\r\n     * @param ly 所属绘图层(Layer)\r\n     * @private\r\n     */\r\n    var _groupPreProcess = function(gp, ly) {\r\n        //第一个是最高级别的group,后面的都是它的子group\r\n        var groupquene = [];\r\n        var _buildGroupQuene = function(_group) {\r\n            if (_group instanceof Group) {\r\n                groupquene.unshift(_group);\r\n            }\r\n            if (_group.parent instanceof Group) {\r\n                _buildGroupQuene(_group.parent);\r\n            }\r\n        };\r\n        _buildGroupQuene(gp);\r\n        var before = groupquene[0];\r\n        groupquene.forEach(function(item, index) {\r\n            if (index === 0) {\r\n                item.parent = ly;\r\n            } else {\r\n                item.parent = before;\r\n            }\r\n            before = item;\r\n            //更新组的变换\r\n            item.updateTransform();\r\n        });\r\n    };\r\n\r\n\r\n    _preProcessShapeInLayer(shape);\r\n};\r\n\r\n/**\r\n * 处理元素层次结构后的回调\r\n * @param shape {module:ychart/core/graphic/element} 元素实例\r\n * @param layer {module:ychart/layer} 绘图层\r\n */\r\nPainter.prototype.afterProcessShapeInLayer = function(shape) {\r\n    shape.__dirty = false;\r\n};\r\n\r\n/**\r\n * 获取指定zLevel的yaler，如果该zLevel不存在，就创建一个新的Layer实例并添加到绘图器\r\n * @param zLevel {string} 绘图所在层级， 整数\r\n * @return {module::ychart/layer} Layer实例\r\n */\r\nPainter.prototype.getLayer = function(zLevel) {\r\n    var layer = this.__layer[zLevel];\r\n    if (!layer) {\r\n        layer = new Layer(guid() + \"-zlevel\", zLevel, {\r\n            width: this.getWidth(),\r\n            height: this.getHeight(),\r\n            left: 0,\r\n            top: 0\r\n        });\r\n        this.insertLayer(zLevel, layer);\r\n        this.__layer[zLevel] = layer;\r\n    }\r\n    return layer;\r\n};\r\n\r\n/**\r\n * 获取容器宽度\r\n * @returns {integer} 容器宽\r\n */\r\nPainter.prototype.getWidth = function() {\r\n    return this.width;\r\n};\r\n\r\n/**\r\n * 获取容器高度\r\n * @returns {integer} 容器高\r\n */\r\nPainter.prototype.getHeight = function() {\r\n    return this.height;\r\n};\r\n\r\n/**\r\n * 清楚当前绘图实例。\r\n * 该方法将清楚容器中所添加的canvas元素及其他任何DOM元素，如果要再次使用必须重新实例化\r\n */\r\nPainter.prototype.clean = function() {\r\n    this.width = null;\r\n    this.height = null;\r\n\r\n    //删除创建的canvas元素\r\n    this.origindom.innerHTML = \"\";\r\n    this.origindom = null;\r\n};\r\n\r\n/**\r\n * 清除画布中的内容，不会影响到其他事件或者内容\r\n */\r\nPainter.prototype.cleanPainter = function() {\r\n    this.__layer.forEach(la => la.clear());\r\n};\r\n\r\n/**\r\n * 改变当前容器的大小,该方法会导致整个ychart控制的容器的实际大小也对应改变\r\n * 实际实现是通过Layer模块实现\r\n * 该方法与room方法的不同的是该方法会改变容器即canvas的大小\r\n * @param {Number} width 目标宽度\r\n * @param {Number} height 目标高度\r\n */\r\nPainter.prototype.resize = function(width, height) {\r\n    this.__layer.forEach(la => {\r\n        la.resize(width, height);\r\n    });\r\n    this.width = width;\r\n    this.height = height;\r\n    this.refresh();\r\n};\r\n\r\n/**\r\n * 在文档中插入指定的layer节点\r\n * @param zLevel {string} 绘图所在层级， 整数\r\n * @param layer {module::ychart/layer} Layer实例\r\n */\r\nPainter.prototype.insertLayer = function(zLevel, layer) {\r\n    var dom = layer.dom;\r\n    if (this.__layer.length !== 0) {\r\n        var children = this.container.getElementsByTagName(\"canvas\");\r\n        var i, len, child;\r\n        for (i = 0, len = children.length; i < len; i++) {\r\n            child = children[i];\r\n            if (zLevel < parseInt(child.getAttribute(\"zLevel\"))) {\r\n                child.parentNode.insertBefore(dom, child);\r\n                children = null;\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    this.container.appendChild(dom);\r\n};\r\n\r\nexport default Painter;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Painter.js\n **/","/**\r\n * 代表canvas中一个绘图层。 与具体形状的关系仅仅是当前layer所处的zIndex\r\n * @module ychart/layer\r\n */\r\nimport {\r\n    checkNull\r\n} from \"./tool/util\";\r\nimport {\r\n    createDOM,\r\n    getContext\r\n} from \"./tool/dom\";\r\nimport Moveable from \"./core/graphic/mixin/moveable.js\";\r\nimport Transform from \"./core/graphic/mixin/transform.js\";\r\nimport {\r\n    mixin\r\n} from \"./tool/klass.js\";\r\n\r\n/**\r\n *\r\n * @class\r\n * @classdesc 一个绘图层。 对应DOM上一个canvas元素。\r\n *   每一个layer都有自己独立和样式。 不同layer之间的前后关系由Storage模块处理。 layer的具体绘制由Painter处理\r\n */\r\nclass Layer {\r\n\r\n    /**\r\n    * @param id {string} Layer的ID\r\n    * @param zLevel {Number}  所属的zLevel，决定了该层的显示位置\r\n    * @param opts {object}\r\n    * @constructor\r\n    */\r\n    constructor(id, zLevel, opts) {\r\n        //当前层的ID\r\n        this.id = id;\r\n        //当前层的实际DOM. 也就是一个canvas元素实例\r\n        this.dom = document.getElementById(id);\r\n        //当前层的前后顺序.\r\n        this.zLevel = zLevel;\r\n\r\n        if (checkNull(this.dom)) {\r\n            this.dom = createDOM(id, \"canvas\", \"layer\", \"absolute\", {left: opts.left || 0,top: opts.top || 0} ,\r\n                {width: opts.width ,height: opts.height});\r\n        }\r\n\r\n        this.dom.setAttribute(\"zLevel\", zLevel);\r\n\r\n        this.ctx = getContext(this.dom);\r\n\r\n        this.layerW = opts.width;\r\n        this.layerH = opts.height;\r\n\r\n        if (checkNull(this.ctx)) {\r\n            alert(\"浏览器不支持HTML5 canvas,初始化ychart失败 . 请更新浏览器 \" );\r\n            return;\r\n        }\r\n\r\n        //当前画布由于包含的图形有变化需要清除后重新绘制\r\n        this.__dirty = false;\r\n\r\n        Transform.call(this);\r\n    }\r\n\r\n    /**\r\n     * 获取当前层的zlevel\r\n     * @return {Number} zLevel  所在层级\r\n     */\r\n    getZlevel() {\r\n        return this.zLevel;\r\n    }\r\n\r\n    /**\r\n     * 获取当前绘图层的上下文\r\n     * @returns {CanvasRenderingContext2D}\r\n     */\r\n    getContext() {\r\n        return this.ctx;\r\n    }\r\n\r\n    /**\r\n     * 清除当前layer所有的绘制的内容\r\n     */\r\n    clear() {\r\n        this.ctx.clearRect(0, 0, this.layerW, this.layerH);\r\n    }\r\n\r\n    /**\r\n     * 改变当前layer的大小。 该操作实际上是通过计算目标大小与当前的canvas大小\r\n     * 然后按照对应的比例进行缩放实现的。  同时，也会改变canvas本身的大小\r\n     * @param {Number} width  目标宽度\r\n     * @param {Number} height  目标高度\r\n     */\r\n    resize(width, height) {\r\n        var dx = width / this.layerW,\r\n            dy = height / this.layerH;\r\n\r\n        this.zoom(dx, dy);\r\n\r\n        //由于layer始终会是最根部的一个元素，所以它的变换需要手动调用。\r\n        //而对于Group的变换，只有在确定了它所处的层级过后才能更新变换\r\n        this.updateTransform();\r\n\r\n        this.dom.width = width;\r\n        this.dom.height = height;\r\n        this.layerW = width, this.layerH = height;\r\n    }\r\n}\r\n\r\nmixin(Layer, Transform, true);\r\nmixin(Layer, Moveable, true);\r\n\r\nexport default Layer;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Layer.js\n **/","function parseInt10(val) {\r\n    return parseInt(val, 10);\r\n}\r\nexport var getPosition = function (id) {\r\n    var element = typeof id == \"string\" ? document.getElementById(id) : id;\r\n    var st = document.defaultView.getComputedStyle(element);\r\n\r\n    var rect = element.getBoundingClientRect();\r\n    var scrollTop = document.documentElement.scrollTop ?\r\n        document.documentElement.scrollTop : document.body.scrollTop;\r\n    var scrollLeft = document.documentElement.scrollLeft ?\r\n        document.documentElement.scrollLeft : document.body.scrollLeft;\r\n    return {\r\n        width: (element.clientWidth || parseInt10(st.width) || parseInt10(element.style.width) -\r\n            (parseInt10(st.paddingLeft) || 0) -\r\n                (parseInt10(st.paddingRight))) || 0,\r\n\r\n        height: (element.clientHeight || parseInt10(st.height) || parseInt10(element.style.height) -\r\n            (parseInt10(st.paddingTop) || 0) -\r\n                (parseInt10(st.paddingBottom))) || 0,\r\n        top: rect.top + scrollTop,\r\n        left: rect.left + scrollLeft\r\n    };\r\n};\r\n\r\nvar CACHE = {};\r\n\r\nexport var getRectByCtx = function(context){\r\n    let canvas = context.canvas;\r\n    if(CACHE[canvas]){\r\n        return CACHE[canvas];\r\n    }\r\n    CACHE[canvas] = [canvas.width ,canvas.height];\r\n    return CACHE[canvas];\r\n};\r\n\r\nexport var doc = function (id) {\r\n    return document.getElementById(id);\r\n};\r\n\r\n/* eslint-disable */\r\nexport var createDOM = function (id, type, desc, pos ,style , attr) {\r\n    var newdom = document.createElement(type);\r\n    var st = newdom.style;\r\n    st.position = typeof pos === \"undefined\" ? \"absolute\" : pos;\r\n    if(style){\r\n        for(let item in style){\r\n            if(isNaN(style[item])){\r\n                st[item] = style[item];\r\n            }else{\r\n                st[item] = style[item]+\"px\";\r\n            }\r\n        }\r\n    }\r\n    if(attr){\r\n        for(let item in attr){\r\n            newdom[item] = attr[item];\r\n        }\r\n    }\r\n    newdom.setAttribute(\"ychart-\"+desc, id);\r\n    return newdom;\r\n};\r\n\r\n\r\nexport var getContext = function (drawing) {\r\n    if (drawing && drawing.getContext) {\r\n        return drawing.getContext(\"2d\");\r\n    }\r\n    return null;\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/tool/dom.js\n **/","/**\r\n * 全局事件分发程序，负责绑定事件到canvas元素上以及分发下去\r\n * @module ychart/Handler\r\n */\r\n\r\nimport eventUtil from \"./tool/event\";\r\nimport Draggable from \"./core/graphic/mixin/draggable\";\r\nimport HtmlView from \"./core/graphic/htmlView\";\r\nimport {DEFAULT_CONFIG} from \"./core/config/config\";\r\n\r\nimport {\r\n    doc\r\n} from \"./tool/dom\";\r\nimport {\r\n    bind1Arg\r\n} from \"./tool/lang\";\r\n\r\n\r\n//所有捕获的事件名称\r\nvar ALL_EVENT_NAMES = [\"click\", \"mousedown\", \"mousemove\", \"mouseup\", \"focus\"];\r\n\r\n//自定义的一些事件处理函数\r\nvar SPECIAL_EVENT_HANDLERS = {\r\n\r\n    //上一个获取焦点的元素\r\n    _lastHovered: null,\r\n\r\n    //全局消息提示组件\r\n    htmlView: null,\r\n\r\n    //鼠标移动事件捕获及分发\r\n    mousemove: function(exEvent) {\r\n\r\n        var ev = exEvent, obj = exEvent.targetEle;\r\n        //判断和之前获取焦点的是否是同一个形状\r\n        if (this._lastHovered != null && this._lastHovered != obj) {\r\n            this.triggerProxy(this._lastHovered, \"blur\", ev);\r\n        }\r\n        //某个形状处于焦点中\r\n        if (obj) {\r\n            //分发该元素的鼠标移动事件\r\n            this.triggerProxy(obj, \"mousemove\", ev);\r\n\r\n            //处理鼠标在元素上的消息提示\r\n            if(obj.config.tip){\r\n                if(!this.htmlView){\r\n                    this.htmlView = new HtmlView({\r\n                        left: exEvent.clientX+DEFAULT_CONFIG.tipoffsetX,\r\n                        top: exEvent.clientY+DEFAULT_CONFIG.tipoffsetY\r\n                    });\r\n                }else{\r\n                    this.htmlView.move(exEvent.clientX+DEFAULT_CONFIG.tipoffsetX,\r\n                        exEvent.clientY+DEFAULT_CONFIG.tipoffsetY);\r\n                }\r\n                if(this._lastHovered != obj )\r\n                    this.htmlView.info(obj.config.tip);\r\n                this.htmlView.show();\r\n            }else{\r\n                this.htmlView && this.htmlView.hide();\r\n            }\r\n        } else {\r\n            //隐藏消息提示\r\n            this.htmlView && this.htmlView.hide();\r\n        }\r\n        this._lastHovered = obj;\r\n    },\r\n\r\n    mouseout: function(exEvent) {\r\n        var ev = exEvent;\r\n        if (this._lastHovered != null) {\r\n            this.triggerProxy(this._lastHovered, \"globalout\", ev);\r\n        }\r\n        this._lastHovered = null;\r\n        this.htmlView && this.htmlView.hide();\r\n    }\r\n\r\n};\r\n\r\n//通用事件处理函数\r\nvar COMMON_EVENT_HANDLER = function(name) {\r\n    return function(exEvent) {\r\n\r\n        var ev = exEvent,obj = ev.targetEle;\r\n\r\n        //某个形状处于焦点中并且可以捕获事件\r\n        if (obj) {\r\n            //分发该元素的获取焦点事件\r\n            this.triggerProxy(obj, name, ev);\r\n        }\r\n    };\r\n};\r\n\r\n/**\r\n * @class\r\n * @classdesc 管理一个ychart实例的所有事件捕获及其分发\r\n * @param root {HTMLElement}  实际容器ID\r\n * @param painter {module:ychart/painter} 绘图器实例\r\n * @param storage {module:ychart/storage} 存储器实例\r\n */\r\nvar handlers = function(root, painter, storage) {\r\n    //存储器\r\n    this.__storage = storage;\r\n\r\n    //绘图器\r\n    this.__painter = painter;\r\n\r\n    //实际事件响应容器\r\n    this.root = doc(root);\r\n\r\n    //事件处理程序\r\n    this._handlers = {};\r\n\r\n    //拖动管理。 只需要调用它的事件分发函数即可\r\n    this._dragmanager = new Draggable();\r\n\r\n    this.initHandlers();\r\n};\r\n\r\n\r\n/**\r\n * 初始化事件处理程序及绑定事件。\r\n * this._handlers保存着所有的事件处理函数\r\n */\r\nhandlers.prototype.initHandlers = function() {\r\n\r\n    ALL_EVENT_NAMES.forEach(eventName => {\r\n        //具体的事件处理函数\r\n        var eventHandler = SPECIAL_EVENT_HANDLERS[eventName] === undefined ? COMMON_EVENT_HANDLER(eventName) :\r\n            SPECIAL_EVENT_HANDLERS[eventName];\r\n        //绑定事件处理函数的作用域为handler类.\r\n        this._handlers[eventName] = bind1Arg(event => {\r\n\r\n            //获取自定义事件\r\n            var exEvent = this.extendAndFixEventPackge(event);\r\n\r\n            //调用事件处理函数\r\n            eventHandler.call(this , exEvent);\r\n\r\n            //拖动管理。 元素拖动相关的事件由这里面发出去。\r\n            this._dragmanager.trigger(eventName ,exEvent);\r\n\r\n        } , this);\r\n        eventUtil.addHandler(this.root, eventName, this._handlers[eventName]);\r\n    });\r\n};\r\n\r\n/**\r\n * 自定义事件对象\r\n * @param event {Event} 原始事件对象\r\n * @returns {exEvent}\r\n */\r\nhandlers.prototype.extendAndFixEventPackge = function(event) {\r\n    //座标转换\r\n    event = eventUtil.clientToLocal(this.root, event, event);\r\n\r\n    //目标元素\r\n    event.targetEle = this.getHoverElement(event);\r\n\r\n    return event;\r\n};\r\n\r\n/**\r\n * 事件分发代理器。 该方法会把事件分发到某个元素中，然后由元素自身分发到注册的事件处理函数并且调用。\r\n * @param element {module:ychart/core/graphic/element}  响应事件的元素\r\n * @param eventName {string}  事件名称\r\n * @param exEvent  {exEvent} 扩充的事件对象\r\n */\r\nhandlers.prototype.triggerProxy = function(element, eventName, exEvent) {\r\n    element.trigger && element.trigger(eventName, exEvent, element.config);\r\n};\r\n\r\n/**\r\n * 获取当前鼠标所在位置覆盖的最上层元素\r\n * @param exEvent  {exEvent} 扩充的自定义事件对象\r\n * @return {module:ychart/core/graphic/element || null} 元素对象或者null\r\n */\r\nhandlers.prototype.getHoverElement = function(exEvent) {\r\n    var shapes = this.__storage.getDisplayableShapeList();\r\n    for (let i = shapes.length-1 ; i >=0; i--) {\r\n        let sp = shapes[i];\r\n        if (sp.contain(\r\n                exEvent.ycX,\r\n                exEvent.ycY\r\n            )) {\r\n            return sp;\r\n        }\r\n    }\r\n    return null;\r\n};\r\n\r\nhandlers.prototype.depose = function () {\r\n    for(let event in this._handlers){\r\n        eventUtil.removeHandler(this.root , event ,this._handlers[event]);\r\n    }\r\n};\r\n\r\nexport default handlers;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Reactor.js\n **/","var ClientToLocal = function(el, e, out) {\r\n    out = out || {};\r\n    var box = el.getBoundingClientRect();\r\n    out.ycX = e.clientX - box.left;\r\n    out.ycY = e.clientY - box.top;\r\n\r\n    return out;\r\n};\r\n\r\nexport default {\r\n    addHandler: function(element, type, handler) {\r\n        element.addEventListener(type, handler, false);\r\n    },\r\n    removeHandler: function(element, type, handler) {\r\n        element.removeEventListener(type, handler);\r\n    },\r\n    getEvent: function(event) {\r\n        return event ? event : window.event;\r\n    },\r\n    getTarget: function(event) {\r\n        return event.target || event.srcElement;\r\n    },\r\n    preventDefault: function(event) {\r\n        if (event.preventDefault) {\r\n            event.preventDefault();\r\n        } else {\r\n            event.returnValue = false;\r\n        }\r\n    },\r\n    stopPropagation: function(event) {\r\n        if (event.stopPropagation) {\r\n            event.stopPropagation();\r\n        } else {\r\n            event.cancelBubble = true;\r\n        }\r\n    },\r\n    stop: function(event) {\r\n        this.preventDefault(event);\r\n        this.stopPropagation(event);\r\n    },\r\n    clientToLocal: ClientToLocal\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/tool/event.js\n **/","/**\r\n * @module ychart/core/graphic/mixin\r\n */\r\n\r\n\r\nimport Eventful from \"./eventful\";\r\nimport {mixin} from \"../../../tool/klass\";\r\nimport {DEFAULT_CONFIG} from \"../../config/config\";\r\n\r\n\r\n/**\r\n * 拖动的实现类。 由于该类仅需要一个实例，所以没有做成混合类\r\n * @class\r\n * @constructor\r\n */\r\nvar Draggable = function () {\r\n    Eventful.call(this);\r\n\r\n\r\n    this.on(\"mousedown\", this._dragStart, this);\r\n    this.on(\"mousemove\", this._dragIng, this);\r\n    this.on(\"mouseup\", this._dragEnd, this);\r\n    this.on(\"globalout\", this._dragEnd, this);\r\n};\r\n\r\n\r\nDraggable.prototype = {\r\n    constructor: Draggable,\r\n\r\n    _dragDelay: 100,\r\n\r\n    _lastClickTime: null,\r\n\r\n    /**\r\n     * 开始拖动\r\n     * @param {event} exEvent  加入了自定义项的扩展事件对象\r\n     * @private\r\n     */\r\n    _dragStart: function (exEvent) {\r\n        var target = exEvent.targetEle;\r\n        this._lastClickTime = new Date();\r\n        if (target) {\r\n            this._x = exEvent.offsetX;\r\n            this._y = exEvent.offsetY;\r\n            this._dragingTarget = target;\r\n            this.trigger(target, \"dragStart\", exEvent);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 拖动中\r\n     * @param {event} exEvent  加入了自定义项的扩展事件对象\r\n     * @private\r\n     */\r\n    _dragIng: function (exEvent) {\r\n        var ele = exEvent.targetEle;\r\n        var target = this._dragingTarget;\r\n        var crt = new Date();\r\n        crt = crt - this._lastClickTime;\r\n        if(ele){\r\n            if(ele.draggable)\r\n                exEvent.target.style.cursor = DEFAULT_CONFIG.cursor_moveable;\r\n            else\r\n                exEvent.target.style.cursor = DEFAULT_CONFIG.cursor_getable;\r\n        }else{\r\n            exEvent.target.style.cursor = DEFAULT_CONFIG.cursor_default;\r\n        }\r\n\r\n        if (target && target.draggable && crt >= this._dragDelay) {\r\n\r\n            var x = exEvent.offsetX;\r\n            var y = exEvent.offsetY;\r\n\r\n            var dx = x - this._x;\r\n            var dy = y - this._y;\r\n            this._x = x;\r\n            this._y = y;\r\n            //向上移动时距离为负. 但是在底层实现中, 向上为正. 所以y取负\r\n            target.drift(dx, -dy);\r\n            this.trigger(target, \"draging\", exEvent);\r\n            // 更新视图\r\n            target.ReBrushAll();\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 拖动完成\r\n     * @param {event} exEvent  加入了自定义项的扩展事件对象\r\n     * @private\r\n     */\r\n    _dragEnd: function (exEvent) {\r\n        exEvent.target.style.cursor =DEFAULT_CONFIG.cursor_default;\r\n        var target = this._dragingTarget;\r\n        if (target) {\r\n            target.dragging = false;\r\n            this.trigger(target, \"dragend\", exEvent);\r\n        }\r\n        this._dragingTarget = null;\r\n    }\r\n};\r\n\r\n\r\nmixin(Draggable, Eventful, true);\r\n\r\nexport default Draggable;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/graphic/mixin/draggable.js\n **/","/**\r\n * @module ychart/core/graphic/mixin\r\n */\r\n\r\n\r\n/**\r\n * 事件分发Dispatch。用于页面上不同对象之间事件绑定及分发。\r\n * 与具体的事件无关系。 就是Reactor模式中的Dispatch\r\n * @class\r\n * @mixin\r\n */\r\nvar Eventful = function () {\r\n    this._handlers = {};\r\n};\r\n\r\n/**\r\n * 绑定某个处理函数到某个事件上\r\n * @param event  事件名称\r\n * @param handler 处理函数\r\n * @param context 处理函数调用的上下文\r\n * @returns {Eventful}\r\n */\r\nEventful.prototype.on = function (event, handler, context) {\r\n    var h = this._handlers;\r\n    if (!h || !event || !handler) {\r\n        return this;\r\n    }\r\n\r\n    if (!h[event]) {\r\n        h[event] = [];\r\n    }\r\n    h[event].push({\r\n        _h: handler,\r\n        _one: false,\r\n        _ctx: context || this  //调用回调的上下文\r\n    });\r\n\r\n    return this;\r\n};\r\n\r\n/**\r\n * 绑定某个处理函数到某个事件上.但是仅触发该事件一次。 trigger后删除。\r\n * @param event  事件名称\r\n * @param handler 处理函数\r\n * @param context 处理函数调用的上下文\r\n * @returns {Eventful}\r\n */\r\nEventful.prototype.once = function (event, handler, context) {\r\n    var _h = this._handlers;\r\n\r\n    if (!handler || !event) {\r\n        return this;\r\n    }\r\n\r\n    if (!_h[event]) {\r\n        _h[event] = [];\r\n    }\r\n\r\n    if (_h[event].indexOf(handler) >= 0) {\r\n        return this;\r\n    }\r\n\r\n    _h[event].push({\r\n        _h: handler,\r\n        _one: true,\r\n        _ctx: context || this  //调用回调的上下文\r\n    });\r\n\r\n    return this;\r\n};\r\n\r\n/**\r\n * 删除某个事件/某个事件的某个回调\r\n * @param event 事件。 未指定将删除所有事件及对应的回调\r\n * @param handler 回调  指定该值和事件，将删除该事件的该回调函数\r\n * @returns {Eventful}\r\n */\r\nEventful.prototype.remove = function (event, handler) {\r\n    if (!event) {\r\n        this._handlers = {};\r\n        return this;\r\n    }\r\n\r\n    var hs = this._handlers[event];\r\n    if (handler) {\r\n        var i = 0;\r\n        for (; i < hs.length; i++) {\r\n            if (hs[i]._h === handler) {\r\n                break;\r\n            }\r\n            hs.splice(i, 1);\r\n        }\r\n        if (hs && hs.length == 0) {\r\n            delete this._handlers[event];\r\n        }\r\n    } else {\r\n        delete this._handlers[event];\r\n    }\r\n\r\n    return this;\r\n};\r\n\r\nvar arrySlice = Array.prototype.slice;\r\n\r\n/**\r\n * 事件分发\r\n * @param eventName 事件名称\r\n * @returns {Eventful}\r\n */\r\nEventful.prototype.trigger = function (eventName) {\r\n    var handles = this._handlers[eventName];\r\n    if (handles) {\r\n        var args = arguments;\r\n        var argLen = args.length;\r\n\r\n        if (argLen > 3) {\r\n            args = arrySlice.call(args, 1);\r\n        }\r\n        //来自backbone的黑魔法,效率优化,看起来很厉害的样子\r\n        handles.forEach(function (item, index, array) {\r\n            switch (argLen) {\r\n                case 1:\r\n                    item._h.call(item._ctx);\r\n                    break;\r\n                case 2:\r\n                    item._h.call(item._ctx, args[1]);\r\n                    break;\r\n                case 3:\r\n                    item._h.call(item._ctx, args[1], args[2]);\r\n                    break;\r\n                default:\r\n                    item._h.apply(item._ctx, args);\r\n                    break\r\n            }\r\n            if (item._one) {\r\n                array.splice(index, 1);\r\n            }\r\n        });\r\n    }\r\n    return this;\r\n};\r\n\r\n\r\nexport default Eventful;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/graphic/mixin/eventful.js\n **/","/**\r\n * 默认全局配置\r\n * @global\r\n * @module ychart/core/config/style\r\n */\r\nexport var DEFAULT_CONFIG = {\r\n    //正常情况下鼠标样式\r\n    cursor_default: \"default\",\r\n    cursor_moveable: \"move\",\r\n    cursor_getable: \"pointer\",\r\n\r\n    //元素在获取焦点时显示信息提示框必须和鼠标当前位置有偏移不然元素本身将不能捕获事件\r\n    tipoffsetX: 10,\r\n    tipoffsetY: 0,\r\n\r\n    //默认的坐标系. 默认为笛卡尔坐标系, 否则就是已左上角为原点的坐标系\r\n    coordinateSystem: \"Cartesian\"\r\n};\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/config/config.js\n **/","/**\r\n * 独立的HTML元素模块，通常用于某个元素的信息展示\r\n * @module ychart/core/graphic/htmlVIew\r\n */\r\n\r\nimport View from \"./view\";\r\nimport {\r\n    createDOM\r\n} from \"../../tool/dom\";\r\n\r\n/**\r\n * @private\r\n */\r\nclass DomContent{\r\n    constructor(config) {\r\n\r\n        this._root = createDOM(config.id, \"div\", \"htmlView\",\"absolute\", {left: config.left , top: config.top} ,{width: config.width , height: config.height});\r\n        this._content = document.createElement(\"div\");\r\n\r\n        this.init(config);\r\n    }\r\n\r\n    init(config){\r\n        this._root.style.border = \"solid 1px #efefef\"; this._root.style.backgroundColor = \"white\";\r\n        this._root.style.padding = \"5px\";\r\n\r\n        if(config.title) this._root.appendChild(this.title);\r\n\r\n        this._root.appendChild(this._content);\r\n\r\n        if(config.footer) this._root.appendChild(this.footer);\r\n\r\n        document.body && document.body.appendChild(this._root);\r\n    }\r\n\r\n    get title(){\r\n        return document.createElement(\"div\");\r\n    }\r\n    get content(){\r\n        return this._content.innerHTML;\r\n    }\r\n    set content(html){\r\n        this._content.innerHTML = html;\r\n    }\r\n    get footer(){\r\n        return document.createElement(\"div\");\r\n    }\r\n    show(){\r\n        this._root.style.visibility = \"visible\";\r\n    }\r\n    hide(){\r\n        this._root.style.visibility = \"hidden\";\r\n    }\r\n    move(x,y){\r\n        this._root.style.left = x+\"px\";\r\n        this._root.style.top = y+\"px\";\r\n    }\r\n}\r\n\r\n\r\n/**\r\n * @classdesc 绘制在HTML结构上的视图类，该类与contextView互不影响，但是通常用于\r\n * ContextView的数据展示\r\n * @class\r\n */\r\nexport default class HtmlView extends View {\r\n    constructor( option = {}) {\r\n        super(\"HtmlView\",option);\r\n\r\n        /**\r\n         * 当前元素DOM结构引用\r\n         * @member {HTMLDOMElement}\r\n         */\r\n        this._domcontent = new DomContent({\r\n            id: this.id+\"Parent\",\r\n            width: option.width || 0,\r\n            height: option.height || 0,\r\n            left: option.left || 0,\r\n            top: option.top || 0\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 显示当前HtmlView\r\n     * @method\r\n     */\r\n    show() {\r\n        this._domcontent.show();\r\n    }\r\n\r\n    /**\r\n     * 设置提示框的HTML内容\r\n     * @param info {HTMLString} HTML字符串\r\n     */\r\n    info(info){\r\n        this._domcontent.content = info;\r\n    }\r\n\r\n    /**\r\n     * 隐藏当前HtmlVIew\r\n     * @method\r\n     */\r\n    hide() {\r\n        this._domcontent.hide();\r\n    }\r\n\r\n    /**\r\n     * 移动当前提示框\r\n     * @param x {number} 目标X座标 绝对定位\r\n     * @param y {number}  目标Y座标 绝对定位\r\n     */\r\n    move(x , y){\r\n        this._domcontent.move(x , y);\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/graphic/htmlView.js\n **/","/**\r\n * 绘图基类View模块\r\n * @module ychart/core/graphic/view\r\n */\r\n\r\nimport Element from \"./element\";\r\n/**\r\n * @class\r\n * @classdesc 绘图基类。 页面上所有可以显示的绘图最小单元都必须继承该类\r\n * @abstract\r\n */\r\nclass View extends Element {\r\n\r\n    /**\r\n     * 构造函数\r\n     * @constructor\r\n     * @param {String} type 该类默认为view类型\r\n     * @param {Object} option\r\n     */\r\n    constructor(type = \"view\", option = {}) {\r\n        super(type);\r\n\r\n        /**\r\n         * 该元素是否为脏，为脏的话在下次绘图时需要重新计算和绘制\r\n         * @member {boolean}  默认true\r\n         * @private\r\n         */\r\n        this.__dirty = true;\r\n\r\n        /**\r\n         * 当前元素的父元素\r\n         * @member {object} 默认为null\r\n         */\r\n        this.parent = null;\r\n\r\n        /**\r\n         * 当前元素是否被忽略。 被忽略的话将不会绘制在页面上\r\n         * @member {boolean}\r\n         */\r\n        this.ignore = option.ignore || false;\r\n    }\r\n\r\n    /**\r\n     * 绘图抽象方法。 子类必须实现该方法\r\n     * @abstract\r\n     * @param {Object} option 绘图参数\r\n     * @throws Error  如果子类没有实现该方法将抛出错误\r\n     */\r\n    /* eslint-disable */\r\n    Brush(option) {\r\n        throw new Error(\"绘图单元必须实现该方法\");\r\n    }\r\n    /* eslint-enable */\r\n}\r\n\r\nexport default View;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/graphic/view.js\n **/","export var throwFunc = function(str) {\r\n    throw str;\r\n};\r\n\r\nexport var noOp = function() {};\r\n\r\nexport var bind1Arg = function(handler, context) {\r\n    return function(arg1) {\r\n        return handler.call(context, arg1);\r\n    };\r\n};\r\n\r\nimport {isArr} from \"./util\";\r\n\r\n/**\r\n * 判断某个元素是否加载完成\r\n * @param {} ctx 回调函数的上下文\r\n * @param {HTMLElement} 待加载的元素\r\n * @param {Function | Array.{Function}} 成功的回调函数或者 [调用当前函数时已经加载的回调,稍后的回调]的回调函数数组\r\n * @param {Function} 判断这个元素是否加载的函数\r\n */\r\nvar onreadyCallback = function(ctx, element, callback ,loadMethod) {\r\n    var notCompleteCb = isArr(callback) ? callback[1] : noOp;\r\n    var completeCb = isArr(callback) ? callback[0] : noOp;\r\n    if (loadMethod(element)) {\r\n        completeCb.call(ctx);\r\n        return;\r\n    }\r\n    let timer = setInterval(function() {\r\n        if (loadMethod(element)) {\r\n            notCompleteCb.call(ctx);\r\n            clearInterval(timer);\r\n            return;\r\n        }}, 150);\r\n};\r\n\r\nexport var onImgReady = function(ctx , element , callback){\r\n    var isImageLoaded = function(imgElement){\r\n        return imgElement.complete && imgElement.naturalHeight !== 0;\r\n    };\r\n    onreadyCallback(ctx,element,callback,isImageLoaded);\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/tool/lang.js\n **/","/**\r\n * 贝塞尔曲线\r\n * @module ychart/shape/Besier\r\n */\r\nimport debugs from \"../tool/debug\"\r\nimport ShapeBuilder from \"../core/viewBuilder\"\r\n\r\nvar warn = debugs.warn;\r\nvar insiderange = function (val, rg1, rg2) {\r\n    return val < rg1 || val > rg2;\r\n};\r\nvar sqrt = function (val) {\r\n    return Math.sqrt(val);\r\n};\r\nvar abs = function (val) {\r\n    return Math.abs(val);\r\n};\r\nvar atan = function (val) {\r\n    return Math.atan(val);\r\n};\r\nvar sin = function (val) {\r\n    return Math.sin(val);\r\n};\r\nvar cos = function (val) {\r\n    return Math.cos(val);\r\n};\r\nvar floor = function (val) {\r\n    return Math.floor(val);\r\n};\r\nvar radian2angle = function (radian) {\r\n    return radian * 180 / Math.PI;\r\n};\r\n\r\n/**\r\n *\r\n * @class Bezier\r\n * @classdesc 绘制一条曲线路径. 调用此方法后当前的context将包含一条路径.\r\n * @property {Array.number} beginpt x,y  开始点坐标\r\n * @property {Array.number} endpt    x,y 结束点坐标\r\n * @property {number} compact 0-10  表示该波浪线的紧凑程度,即每个弯曲的距离比例\r\n * @property {number} systole 0-4 波浪的起伏程度, 表现为上下波动程度. 1为标准.小于1就是缩放.1-4就是放大\r\n * @constructor Bezier\r\n */\r\nexport default ShapeBuilder.baseContextViewExtend({\r\n\r\n    type: \"BezierPath\",\r\n\r\n    BuildPath: function (ctx, config) {\r\n        var beginpt = config.beginpt, endpt = config.endpt, compact = config.compact || 5, systole = config.systole;\r\n\r\n        var linequadrant = function () {\r\n            if (beginpt[0] < endpt[0] && beginpt[1] >= endpt[1]) return 1;\r\n            if (beginpt[0] >= endpt[0] && beginpt[1] > endpt[1]) return 2;\r\n            if (beginpt[0] > endpt[0] && beginpt[1] <= endpt[1]) return 3;\r\n            if (beginpt[0] <= endpt[0] && beginpt[1] < endpt[1]) return 4;\r\n        }();\r\n        var nextx = function (x, dis) {\r\n            return beginpt[0] <= endpt[0] ? x + dis : x - dis;\r\n        };\r\n        var nexty = function (y, dis) {\r\n            return beginpt[1] <= endpt[1] ? y + dis : y - dis;\r\n        };\r\n        var nexpt_ct = function (pt, dispt, leftorright) {\r\n            var getrs = function (disx, disy) {\r\n                if (leftorright === 0) {\r\n                    return {\r\n                        x: pt[0] + disx,\r\n                        y: pt[1] + disy\r\n                    };\r\n                } else if (leftorright == 1) {\r\n                    return {\r\n                        x: pt[0] - disx,\r\n                        y: pt[1] - disy\r\n                    };\r\n                } else {\r\n                    warn(\"通过距离获取控制点坐标出错\");\r\n                    return null;\r\n                }\r\n            };\r\n            switch (linequadrant) {\r\n                case 1:\r\n                    return getrs(-dispt[0], -dispt[1]);\r\n                case 2:\r\n                    return getrs(-dispt[0], dispt[1]);\r\n                case 3:\r\n                    return getrs(dispt[0], dispt[1]);\r\n                case 4:\r\n                    return getrs(dispt[0], -dispt[1]);\r\n            }\r\n        };\r\n        if (insiderange(compact, 1, 10) || insiderange(systole, 0, 4)) {\r\n            warn(\"绘制曲线路径中输入的参数错误\");\r\n            return;\r\n        }\r\n        var piece = 2 * compact;\r\n        var dispiece = sqrt(this.getDistance(beginpt, endpt) / piece);\r\n        var h = dispiece / 2 * systole;\r\n        var linevert_angleor = atan(abs(endpt[0] - beginpt[0]) / abs(endpt[1] - beginpt[1]));\r\n\r\n        var linectx_dis = abs(endpt[0] - beginpt[0]) / piece;\r\n        var linecty_dis = abs(endpt[1] - beginpt[1]) / piece;\r\n\r\n        var allctpt = [];\r\n        var allctinlinept = [];\r\n        var alllinectpt = [];\r\n        alllinectpt.push({\r\n            x: beginpt[0],\r\n            y: beginpt[1]\r\n        }, {\r\n            x: nextx(beginpt[0], linectx_dis),\r\n            y: nexty(beginpt[1], linecty_dis)\r\n        });\r\n        allctinlinept.push({\r\n            x: nextx(beginpt[0], linectx_dis / 2),\r\n            y: nexty(beginpt[1], linecty_dis / 2)\r\n        }, {\r\n            x: nextx(nextx(beginpt[0], linectx_dis / 2), linectx_dis),\r\n            y: nexty(nexty(beginpt[1], linecty_dis / 2), linecty_dis)\r\n        });\r\n        var dispt = {\r\n            x: cos(linevert_angleor) * h,\r\n            y: sin(linevert_angleor) * h\r\n        };\r\n        allctpt.push(nexpt_ct(allctinlinept[0], dispt, 0), nexpt_ct(allctinlinept[1], dispt, 1));\r\n        var i;\r\n        for (i = 2; i < piece; i++) {\r\n            allctinlinept.push({\r\n                x: nextx(allctinlinept[i - 1][0], linectx_dis),\r\n                y: nexty(allctinlinept[i - 1][1], linecty_dis)\r\n            });\r\n            alllinectpt.push({\r\n                x: nextx(alllinectpt[i - 1][0], linectx_dis),\r\n                y: nexty(alllinectpt[i - 1][1], linecty_dis)\r\n            });\r\n            allctpt.push(nexpt_ct(allctinlinept[i], dispt, i % 2));\r\n        }\r\n        //最后一个点需要特殊处理\r\n        alllinectpt.push({\r\n            x: nextx(alllinectpt[i - 1][0], linectx_dis),\r\n            y: nexty(alllinectpt[i - 1][1], linecty_dis)\r\n        });\r\n\r\n        ctx.moveTo(beginpt[0], beginpt[1]);\r\n        for (i = 1; i < allctpt.length; i++) {\r\n            ctx.quadraticCurveTo(allctpt[i - 1][0], allctpt[i - 1][1], alllinectpt[i][0], alllinectpt[i][1]);\r\n        }\r\n        ctx.quadraticCurveTo(allctpt[i - 1][0], allctpt[i - 1][1], alllinectpt[i][0], alllinectpt[i][1]);\r\n\r\n        config.style.brushType = \"stroke\";\r\n\r\n    }\r\n});\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shape/Bezier.js\n **/","import {isObj,isArr} from \"./util\";\r\n\r\nvar dbpre = \"DamJs Debug Info :    \";\r\nvar wnpre = \"DamJs warn Info :    \";\r\nvar dbprespace = function () {\r\n    var i = 0, rs = \"      \";\r\n    for (i = 0; i < dbpre.length; i++) {\r\n        rs += \" \";\r\n    }\r\n    return rs;\r\n}();\r\n\r\nvar debug = function (info) {\r\n    console.log(dbpre + info);\r\n};\r\n\r\nvar warn = function (info) {\r\n    console.log(wnpre + info);\r\n};\r\n\r\nvar isobj = false;\r\nvar printobj = function (obj) {\r\n    function _printObj(obj) {\r\n        var ele;\r\n        if (isObj(obj)) {\r\n            for (ele in obj) {\r\n                if (isObj(obj[ele])) {\r\n                    debug(ele + \" : \");\r\n                    isobj = true;\r\n                    printobj(obj[ele]);\r\n                    isobj = false;\r\n                } else {\r\n                    if (isobj) {\r\n                        console.log(dbprespace + ele + \" : \" + obj[ele]);\r\n                    }\r\n                    else\r\n                        debug(ele + \" : \" + obj[ele]);\r\n                }\r\n            }\r\n        } else if (isArr(obj)) {\r\n            var len = obj.length;\r\n            for (var i = 0; i < len; i++) {\r\n                printobj(obj[i]);\r\n            }\r\n        }\r\n    }\r\n\r\n    _printObj(obj);\r\n    isobj = false;\r\n};\r\n\r\nexport default {\r\n    printobj,\r\n    debug,\r\n    warn\r\n};\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/tool/debug.js\n **/","/**\r\n * 绘图元素类构造器\r\n * @module  ychart/graphic/viewBuilder\r\n */\r\nimport ContextView from \"./graphic/contextView\";\r\nimport { isType ,isFunc} from \"../tool/util\";\r\nimport debugs from \"../tool/debug\";\r\nimport {DEFAULT_CONFIG} from \"./config/config\";\r\n\r\nvar REQUIRED_CHILD = {\r\n    type: \"String\",\r\n    BuildPath: \"Function\"\r\n};\r\n\r\n\r\n/**\r\n * @description 基本canvas视图类创建工厂， 调用该方法并且传入如下参数即创建了一个新的视图元素\r\n * @param {object} defaults 视图元素构造相关方法\r\n * @returns {BaseContextView} 视图元素类\r\n */\r\nvar baseContextViewExtend = function (defaults) {\r\n    if (debugs.open) {\r\n        for (var item in REQUIRED_CHILD) {\r\n            if (!isType(REQUIRED_CHILD[item])(defaults[item])) {\r\n                debugs.debug(\"构造新形状出错，属性名称：\" + item + \" 属性要求的类型： \"\r\n                    + REQUIRED_CHILD[item] + \" 实际类型: \" + (typeof defaults[item]));\r\n                debugs.printobj(defaults);\r\n                return null;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @class\r\n     * @classdesc ychart形状的构造类.\r\n     */\r\n    class BaseContextView extends ContextView {\r\n        constructor(baseOption) {\r\n            super(defaults.type, baseOption);\r\n            if(isFunc(defaults[\"Init\"])){\r\n                defaults[\"Init\"].call(this,baseOption);\r\n            }\r\n        }\r\n        zoom(x, y){\r\n            super.zoom(x , y);\r\n        }\r\n\r\n        setDefaultConfig(config){\r\n            //设置全局ychart属性\r\n            this.__yh = config.yh;\r\n            if(DEFAULT_CONFIG.coordinateSystem == \"Cartesian\")\r\n                //设置笛卡尔坐标系\r\n                this._setDefaultTrasformToCartesian(config.height);\r\n        }\r\n\r\n        /**\r\n         * 设置当前元素的默认坐标系为直角坐标系. 该方法应该在刷新之前调用并且仅仅调用一次.\r\n         * 由于变换要在元素知道被添加到某个具体的 @see{CanvasRenderingContext2D} 的时候\r\n         * 才可以.\r\n         * @private\r\n         * @param position  距离变换\r\n         * @param scale  缩放及方向变换\r\n         */\r\n        _setDefaultTrasformToCartesian(height){\r\n            this.position = [0 , height];\r\n            this.scale = [1,-1];\r\n        }\r\n    }\r\n\r\n    for(var prop in defaults){\r\n        BaseContextView.prototype[prop] = defaults[prop];\r\n    }\r\n\r\n    return BaseContextView;\r\n};\r\n\r\nexport default {\r\n    baseContextViewExtend\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/viewBuilder.js\n **/","/**\r\n * 绘制在canvas上的元素基类模块\r\n * @module ychart/core/graphic/contextview\r\n */\r\n\r\nimport View from \"./view\";\r\nimport Transform from \"./mixin/transform\";\r\nimport Eventful from \"./mixin/eventful\";\r\nimport Moveable from \"./mixin/moveable\";\r\nimport OptionProxy from \"../config/OptionProxy\";\r\nimport text from \"./helper/text\";\r\n\r\nimport {\r\n    mixin\r\n} from \"../../tool/klass\";\r\n\r\nimport {\r\n    isPtInPath,\r\n    isPtInRect\r\n} from \"./helper/viewutil\";\r\n\r\nimport {\r\n    getRectByCtx\r\n} from \"../../tool/dom.js\";\r\n\r\n/**\r\n * @classdesc 绘制在canvas上的CanvasRenderingContext2D图形的绘图处理类,该类提供绘图相关\r\n * 的方法和控制，但是具体路径的绘制则由具体图形负责。 该类可以说仅仅是一个代\r\n * 理\r\n * @class\r\n * @abstract\r\n */\r\nclass ContextView extends View {\r\n\r\n    /**\r\n     * @param {String} type  元素类型. 该类型默认为ContextView\r\n     * @param {Object} option  实例的具体参数\r\n     * @constructor\r\n     */\r\n    constructor(type = \"ContextView\", option = {}) {\r\n        super(type, option);\r\n\r\n        this.configProxy = new OptionProxy(this.defaultConfig, option);\r\n\r\n        /**\r\n         * 绘图实例，用于调用实例的刷新方法\r\n         * 在元素被添加到ychart实例的时候设置\r\n         * @member {object}\r\n         * @private\r\n         */\r\n        this.__yh = null;\r\n\r\n        Transform.call(this, option);\r\n        Eventful.call(this);\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @property {boolean} Draggable 当前元素是否可以拖动\r\n     * @default true\r\n     */\r\n    get draggable() {\r\n        return this.config.draggable === undefined ? true : this.config.draggable;\r\n    }\r\n\r\n    /**\r\n     * 当前元素的层级。层级决定了当前元素将被绘制在第几层canvas上\r\n     * @property {Number} zLevel\r\n     * @default 0\r\n     */\r\n    get zLevel() {\r\n        return this.config.zLevel || 0;\r\n    }\r\n\r\n    /**\r\n     * @property {Object} config 获取当前shapa的配置项\r\n     * @returns {Object}\r\n     */\r\n    get config() {\r\n        return this.configProxy.getConfig();\r\n    }\r\n\r\n    /**\r\n     * @property {boolean} getable 当前元素是否捕获事件。\r\n     * @default true\r\n     * @return boolean\r\n     */\r\n    get getable() {\r\n        return typeof this.config.getable === \"undefined\" ? true : this.config.getable;\r\n    }\r\n\r\n    /**\r\n     * 重绘整个ychart实例. 通常用于元素位置改变\\图片加载完成过后\r\n     */\r\n    ReBrushAll() {\r\n        this.__yh && this.__yh.update();\r\n    }\r\n\r\n    /**\r\n     * 绘图元素在把内容绘制到context之前调用的函数\r\n     * @method\r\n     * @param {CanvasRenderingContext2D} ctx\r\n     */\r\n    /* eslint-disable */\r\n    BeforeBrush(ctx, config) {}\r\n\r\n    /**\r\n     * 绘图元素在把内容绘制到context之后调用的函数\r\n     * @method\r\n     * @param {CanvasRenderingContext2D} ctx\r\n     */\r\n    AfterBrush(ctx, config) {}\r\n\r\n    /**\r\n     * 获取当前元素的包围圈。\r\n     * @return {Array.<Number>} 返回rect数组\r\n     */\r\n    GetContainRect() {\r\n            return this.rect;\r\n        }\r\n        /*eslint-enable */\r\n\r\n    /**\r\n     * 绘图元素在把内容绘制到context之前调用的函数\r\n     * @method\r\n     * @private\r\n     * @param {CanvasRenderingContext2D} ctx\r\n     */\r\n    _BeforeBrush(ctx, config) {\r\n        ctx.save();\r\n\r\n        this._SetShapeTransform(ctx, config);\r\n\r\n        this.configProxy.bindContext(ctx);\r\n\r\n        this.BeforeBrush(ctx, config);\r\n\r\n        ctx.beginPath();\r\n    }\r\n\r\n    /**\r\n     * 设置绘图变换\r\n     * @method\r\n     * @private\r\n     * @param {CanvasRenderingContext2D} ctx\r\n     */\r\n    _SetShapeTransform(ctx) {\r\n        this.updateTransform();\r\n        this.setTransform(ctx);\r\n    }\r\n\r\n    /**\r\n     * 通过上下文获取绘图的canvas尺寸\r\n     * @param {CanvasRenderingContext2D} ctx\r\n     */\r\n    getRectByCtx(ctx) {\r\n        return getRectByCtx(ctx);\r\n    }\r\n\r\n    /**\r\n     * 绘图元素在把内容绘制到context之后调用的函数\r\n     * @method\r\n     * @private\r\n     * @param {CanvasRenderingContext2D} ctx\r\n     */\r\n    _AfterBrush(ctx, config) {\r\n        var tp = this.configProxy.getBrushType();\r\n        /* eslint-disable */\r\n        switch (tp) {\r\n            case \"both\":\r\n            case \"all\":\r\n                ctx.fill();\r\n                ctx.stroke();\r\n                break;\r\n            case \"stroke\":\r\n                ctx.stroke();\r\n                break;\r\n            case \"fill\":\r\n                ctx.fill();\r\n                break;\r\n            case \"none\":\r\n                break;\r\n            default:\r\n                ctx.fill();\r\n                break;\r\n        }\r\n        /* eslint-enable */\r\n        ctx.restore();\r\n\r\n        this.AfterBrush(ctx, config);\r\n    }\r\n\r\n    /**\r\n     * 具体绘制路径的接口函数。 具体绘图子类必须实现该方法\r\n     * @abstract\r\n     * @param {CanvasRenderingContext2D} ctx\r\n     * @param {object} config --配置。\r\n     */\r\n    /* eslint-disable*/\r\n    BuildPath(ctx, config) {\r\n            //设置合适的填充方法\r\n            throw new Error(\" unsurported operation -- can't build shape path\");\r\n    }\r\n    /* eslint-enable */\r\n\r\n    /**\r\n     * 绘制的接口。 绘制该元素必须调用该方法\r\n     * @method\r\n     * @param {CanvasRenderingContext2D} ctx\r\n     */\r\n    Brush(ctx) {\r\n        var config = this.config;\r\n        if (!config.ignore) {\r\n            //设置样式\r\n            this._BeforeBrush(ctx, config);\r\n            //具体图形自己的定制\r\n            this.BuildPath(ctx, config);\r\n            //恢复事故现场\r\n            this._AfterBrush(ctx, config);\r\n\r\n            this.DrawText(ctx, config);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 设置元素配置项。 调用该方法会导致该元素被标记为脏，下一次重新页面刷新时将清楚该元素所在层并且重新绘制\r\n     * @param {object} option\r\n     */\r\n    setOption(option) {\r\n        this.configProxy.update(option);\r\n        this.__dirty = true;\r\n    }\r\n\r\n    /**\r\n     * 判断点是否在当前元素内.该方法会首先通过\r\n     * @see {GetContainRect} 方法判断,然后调用 @see {_isPtInPath} 方法\r\n     * @param {Number} x   x座标\r\n     * @param {Number} y   y座标\r\n     */\r\n    contain(x, y) {\r\n        var local = this.transformCoordToLocal(x, y);\r\n        //当前元素的containRect作为缓存, 鼠标应该首先在该范围内才继续判断\r\n        return this.getable &&\r\n            (isPtInRect(this.GetContainRect(), local[0], local[1]) &&\r\n                this._isPtInPath(x, y));\r\n    }\r\n\r\n    /**\r\n     * 通过路径绘制来判断点是否在元素上\r\n     * @param x\r\n     * @param y\r\n     * @private\r\n     */\r\n    _isPtInPath(x,y){\r\n        return isPtInPath(this, this.config, x, y);\r\n    }\r\n\r\n    /**\r\n     * 绘制文字\r\n     * @param {CanvasRenderingContext2D} ctx\r\n     * @param {object} config --绘制配置\r\n     */\r\n    DrawText(ctx, config) {\r\n        if (!config.text) {\r\n            return;\r\n        }\r\n        var crect = this.GetContainRect();\r\n        if (!crect) {\r\n            return;\r\n        }\r\n        var x = crect[0] + (crect[2] - crect[0]) / 2;\r\n        var y = crect[1] + (crect[3] - crect[1]) / 2;\r\n\r\n        var st = this.configProxy.getStyle();\r\n        /* eslint-disable */\r\n        var textw = text.getTextWidth(config.text, st.font);\r\n        var texth = text.getTextHeight(config.text ,st.font);\r\n        var textAlign = st.textAlign , textBaseline = st.textBaseline;\r\n        switch (config.textpos) {\r\n            case \"bottom-center\":\r\n                y = crect[1];\r\n                textAlign = \"center\";\r\n                break;\r\n            case \"top-left\":\r\n            case \"left-top\":\r\n                x = crect[0];\r\n                y = crect[1];\r\n                break;\r\n            case \"bottom-right\":\r\n            case \"right-bottom\":\r\n                x = crect[2] - textw;\r\n                y = crect[1];\r\n                break;\r\n            case \"left-center\":\r\n                x = crect[0];\r\n                textAlign = \"left\";\r\n                textBaseline = \"middle\";\r\n                break;\r\n            case \"left-bottom\":\r\n            case \"bottom-left\":\r\n                x = crect[0];\r\n                y = crect[3];\r\n                break;\r\n            case \"top-center\":\r\n                y = crect[3];\r\n                textAlign = \"center\";\r\n                textBaseline = \"top\";\r\n                // x -= textw/2;\r\n                break;\r\n            case \"top-right\":\r\n            case \"right-top\":\r\n                y = crect[3];\r\n                x = crect[2]-textw;\r\n                break;\r\n            case \"right-center\":\r\n                x = crect[2]-textw;\r\n                y -= texth/2;\r\n                break;\r\n            default:\r\n                textAlign = \"center\";\r\n                textBaseline = \"middle\";\r\n        }\r\n        /* eslint-disable */\r\n        ctx.save();\r\n        //文字颜色\r\n        if (st.textColor) {\r\n            ctx.fillStyle = st.textColor;\r\n        }\r\n        //文字的变换与图形不一样，默认情况下就是正向的，特别处理\r\n        var globalTextPos = this.transformCoordToGlobal(x,y);\r\n        x = globalTextPos[0] ,y=globalTextPos[1];\r\n\r\n        text.fillText(ctx, config.text, x, y, st.font, textAlign, textBaseline);\r\n\r\n        ctx.restore();\r\n    }\r\n}\r\n\r\n\r\nmixin(ContextView, Transform, true);\r\nmixin(ContextView, Eventful, true);\r\nmixin(ContextView, Moveable, true);\r\n\r\nexport default ContextView;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/graphic/contextView.js\n **/","/**\r\n * 配置代理类。 内部依赖 {@link module:ychart/core/config/styleProxy}\r\n * @module ychart/core/config/optionProxy\r\n */\r\n\r\n\r\nimport styleProxy from \"./StyleProxy\";\r\n\r\nimport { simpleMerge } from \"../../tool/util\";\r\n\r\n/**\r\n * 每个可绘制元素的配置代理类\r\n * 每个可绘制元素的配置项管理类。 该类将管理每个元素绘制需要的各项属性，其中，\r\n * 样式采用styleProxy代理管理。 应该为样式有别名及默认样式。\r\n *\r\n * @class\r\n * @param config\r\n */\r\nvar OptionProxy = function(...options) {\r\n    /**\r\n     * 样式配置代理\r\n     * @member {boolean}\r\n     * @default null\r\n     */\r\n    this.styleProxy = new styleProxy();\r\n\r\n\r\n    /**\r\n     * 实际配置\r\n     * 每个绘图元素的所有配置项。 其中 style 这个项表示所有样式相关。 独立处理\r\n     * @member {object}\r\n     */\r\n    this.config = {\r\n    };\r\n\r\n    var _this = this;\r\n    Object.defineProperty(this.config , \"style\" ,{\r\n        enumerable : true,\r\n        configurable : false,\r\n        get: function(){\r\n            return _this.styleProxy.getStyle();\r\n        },\r\n        set: function (val) {\r\n            _this.styleProxy.update(val);\r\n        }\r\n    });\r\n\r\n    this.update(options);\r\n};\r\n\r\n\r\n/**\r\n * 获取所有配置\r\n * @returns {object} config\r\n */\r\nOptionProxy.prototype.getConfig = function() {\r\n    return this.config;\r\n};\r\n\r\n/**\r\n * 获取样式\r\n * @returns {OptionProxy.config.style|{}}\r\n */\r\nOptionProxy.prototype.getStyle = function() {\r\n    return this.config.style || {};\r\n};\r\n\r\n/**\r\n * 绑定当前样式到指定的上下文\r\n * @param context\r\n */\r\nOptionProxy.prototype.bindContext = function(context) {\r\n    this.styleProxy.bindContext(context);\r\n};\r\n\r\n/**\r\n * 获取画刷类型。用于AfterBrush刷新时判断\r\n * @return {string} 画刷类型, 'both' \\  'stroke' \\ 'fill' \\ 'none'\r\n */\r\nOptionProxy.prototype.getBrushType = function() {\r\n    return this.styleProxy.getBrushType();\r\n};\r\n\r\n/**\r\n * 更新数据\r\n * @param option\r\n */\r\nOptionProxy.prototype.update = function(config) {\r\n    simpleMerge(this.config , config);\r\n};\r\n\r\n\r\nexport default OptionProxy;\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/config/OptionProxy.js\n **/","/**\r\n * 样式代理类。\r\n *\r\n */\r\nimport {isObj, merge} from \"../../tool/util\";\r\nimport Style from \"./style\";\r\n\r\nvar defaultStyle = Style.style;\r\nvar styleMapper = Style.styleMap;\r\n\r\n/**\r\n * 样式代理类 ，在合并样式时会出现覆盖的情况\r\n * @class\r\n */\r\nvar StyleProxy = function (style) {\r\n    style = style || {};\r\n    this.style = merge(new defaultStyle(), style, true, styleMapper);\r\n    this.brushType = null;\r\n    this.init(style);\r\n};\r\n\r\nStyleProxy.prototype.init = function (style) {\r\n    this.brushType = style.brushType ? style.brushType :\r\n        (style.strokeStyle ?\r\n            (style.fillStyle ? \"both\" : \"stroke\") :\r\n            (style.fillStyle ? \"fill\" : \"none\")    );\r\n};\r\n\r\nStyleProxy.prototype.bindContext = function (ctx) {\r\n    var style = this.style;\r\n    for (var prop in this.style) {\r\n        ctx[prop] = this.style[prop];\r\n    }\r\n    // 渐变效果覆盖其他的fillStyle样式\r\n    if (isObj(style.gradient)) {\r\n        var _gradient = ctx.createLinearGradient(style.gradient.beginpt[0], style.gradient.beginpt[1],\r\n            style.gradient.endpt[0], style.gradient.endpt[1]);\r\n\r\n        _gradient.addColorStop(0, style.gradient.beginColor);\r\n        _gradient.addColorStop(1, style.gradient.endColor);\r\n        ctx.fillStyle = _gradient;\r\n    }\r\n};\r\n\r\nStyleProxy.prototype.update = function (_style) {\r\n    if (_style) {\r\n        merge(this.style, _style, true, styleMapper);\r\n        this.init(_style);\r\n    }\r\n};\r\n\r\nStyleProxy.prototype.getBrushType = function () {\r\n    return this.brushType;\r\n};\r\n\r\nStyleProxy.prototype.getStyle = function () {\r\n    return this.style;\r\n};\r\n\r\nexport default StyleProxy;\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/config/StyleProxy.js\n **/","/**\r\n * 样式名映射\r\n * @module ychart/core/config/style\r\n */\r\nvar styleMap = {\r\n\r\n    fillStyle: \"fillStyle\",\r\n    fillColor: \"fillStyle\",\r\n    color: \"fillStyle\",\r\n\r\n    strokeStyle: \"strokeStyle\",\r\n    lineColor: \"strokeStyle\",\r\n    lineWidth: \"lineWidth\",\r\n    lineCap: \"lineCap\",\r\n    lineJoin: \"lineJoin\",\r\n    font: \"font\",\r\n\r\n    textAlign: \"textAlign\",\r\n    textBaseline: \"textBaseline\",\r\n\r\n    shadowColor: \"shadowColor\",\r\n    shadowOffsetX: \"shadowOffsetX\",\r\n    shadowOffsetY: \"shadowOffsetY\",\r\n    shadowBlur: \"shadowBlur\",\r\n    shadowx: \"shadowOffsetX\",\r\n    shadowy: \"shadowOffsetY\",\r\n\r\n    globalAlpha: \"globalAlpha\",\r\n    alpha: \"globalAlpha\",\r\n    globalCompositionOperation: \"globalCompositionOperation\",\r\n    overlaystyle: \"globalCompositionOperation\"\r\n};\r\n\r\n\r\n/**\r\n * @classdesc 全局默认样式。 所有形状或者路劲的样式都基于这个样式。\r\n * 负责为所有模块提供默认样式及自定义样式名到标准样式名的转换\r\n * 映射配置属性名到canvas属性.\r\n * 应该包含默认的属性名\r\n * 新加一个属性在这个映射和下面CONFIG中的style中同时添加\r\n * @class\r\n */\r\nvar style = function () {\r\n};\r\n\r\n\r\nstyle.prototype = {\r\n    /**\r\n     * 线条颜色，用于任意路劲绘制中线条样式的控制。\r\n     * 值可以是任意十六进制颜色或者英文单词\r\n     * 别名 : lineColor\r\n     * @type string\r\n     * @default blue\r\n     */\r\n    strokeStyle: \"blue\",\r\n\r\n    /**\r\n     * 填充颜色，用于任意路劲中fill方法的填充样式\r\n     * 值可以是任意十六进制颜色或者英文单词\r\n     * 别名 ： fillColor  color\r\n     * @type string\r\n     * @default #dcd5d9\r\n     */\r\n    fillStyle: \"#dcd5d9\",\r\n\r\n    /**\r\n     * 线宽。\r\n     * @type number\r\n     * @default 1\r\n     */\r\n    lineWidth: 1,\r\n\r\n    /**\r\n     * 线条两端样式. butt、round、square\r\n     * @type string\r\n     * @default round\r\n     */\r\n    lineCap: \"round\",\r\n\r\n    /**\r\n     * bevel,miter线条相交的方式. 园交,斜交还是斜接.\r\n     * @type string\r\n     * @default round\r\n     */\r\n    lineJoin: \"round\",\r\n\r\n    /**\r\n     * 文字\r\n     * @type string\r\n     * @default bold 14px Arial, Helvetica, sans-serif, Times, serif\r\n     */\r\n    font: \"bold 14px Arial, Helvetica, sans-serif, Times, serif\",\r\n\r\n    /**\r\n     * 文字颜色。 strokeStyle\r\n     * 该属性不是标准的canvas样式，是ycharts为方便文字控制添加的\r\n     * @type string\r\n     * @default black\r\n     */\r\n    textColor: \"black\", //文字样式。 非标准canvas属性\r\n\r\n    /**\r\n     * 文本对齐方式\r\n     * @type string\r\n     * @default start\r\n     */\r\n    textAlign: \"start\",\r\n\r\n    /**\r\n     * 文本基线\r\n     * @type string\r\n     * @default bottom\r\n     */\r\n    textBaseline: \"bottom\",\r\n\r\n    /**\r\n     * 默认阴影颜色\r\n     * @type string\r\n     * @default #EA9090\r\n     */\r\n    shadowColor: \"#EA9090\",\r\n\r\n    /**\r\n     * 阴影X偏移\r\n     * @type number\r\n     * @default  shadowOffsetX\r\n     */\r\n    shadowOffsetX: 0,\r\n\r\n    /**\r\n     * 阴影Y偏移\r\n     * @type number\r\n     * @default shadowOffsetY\r\n     */\r\n    shadowOffsetY: 0,\r\n\r\n    /**\r\n     * 像素的模糊数\r\n     * @type number\r\n     * @default 0\r\n     */\r\n    shadowBlur: 0,\r\n\r\n    /**\r\n     * 透明度。  0为透明\r\n     * @type number\r\n     * @default 1\r\n     */\r\n    globalAlpha: 1,\r\n\r\n    /**\r\n     * 透明重叠情况\r\n     * @type string\r\n     * @default source-over\r\n     */\r\n    globalCompositionOperation: \"source-over\"\r\n\r\n};\r\n\r\n\r\nexport default {\r\n    style: style,\r\n    styleMap: styleMap\r\n};\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/config/style.js\n **/","//使用默认样式\r\n\r\nimport Style from \"../../config/style\";\r\nimport {\r\n    getContext\r\n} from \"./viewutil\";\r\n\r\nvar st = new Style.style();\r\n\r\nvar defaultFont = st.font;\r\nvar defaultAlign = st.textAlign;\r\nvar defaultBaseline = st.textBaseline;\r\n\r\nvar _ctx = getContext();\r\n\r\nvar TextUtil = {\r\n    TEXT_CACHE_MAX: 5000,\r\n\r\n    _textHeightCache: [],\r\n    _textHeightCacheCounter: 0,\r\n\r\n    getTextHeight: function(text, textFont) {\r\n        textFont = textFont || defaultFont;\r\n        var key = text + \":\" + textFont;\r\n        if (TextUtil._textHeightCache[key]) {\r\n            return TextUtil._textHeightCache[key];\r\n        }\r\n\r\n        _ctx.save();\r\n        if (textFont) {\r\n            _ctx.font = textFont;\r\n        }\r\n\r\n        text = (text + \"\").split(\"\\n\");\r\n        // 比较粗暴\r\n        var height = (_ctx.measureText(\"国\").width + 2) * text.length;\r\n\r\n        _ctx.restore();\r\n\r\n        TextUtil._textHeightCache[key] = height;\r\n        if (++TextUtil._textHeightCacheCounter > TextUtil.TEXT_CACHE_MAX) {\r\n            // 内存释放\r\n            TextUtil._textHeightCacheCounter = 0;\r\n            TextUtil._textHeightCache = {};\r\n        }\r\n        return height;\r\n    },\r\n    _textWidthCache: [],\r\n    _textWidthCacheCounter: 0,\r\n\r\n    getTextWidth: function(text, textFont) {\r\n\r\n        textFont = textFont || defaultFont;\r\n        var key = text + \":\" + textFont;\r\n        if (TextUtil._textWidthCache[key]) {\r\n            return TextUtil._textWidthCache[key];\r\n        }\r\n        _ctx.save();\r\n\r\n        if (textFont) {\r\n            _ctx.font = textFont;\r\n        }\r\n\r\n        text = (text + \"\").split(\"\\n\");\r\n        var width = 0;\r\n        for (var i = 0, l = text.length; i < l; i++) {\r\n            width = Math.max(\r\n                _ctx.measureText(text[i]).width,\r\n                width\r\n            );\r\n        }\r\n        _ctx.restore();\r\n\r\n        TextUtil._textWidthCache[key] = width;\r\n        if (++TextUtil._textWidthCacheCounter > TextUtil.TEXT_CACHE_MAX) {\r\n            // 内存释放\r\n            TextUtil._textWidthCacheCounter = 0;\r\n            TextUtil._textWidthCache = {};\r\n        }\r\n\r\n        return width;\r\n    },\r\n    /*\r\n     * @param {Canvas} ctx 绘图上下文\r\n     * @param {string} text 要获取矩形范围的文字\r\n     * @param {number} x 绘制文字起始X座标\r\n     * @param {number} y 绘制文字起始Y座标\r\n     * @param {string} textFont 字体\r\n     */\r\n    getTextRect: function(text, x, y, textFont, textAlign, textBaseline) {\r\n        textFont = textFont || defaultFont;\r\n        textAlign = textAlign || defaultAlign;\r\n        textBaseline = textBaseline || defaultBaseline;\r\n\r\n        var width = TextUtil.getTextWidth(text, textFont);\r\n        var lineHeight = TextUtil.getTextHeight(\"国\", textFont);\r\n\r\n        text = (text + \"\").split(\"\\n\");\r\n\r\n        switch (textAlign) {\r\n        case \"end\":\r\n        case \"right\":\r\n            x -= width;\r\n            break;\r\n        case \"center\":\r\n            x -= (width / 2);\r\n            break;\r\n        }\r\n\r\n        switch (textBaseline) {\r\n        case \"top\":\r\n            break;\r\n        case \"bottom\":\r\n            y -= lineHeight * text.length;\r\n            break;\r\n        default:\r\n            y -= lineHeight * text.length / 2;\r\n        }\r\n\r\n        return {\r\n            x: x,\r\n            y: y,\r\n            width: width,\r\n            height: lineHeight * text.length\r\n        };\r\n    }\r\n};\r\n\r\n\r\nfunction _fillText(ctx, text, x, y, textFont, textAlign, textBaseline) {\r\n    if (textFont) {\r\n        ctx.font = textFont;\r\n    }\r\n    ctx.textAlign = textAlign;\r\n    ctx.textBaseline = textBaseline;\r\n\r\n    var rect = TextUtil.getTextRect( text, x, y, textFont, textAlign, textBaseline );\r\n\r\n    text = (text + \"\").split(\"\\n\");\r\n\r\n    var lineHeight = TextUtil.getTextHeight(\"国\", textFont);\r\n    var _left = rect.x , _right = _left + rect.width;\r\n    var _top = y + lineHeight*text.length , _bottom = y;\r\n    switch (textBaseline) {\r\n    case \"top\":\r\n        y = rect.y;\r\n        _top = y;\r\n        _bottom = y + lineHeight*text.length;\r\n        break;\r\n    case \"bottom\":\r\n        y = rect.y + lineHeight;\r\n        break;\r\n    default:\r\n        y = rect.y + lineHeight / 2;\r\n    }\r\n    for (var i = 0, l = text.length; i < l; i++) {\r\n        ctx.fillText(text[i], x, y);\r\n        y += lineHeight;\r\n    }\r\n\r\n    return {\r\n        left: _left,\r\n        bottom:_bottom,\r\n        top: _top,\r\n        right: _right\r\n    };\r\n}\r\n\r\nexport default {\r\n    fillText: _fillText,\r\n    getTextRect: TextUtil.getTextRect,\r\n    getTextWidth: TextUtil.getTextWidth,\r\n    getTextHeight: TextUtil.getTextHeight\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/graphic/helper/text.js\n **/","//isPointInStroke在IE下失效，但是由于仅需修复一次，所以写在这里\r\nif (typeof CanvasRenderingContext2D.prototype.isPointInStroke == \"undefined\") {\r\n    CanvasRenderingContext2D.prototype.isPointInStroke = function(path, x, y) {\r\n        return this.isPointInPath(x, y);\r\n    };\r\n}\r\n\r\nvar _ctx = null;\r\n\r\nfunction createCanvas() {\r\n    return document.createElement(\"canvas\");\r\n}\r\n\r\nexport var getContext = function() {\r\n    if (!_ctx) {\r\n        _ctx = createCanvas().getContext(\"2d\");\r\n    }\r\n    return _ctx;\r\n};\r\n\r\nexport var isPtInRect = function(rect, x, y) {\r\n    return rect && (rect[0] <= x &&\r\n                    rect[2] >= x &&\r\n                    rect[1] <= y &&\r\n                    rect[3] >= y);\r\n};\r\n\r\n//todo 这种方式判断鼠标是否在形状内效率不高。改进\r\nexport var isPtInPath = function(shape, config, x, y) {\r\n    var ctx = getContext();\r\n    ctx.save();\r\n    //设置变换\r\n    shape._BeforeBrush(ctx, config);\r\n    //建立路径\r\n    shape.BuildPath(ctx, config);\r\n    var rs;\r\n    var type = shape.configProxy.getBrushType();\r\n    //对于填充和边线+填充的图形调用isPointInPath方法\r\n    if (type == \"all\" || type == \"fill\") {\r\n        rs = ctx.isPointInPath(x, y);\r\n    } else {\r\n        rs = ctx.isPointInStroke(x, y);\r\n    }\r\n    ctx.restore();\r\n    return rs;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/core/graphic/helper/viewutil.js\n **/","/**\r\n * 圆形\r\n * @module ychart/shape/Circle\r\n */\r\n\r\nimport ShapeBuilder from \"../core/viewBuilder\";\r\n\r\n/**\r\n * 圆形\r\n * @class Circle\r\n * @property {number} x 圆心x坐标\r\n * @property {number} y 圆心y坐标\r\n * @property {number} r 半径\r\n * @constructor Circle\r\n * */\r\nexport default ShapeBuilder.baseContextViewExtend({\r\n\r\n    /**\r\n     * 构造函数 。 在构造函数中指定该图像的中心点\r\n     * @param {object} option  绘制形状的配置\r\n     * @private\r\n     */\r\n    Init: function (config) {\r\n        this.origin = [config.x,config.y];\r\n    },\r\n\r\n    type: \"circle\",\r\n\r\n    BuildPath: function (ctx, config) {\r\n        ctx.arc(config.x, config.y, config.r, Math.PI * 2,\r\n            config.startangel || 0, config.endangel || Math.PI * 2);\r\n    },\r\n\r\n    GetContainRect: function(){\r\n        var config = this.config;\r\n        if(this.dirty || !this.rect){\r\n            this.rect = [config.x - config.r,config.y-config.r ,config.x+config.r,config.y+config.r];\r\n        }\r\n        return this.rect;\r\n    }\r\n\r\n});\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shape/Circle.js\n **/","/**\r\n * 直线\r\n * @module ychart/shape/Line\r\n */\r\nimport ShapeBuilder from \"../core/viewBuilder\";\r\n\r\n/**\r\n * 直线形状类\r\n * @class Line\r\n * @property {number} x0 , y0 开始点\r\n * @property {number} x1 ,y1 结束点\r\n * @property {number} splitnum  如果是虚线，分成多少段.\r\n * @constructor Line\r\n * @extends ContextView\r\n */\r\nexport default ShapeBuilder.baseContextViewExtend({\r\n\r\n    type: \"Line\",\r\n\r\n    BuildPath: function(ctx, config) {\r\n        if (config.splitnum) {\r\n            var splitnum = config.splitnum || 1;\r\n            var splitlen_x = (config.x1 - config.x0) / splitnum / 2;\r\n            var splitlen_y = (config.y1 - config.y0) / splitnum / 2;\r\n            for (var i = 0; i < splitnum; i++) {\r\n                ctx.moveTo(config.x0 + i * 2 * splitlen_x, config.y0 + i * 2 * splitlen_y);\r\n                ctx.lineTo(config.x0 + i * 2 * splitlen_x + splitlen_x, config.y0+ i * 2 * splitlen_y + splitlen_y);\r\n            }\r\n        } else {\r\n            ctx.moveTo(config.x0, config.y0);\r\n            ctx.lineTo(config.x1, config.y1);\r\n        }\r\n        this.rect = [config.x0 , config.y0 ,config.x1,config.y1];\r\n    }\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shape/Line.js\n **/","/**\r\n * 不规则多边形\r\n * @module ychart/shape/Rect\r\n */\r\n\r\nimport ShapeBuilder from \"../core/viewBuilder\";\r\n\r\nvar minx = 99999,\r\n    miny = 99999,\r\n    maxx = -99999,\r\n    maxy = -99999;\r\n\r\n/**\r\n * @class Rect\r\n * @classdesc 不规则多边形. 需指定所有的点坐标\r\n * @property  {Array.number}  allpt [[0,0],[10,10]]这样的点的数组\r\n * @property  {boolean} notClose 是否是不闭合的多边形.默认闭合\r\n * @constructor Rect\r\n */\r\nexport default ShapeBuilder.baseContextViewExtend({\r\n\r\n    type: \"Rect\",\r\n\r\n    BuildPath: function(ctx, config) {\r\n        ctx.moveTo(config.pts[0][0], config.pts[0][1]);\r\n        for (var i = 1; i < config.pts.length; i++) {\r\n            ctx.lineTo(config.pts[i][0], config.pts[i][1]);\r\n        }\r\n        if (!config.notClose) {\r\n            ctx.closePath();\r\n        }\r\n    },\r\n\r\n    GetContainRect: function() {\r\n        if (!this.rect) {\r\n            var i = 0,\r\n                tmp;\r\n            for (i = 0; i < this.config.pts.length; i++) {\r\n                tmp = this.config.pts[i];\r\n                if (tmp[0] < minx) {\r\n                    minx = tmp[0];\r\n                }\r\n                if (tmp[1] < miny) {\r\n                    miny = tmp[1];\r\n                }\r\n                if (tmp[0] > maxx) {\r\n                    maxx = tmp[0];\r\n                }\r\n                if (tmp[1] > maxy) {\r\n                    maxy = tmp[1];\r\n                }\r\n            }\r\n            this.rect = [minx , miny ,maxx ,maxy];\r\n        }\r\n        return this.rect;\r\n    }\r\n\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shape/Rect.js\n **/","/**\r\n * 三角形\r\n * @module ychart/shape/Triangle\r\n */\r\nimport ShapeBuilder from \"../core/viewBuilder\";\r\n\r\n/**\r\n * 三角形\r\n * @class Triangle\r\n * @property {number} beginpt 开始座标\r\n * @property {number} width  三角形的宽\r\n * @property {number} height 三角形的高\r\n * @property {number} direction bottom 为向下。 默认向上\r\n * @constructor Triangle\r\n */\r\nexport default ShapeBuilder.baseContextViewExtend({\r\n\r\n    type: \"triangle\",\r\n\r\n    BuildPath: function(ctx, config) {\r\n        ctx.moveTo(config.beginpt[0], config.beginpt[1]);\r\n        ctx.lineTo(config.beginpt[0] + config.width, config.beginpt[1]);\r\n        var pt = [config.beginpt[0] + config.width / 2, config.beginpt[1] + config.height];\r\n        //向下的三角形\r\n        if (config.direction == \"bottom\") {\r\n            pt[1] = config.beginpt[1] - config.height;\r\n        }\r\n        ctx.lineTo(pt[0], pt[1]);\r\n        ctx.lineTo(config.beginpt[0], config.beginpt[1]);\r\n        config.style.brushType = config.style.brushType || \"stroke\";\r\n    }\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shape/Triangle.js\n **/","/**\r\n * 文字\r\n * @module ychart/shape/Text\r\n */\r\n\r\nimport text from \"../core/graphic/helper/text\";\r\nimport ShapeBuilder from \"../core/viewBuilder\";\r\nimport {DEFAULT_CONFIG} from \"../core/config/config\";\r\n\r\n/**\r\n * 文本\r\n * 由于文本显示与图像刚好是竖向完全相反的两个方向，所以对文本绘制特殊处理。\r\n * 某区域文本是直角座标系，但是文字实际上还是默认的座标系，不过Y被改成负数了\r\n * @class Text\r\n * @property {string} text 显示的文字\r\n * @property {Array.number} beginpt 开始座标\r\n * @constructor YText\r\n */\r\nexport default ShapeBuilder.baseContextViewExtend({\r\n    defaultConfig: {\r\n        coordinate: 1\r\n    },\r\n\r\n    type: \"Text\",\r\n\r\n    BuildPath: function(ctx, config) {\r\n        config.style.brushType = \"none\";\r\n    },\r\n\r\n    DrawText: function(ctx, config) {\r\n        if (!config.text) {\r\n            return;\r\n        }\r\n        var x = config.dx;\r\n        var y = config.dy;\r\n\r\n        var st = this.configProxy.getStyle();\r\n        var textAlign = st.textAlign , textBaseline = st.textBaseline;\r\n        // var textrect = text.getTextRect(config.text , x ,y ,st.textFont ,st.textAlign ,st.textBaseline);\r\n\r\n        ctx.save();\r\n        //文字颜色\r\n        if (st.textColor) {\r\n            ctx.fillStyle = st.textColor;\r\n        }\r\n        //由于文字在canvas额默认变换下就是正的, 而ychart很可能是采用的笛卡尔坐标系,\r\n        //所以在这里转换一下\r\n        // y = 400-y;\r\n        var globalTextPos = this.transformCoordToGlobal(x,y);\r\n        x = globalTextPos[0] ,y=globalTextPos[1];\r\n        var rect = text.fillText(ctx, config.text, x, y, st.font, textAlign, textBaseline);\r\n        ctx.restore();\r\n\r\n        if(this.__dirty && !this.rect){\r\n            let bottom = rect.bottom,top = rect.top;\r\n            if(DEFAULT_CONFIG.coordinateSystem == \"Cartesian\"){\r\n                this.decomposeTransform();\r\n                let h = this.position[1];\r\n                bottom = h-bottom , top = top-h ;\r\n            }\r\n            this.rect = [rect.left , bottom ,rect.right , top];\r\n        }\r\n    },\r\n\r\n\r\n    /*eslint-disable*/\r\n    _isPtInPath: function(x,y){\r\n        return true;\r\n    }\r\n    /*eslint-disable */\r\n\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shape/YText.js\n **/","/**\r\n * 图片\r\n * @module ychart/shape/Image\r\n */\r\nimport ShapeBuilder from \"../core/viewBuilder\";\r\nimport {\r\n    isArr,\r\n    checkNull\r\n} from \"../tool/util\";\r\n\r\nimport {\r\n    onImgReady\r\n} from \"../tool/lang\";\r\n\r\n/**\r\n * 图形形状类\r\n * @class Image\r\n * 该元素可以如下三种构造方法:\r\n *  <br>(image, dx, dy);\r\n *  <br>(image, dx, dy, dWidth, dHeight);\r\n *  <br>(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);\r\n *  分别对应着按照图片的默认尺寸绘制\\ 指定目标位置和尺寸\\ 指定截取图片上的某一块绘制到目标对象上的某个位置\r\n * @property {HTMLImage} image 图形的HTMLImage对象， 注意不能是通过DOM获取的对象。 可以通过新建一个Image对象\r\n * @property {String} imagesrc 图形的src属性， 注意必须和Ychart同源,否则会由于浏览器的安全限制而报错. 与image属性同时存在时Image属性有效\r\n * @property {number} dx 绘制该图形在画布上的起点X  默认0\r\n * @property {number} dy 绘制该图形在画布上的起点Y  默认0\r\n * @property {number} dWidth 绘制该图形在画布上的宽度  默认不指定\r\n * @property {number} dHeight 绘制该图形在画布上的宽度  默认不指定\r\n * @property {number} sx 绘制该图形在图像上的起点X  默认不指定\r\n * @property {number} sy 绘制该图形在图像上的起点Y  默认不指定\r\n * @property {number} sWidth 绘制该图形在图像上的宽度  默认不指定\r\n * @property {number} sHeight 绘制该图形在图像上的宽度  默认不指定\r\n * @property {Object} style 样式.\r\n * @constructor Image\r\n * @extends ContextView\r\n */\r\nexport default ShapeBuilder.baseContextViewExtend({\r\n\r\n    /**\r\n     * 构造函数 。 在构造函数中指定该图像的中心点\r\n     * @param {object} option  绘制形状的配置\r\n     * @private\r\n     */\r\n    Init: function(config) {\r\n        //由于引入了异步加载图片的机制，获取图片的大小在图片还没有实际加载的时候也就无法执行\r\n        if (typeof config.image != \"string\") {\r\n            this.image = config.image;\r\n            this.__setOrigin(this.image);\r\n        } else {\r\n            this.image = new Image();\r\n            let _this = this;\r\n            this.image.onload = function() {\r\n                this.image = null;\r\n                _this.__setOrigin(_this.image);\r\n            };\r\n            this.image.src = config.image;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 设置图片放大缩小的中心座标。 由于依赖于已经加载的图片，所以单独列出来\r\n     * @private\r\n     */\r\n    __setOrigin: function(image) {\r\n        var config = this.config;\r\n        var rect = [];\r\n        if (config.dWidth && config.dHeight) {\r\n            this.origin[0] = config.dx || 0 + config.dWidth / 2;\r\n            this.origin[1] = rect[1] - config.dy || 0 + config.dHeight / 2;\r\n        } else {\r\n            this.origin[0] = config.dx || 0 + image.width / 2;\r\n            this.origin[1] = rect[1] - config.dy || 0 + image.height / 2;\r\n        }\r\n    },\r\n\r\n    type: \"Image\",\r\n\r\n    /**\r\n     * 绘制图片。 必须注意的图片同其他形状一样默认以左下角为起点。\r\n     * 但是由于这是通过容器canvas大小和目标图像的高度计算得来，在\r\n     * 和其他形状配合使用时遇到变化可能会出现问题。 此时就需要设置\r\n     * coordinate属性为-1，使得绘图片还是以左上角为原点.\r\n     * @private\r\n     */\r\n    BuildPath: function(ctx, config) {\r\n        var buildImagePath1 = function() {\r\n            var image = this.image || config.image;\r\n            if (image) {\r\n                numberOrZero(config, [\"dx\", \"dy\", \"sx\", \"sy\"]);\r\n                let dy = config.dy;\r\n                let sWidth = config.sWidth || image.width;\r\n                let sHeight = config.sHeight || image.height;\r\n                let dWidth = config.dWidth || image.width;\r\n                let dHeight = config.dHeight || image.height;\r\n                //图片的目标位置应该是图片的左下角, 在笛卡尔坐标系中就应该加上图片的目标高度\r\n                dy += dHeight;\r\n                ctx.drawImage(image, config.sx, config.sy, sWidth, sHeight, config.dx, dy, dWidth, dHeight);\r\n                this.rect = [config.dx, dy, config.dx + dWidth, dy + dHeight];\r\n            }\r\n        };\r\n        onImgReady(this, this.image, [buildImagePath1, function() {\r\n            this.ReBrushAll();\r\n        }]);\r\n    },\r\n\r\n    /*eslint-disable*/\r\n    _isPtInPath: function(x,y){\r\n        return true;\r\n    }\r\n    /*eslint-disable */\r\n});\r\n\r\nfunction numberOrZero(obj, fields) {\r\n    if (isArr(fields)) {\r\n        fields.forEach(field => {\r\n            obj[field] = (checkNull(obj[field]) || isNaN(obj[field])) ? 0 : obj[field];\r\n        });\r\n    } else {\r\n        obj[fields] = (checkNull(obj[fields]) || isNaN(obj[fields])) ? 0 : obj[fields];\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/shape/Image.js\n **/","/**\r\n *动画效果模块\r\n * @module ychart/animation\r\n */\r\n\r\nvar requestAnimFrame = (window !== undefined &&\r\n    (window.requestAnimationFrame\r\n    || window.webkitRequestAnimationFrame\r\n    || window.mozRequestAnimationFrame\r\n    || window.oRequestAnimationFrame\r\n    || window.msRequestAnimationFrame))\r\n    || function (callback) {\r\n        window.setTimeout(callback, 1000 / 60);\r\n    };\r\n\r\nvar Nop = function () {\r\n    return true;\r\n};\r\n\r\n/**\r\n * @function\r\n * @description 动画控制函数\r\n * @param option\r\n */\r\nvar animate = function (option) {\r\n    var onBegin = option.onBegin || Nop,\r\n        onChanging = option.onChanging || Nop,\r\n        onEnd = option.onEnd || null,\r\n        beginDelay = option.beginDelay || 0;\r\n    (function frame(beginResult) {\r\n        if (onEnd()) {\r\n            return;\r\n        }\r\n        onChanging(beginResult);\r\n\r\n        requestAnimFrame(frame);\r\n    })(function(){\r\n        setTimeout(onBegin,beginDelay);\r\n    }());\r\n};\r\n\r\nexport default {\r\n    animate: animate\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/animation/animation.js\n **/"],"sourceRoot":""}